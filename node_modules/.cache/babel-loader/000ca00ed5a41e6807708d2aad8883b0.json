{"remainingRequest":"/Users/stavros/Documents/web/diary/scripta/node_modules/thread-loader/dist/cjs.js!/Users/stavros/Documents/web/diary/scripta/node_modules/babel-loader/lib/index.js!/Users/stavros/Documents/web/diary/scripta/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/stavros/Documents/web/diary/scripta/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/stavros/Documents/web/diary/scripta/src/components/Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/stavros/Documents/web/diary/scripta/src/components/Login.vue","mtime":1615244078329},{"path":"/Users/stavros/Documents/web/diary/scripta/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/stavros/Documents/web/diary/scripta/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/stavros/Documents/web/diary/scripta/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/stavros/Documents/web/diary/scripta/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/stavros/Documents/web/diary/scripta/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnRyaW0iOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0xvZ2luJywKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZW1haWw6ICcnLAogICAgICBwYXNzd29yZDogJycKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBsb2dpbjogZnVuY3Rpb24gbG9naW4oKSB7CiAgICAgIHZhciBlbWFpbCA9IHRoaXMuZW1haWw7CiAgICAgIHZhciBwYXNzd29yZCA9IHRoaXMucGFzc3dvcmQ7IC8vdmFsaWRhdGUgdXNlciBpbnB1dAoKICAgICAgdHJ5IHsKICAgICAgICAvL2VtcHR5IGlucHV0CiAgICAgICAgaWYgKGVtYWlsLnRyaW0oKSA9PSAnJykgewogICAgICAgICAgdGhyb3cgJ3BsZWFzZSBlbnRlciB5b3VyIGVtYWlsJzsKICAgICAgICB9CgogICAgICAgIGlmIChwYXNzd29yZC50cmltKCkgPT0gJycpIHsKICAgICAgICAgIHRocm93ICdwbGVhc2UgZW50ZXIgeW91ciBwYXNzd29yZCc7CiAgICAgICAgfSAvL3NlbmQgcG9zdCByZXF1ZXN0IHdpdGggY3JlZGVudGlhbHMKCgogICAgICAgIHZhciByZXF1ZXN0ID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7CiAgICAgICAgcmVxdWVzdC5vcGVuKCdQT1NUJywgJ2h0dHBzOi8vc2NyaXB0YS1hcHAuaGVyb2t1YXBwLmNvbS9hcGkvbG9naW4nKTsKICAgICAgICByZXF1ZXN0LnNldFJlcXVlc3RIZWFkZXIoJ0FjY2Vzcy1Db250cm9sLUFsbG93LU1ldGhvZHMnLCAnUE9TVCxHRVQsUFVULERFTEVURScpOwogICAgICAgIHZhciBkYXRhID0gSlNPTi5zdHJpbmdpZnkoewogICAgICAgICAgZW1haWw6IHRoaXMuZW1haWwsCiAgICAgICAgICBwYXNzd29yZDogdGhpcy5wYXNzd29yZAogICAgICAgIH0pOwogICAgICAgIHJlcXVlc3Quc2VuZChkYXRhKTsKICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CgogICAgICAgIHJlcXVlc3Qub25sb2FkID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgdmFyIHJlc3BvbnNlID0gSlNPTi5wYXJzZSh0aGlzLnJlc3BvbnNlVGV4dCk7CgogICAgICAgICAgaWYgKHRoaXMuc3RhdHVzID09IDIwMCkgewogICAgICAgICAgICAvL3NhdmUgc2Vzc2lvbl9pZCB0byBsb2NhbFN0b3JhZ2UKICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Nlc3Npb25faWQnLCByZXNwb25zZS5zZXNzaW9uX2lkKTsgLy9zYXZlIHVzZXJfaWQgdG8gbG9jYWxTdG9yYWdlCgogICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndXNlcl9pZCcsIHJlc3BvbnNlLnVzZXJfaWQpOyAvL2dvIHRvIGhvbWUgc2NyZWVuCgogICAgICAgICAgICBzZWxmLiRlbWl0KCduYXZpZ2F0aW9uJywgMSwgJ0FwcGxpY2F0aW9uIHRpdGxlJywgJ2luZGV4Jyk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBhbGVydChyZXNwb25zZS5tZXNzYWdlKTsKICAgICAgICAgIH0KICAgICAgICB9OwogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIGFsZXJ0KGVycm9yKTsKICAgICAgfQogICAgfSwKICAgIHVwZGF0ZUlucHV0OiBmdW5jdGlvbiB1cGRhdGVJbnB1dChuKSB7CiAgICAgIGlmIChuID09IDEpIHsKICAgICAgICB0aGlzLmVtYWlsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VtYWlsJykudmFsdWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5wYXNzd29yZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwYXNzd29yZCcpLnZhbHVlOwogICAgICB9CiAgICB9LAogICAgZ290b1NpZ251cDogZnVuY3Rpb24gZ290b1NpZ251cCgpIHsKICAgICAgdGhpcy4kZW1pdCgnbmF2aWdhdGlvbicsIC0xLCAnc2lnbnVwJyk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoCA,eAAA;AACA,EAAA,IAAA,EAAA,OADA;AAGA,EAAA,IAAA,EAAA,gBAAA;AACA,WAAA;AACA,MAAA,KAAA,EAAA,EADA;AAEA,MAAA,QAAA,EAAA;AAFA,KAAA;AAIA,GARA;AAUA,EAAA,OAAA,EAAA;AACA,IAAA,KAAA,EAAA,iBAAA;AACA,UAAA,KAAA,GAAA,KAAA,KAAA;AACA,UAAA,QAAA,GAAA,KAAA,QAAA,CAFA,CAIA;;AACA,UAAA;AAEA;AACA,YAAA,KAAA,CAAA,IAAA,MAAA,EAAA,EAAA;AACA,gBAAA,yBAAA;AACA;;AACA,YAAA,QAAA,CAAA,IAAA,MAAA,EAAA,EAAA;AACA,gBAAA,4BAAA;AACA,SARA,CAUA;;;AACA,YAAA,OAAA,GAAA,IAAA,cAAA,EAAA;AAEA,QAAA,OAAA,CAAA,IAAA,CAAA,MAAA,EAAA,6CAAA;AACA,QAAA,OAAA,CAAA,gBAAA,CAAA,8BAAA,EAAA,qBAAA;AACA,YAAA,IAAA,GAAA,IAAA,CAAA,SAAA,CAAA;AAAA,UAAA,KAAA,EAAA,KAAA,KAAA;AAAA,UAAA,QAAA,EAAA,KAAA;AAAA,SAAA,CAAA;AACA,QAAA,OAAA,CAAA,IAAA,CAAA,IAAA;AACA,YAAA,IAAA,GAAA,IAAA;;AACA,QAAA,OAAA,CAAA,MAAA,GAAA,YAAA;AAEA,cAAA,QAAA,GAAA,IAAA,CAAA,KAAA,CAAA,KAAA,YAAA,CAAA;;AACA,cAAA,KAAA,MAAA,IAAA,GAAA,EAAA;AAEA;AACA,YAAA,YAAA,CAAA,OAAA,CAAA,YAAA,EAAA,QAAA,CAAA,UAAA,EAHA,CAKA;;AACA,YAAA,YAAA,CAAA,OAAA,CAAA,SAAA,EAAA,QAAA,CAAA,OAAA,EANA,CAQA;;AACA,YAAA,IAAA,CAAA,KAAA,CAAA,YAAA,EAAA,CAAA,EAAA,mBAAA,EAAA,OAAA;AACA,WAVA,MAWA;AACA,YAAA,KAAA,CAAA,QAAA,CAAA,OAAA,CAAA;AACA;AACA,SAjBA;AAmBA,OArCA,CAsCA,OAAA,KAAA,EAAA;AACA,QAAA,KAAA,CAAA,KAAA,CAAA;AACA;AAEA,KAhDA;AAkDA,IAAA,WAAA,EAAA,qBAAA,CAAA,EAAA;AAEA,UAAA,CAAA,IAAA,CAAA,EAAA;AACA,aAAA,KAAA,GAAA,QAAA,CAAA,cAAA,CAAA,OAAA,EAAA,KAAA;AACA,OAFA,MAGA;AACA,aAAA,QAAA,GAAA,QAAA,CAAA,cAAA,CAAA,UAAA,EAAA,KAAA;AACA;AACA,KA1DA;AA4DA,IAAA,UAAA,EAAA,sBAAA;AACA,WAAA,KAAA,CAAA,YAAA,EAAA,CAAA,CAAA,EAAA,QAAA;AACA;AA9DA;AAVA,CAAA","sourcesContent":["<template>\n\n    <main id=\"Login\" class=\"container\">\n        <div class=\"container\">\n            <div class=\"row header\">\n                <h3>USER LOGIN</h3>\n            </div>\n\n            <form class=\"row\" action=\"#\">\n                <label class=\"col-12\" for=\"email\" v-on:keyup='updateInput(1)'>Email<br>\n                    <input type=\"text\"  id=\"email\">\n                </label>\n\n                <label class=\"col-12\" for=\"password\" v-on:keyup='updateInput(2)'>Password<br>\n                    <input type=\"password\" id=\"password\">\n                </label>\n\n                <button class=\"col-6 button_primary\" type=\"button\" id=\"login_button_submit\" v-on:click='login'>submit</button>\n\n            </form>\n\n            <div class=\"row\" id=\"container_button_signup\">\n                <label for=\"button_signup\">No account?\n                <button class=\"col-6\" id=\"button_signup\" v-on:click='gotoSignup'>Sign Up</button>  \n                </label>\n            </div>\n\n            \n        </div>\n\n\n    </main>    \n</template>\n\n\n<script>\nexport default {\n    name:'Login',\n\n    data:function(){\n        return{\n            email:'',\n            password:''\n        }\n    },\n\n    methods:{\n        login:function(){\n            let email=this.email;\n            let password=this.password;\n\n            //validate user input\n            try{\n                \n                //empty input\n                if(email.trim()==''){\n                throw 'please enter your email';\n                }\n                if(password.trim()==''){\n                throw 'please enter your password';\n                }\n\n                //send post request with credentials\n                let request=new XMLHttpRequest();\n                \n                request.open('POST','https://scripta-app.herokuapp.com/api/login');\n                request.setRequestHeader('Access-Control-Allow-Methods','POST,GET,PUT,DELETE');\n                let data=JSON.stringify({email:this.email,password:this.password});\n                request.send(data);                  \n                let self=this;\n                request.onload = function (){        \n                                                               \n                    let response=JSON.parse(this.responseText);                    \n                        if(this.status==200){\n                            \n                            //save session_id to localStorage\n                            localStorage.setItem('session_id',response.session_id);\n\n                            //save user_id to localStorage\n                            localStorage.setItem('user_id',response.user_id);\n\n                            //go to home screen\n                            self.$emit('navigation',1,'Application title','index');\n                        }\n                        else{\n                            alert(response.message);\n                        }                    \n                };\n\n            }\n            catch (error){\n                alert(error);\n            }\n\n        },\n\n        updateInput:function(n){\n            \n            if(n==1){\n               this.email=document.getElementById('email').value;                \n            }\n            else{\n               this.password=document.getElementById('password').value; \n            }\n        },\n\n        gotoSignup:function(){\n            this.$emit('navigation',-1,'signup');\n        }\n\n    },\n}\n</script>\n\n\n<style>\n\n    form{\n        margin-top: 1%;\n        background-color: rgb(0, 139, 139,0.1);\n    }\n\n    label{\n        text-align: center;\n    }\n\n    input{\n        width: 100%;\n        text-align: center;\n    }\n\n    \n    #container_button_signup {\n        justify-content: center;\n\n        margin-top: 2%; \n    }\n\n    #login_button_submit {\n        background-color: darkcyan;\n        color: white;\n    }\n\n    #button_signup {\n        background-color: rgba(0,0,0,0);\n        height: 40px;\n    }\n\n    \n\n</style>\n\n"],"sourceRoot":"src/components"}]}