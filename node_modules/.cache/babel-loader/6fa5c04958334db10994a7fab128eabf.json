{"remainingRequest":"/Users/stavros/Documents/web/diary/scripta/node_modules/babel-loader/lib/index.js!/Users/stavros/Documents/web/diary/scripta/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/stavros/Documents/web/diary/scripta/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/stavros/Documents/web/diary/scripta/src/components/Index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/stavros/Documents/web/diary/scripta/src/components/Index.vue","mtime":1614944039000},{"path":"/Users/stavros/Documents/web/diary/scripta/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/stavros/Documents/web/diary/scripta/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/stavros/Documents/web/diary/scripta/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/stavros/Documents/web/diary/scripta/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnRyaW0iOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgTm90ZSBmcm9tICcuL05vdGUnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0luZGV4JywKICBjb21wb25lbnRzOiB7CiAgICBOb3RlOiBOb3RlCiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgcmVjZW50Tm90ZXM6IFtdLAogICAgICBzZWxlY3RlZE5vdGU6IFtdLAogICAgICBvcGVuTm90ZTogZmFsc2UKICAgIH07CiAgfSwKICAvLyBwcm9wczpbXSwKICB3YXRjaDogewogICAgcmVjZW50Tm90ZXM6IGZ1bmN0aW9uIHJlY2VudE5vdGVzKG5ld1ZhbCkgewogICAgICB0aGlzLnJlY2VudE5vdGVzID0gbmV3VmFsOwogICAgfSAvLyAgZG9zc2llcjpmdW5jdGlvbihuZXdWYWwpewogICAgLy8gICAgICAgIHRoaXMuZG9zc2llcj1uZXdWYWw7ICAgCiAgICAvLyAgfSwKICAgIC8vICB0YWdzOmZ1bmN0aW9uKG5ld1ZhbCl7CiAgICAvLyAgICAgICAgICB0aGlzLm5ld190YWdzPW5ld1ZhbDsgICAgICAgICAgICAgICAgIAogICAgLy8gIH0sCgogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIC8vZ2V0ICAzIG1vc3QgcmVjZW50IG5vdGVzCiAgICB0aGlzLmdldFJlY2VudE5vdGVzKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBnZXRSZWNlbnROb3RlczogZnVuY3Rpb24gZ2V0UmVjZW50Tm90ZXMoKSB7CiAgICAgIHRoaXMucmVjZW50Tm90ZXMgPSBbXTsKICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAgICB2YXIgcmVxdWVzdCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpOwogICAgICByZXF1ZXN0Lm9wZW4oJ0dFVCcsICdodHRwOi8vbG9jYWxob3N0OjgwODAvYXBpL3JlY2VudC1ub3RlcycpOwogICAgICB2YXIgc2Vzc2lvbl9pZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdzZXNzaW9uX2lkJyk7CiAgICAgIHZhciB1c2VyX2lkID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXJfaWQnKTsKICAgICAgcmVxdWVzdC5zZXRSZXF1ZXN0SGVhZGVyKCdzZXNzaW9uX2lkJywgc2Vzc2lvbl9pZCk7CiAgICAgIHJlcXVlc3Quc2V0UmVxdWVzdEhlYWRlcigndXNlcl9pZCcsIHVzZXJfaWQpOyAvL3NlbmQgcmVxdWVzdAoKICAgICAgcmVxdWVzdC5zZW5kKCk7CgogICAgICByZXF1ZXN0Lm9ubG9hZCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICBpZiAodGhpcy5zdGF0dXMgPT0gMjAwKSB7CiAgICAgICAgICB2YXIgcmVzcG9uc2UgPSBKU09OLnBhcnNlKHRoaXMucmVzcG9uc2VUZXh0KTsKICAgICAgICAgIHNlbGYucmVjZW50Tm90ZXMgPSByZXNwb25zZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgYWxlcnQodGhpcy5yZXNwb25zZVRleHQpOwogICAgICAgIH0KICAgICAgfTsKICAgIH0sCiAgICBxdWVyeU5vdGU6IGZ1bmN0aW9uIHF1ZXJ5Tm90ZSgpIHsKICAgICAgdGhpcy5yZWNlbnROb3RlcyA9IFtdOwogICAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICAgIHZhciBxdWVyeV9pbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZWFyY2hiYXInKS52YWx1ZS50cmltKCk7CgogICAgICBpZiAocXVlcnlfaW5wdXQgIT0gJycpIHsKICAgICAgICB2YXIgcmVxdWVzdCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpOwogICAgICAgIHJlcXVlc3Qub3BlbignR0VUJywgJ2h0dHA6Ly9sb2NhbGhvc3Q6ODA4MC9hcGkvcXVlcnktbm90ZScpOwogICAgICAgIHZhciBzZXNzaW9uX2lkID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Nlc3Npb25faWQnKTsKICAgICAgICB2YXIgdXNlcl9pZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd1c2VyX2lkJyk7CiAgICAgICAgcmVxdWVzdC5zZXRSZXF1ZXN0SGVhZGVyKCdzZXNzaW9uX2lkJywgc2Vzc2lvbl9pZCk7CiAgICAgICAgcmVxdWVzdC5zZXRSZXF1ZXN0SGVhZGVyKCd1c2VyX2lkJywgdXNlcl9pZCk7CiAgICAgICAgcmVxdWVzdC5zZXRSZXF1ZXN0SGVhZGVyKCdxdWVyeV9pbnB1dCcsIHF1ZXJ5X2lucHV0KTsgLy9zZW5kIHJlcXVlc3QKCiAgICAgICAgcmVxdWVzdC5zZW5kKCk7CgogICAgICAgIHJlcXVlc3Qub25sb2FkID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgaWYgKHRoaXMuc3RhdHVzID09IDIwMCkgewogICAgICAgICAgICB2YXIgcmVzcG9uc2UgPSBKU09OLnBhcnNlKHRoaXMucmVzcG9uc2VUZXh0KTsKICAgICAgICAgICAgc2VsZi5yZWNlbnROb3RlcyA9IHJlc3BvbnNlOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgYWxlcnQodGhpcy5yZXNwb25zZVRleHQpOwogICAgICAgICAgfQogICAgICAgIH07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5nZXRSZWNlbnROb3RlcygpOwogICAgICB9CiAgICB9LAogICAgb05vdGU6IGZ1bmN0aW9uIG9Ob3RlKG5vdGUpIHsKICAgICAgdGhpcy5zZWxlY3RlZE5vdGVbMF0gPSB7CiAgICAgICAgbm90ZV9pZDogbm90ZS5ub3RlX2lkLAogICAgICAgIHRpdGxlOiBub3RlLnRpdGxlLAogICAgICAgIGJvZHk6IG5vdGUuYm9keSwKICAgICAgICBkYXRlOiBub3RlLmRhdGUsCiAgICAgICAgdGltZTogbm90ZS50aW1lLAogICAgICAgIGRvc3NpZXJfZms6IG5vdGUuZG9zc2llcl9maywKICAgICAgICB1c2VyX2ZrOiBub3RlLnVzZXJfZmsKICAgICAgfTsKICAgICAgdGhpcy5vcGVuTm90ZSA9IHRydWU7CiAgICB9LAogICAgZGVsZXRlTm90ZTogZnVuY3Rpb24gZGVsZXRlTm90ZShub3RlKSB7CiAgICAgIHZhciBzZWxmID0gdGhpczsKICAgICAgdmFyIGRlbCA9IGNvbmZpcm0oJ0FyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBkZWxldGUgdGhpcyBub3RlPycpOwoKICAgICAgaWYgKGRlbCA9PSB0cnVlKSB7CiAgICAgICAgdmFyIHJlcXVlc3QgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTsKICAgICAgICByZXF1ZXN0Lm9wZW4oJ0RFTEVURScsICdodHRwOi8vbG9jYWxob3N0OjgwODAvYXBpL25vdGUnKTsKICAgICAgICB2YXIgc2Vzc2lvbl9pZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdzZXNzaW9uX2lkJyk7CiAgICAgICAgdmFyIGRhdGEgPSBKU09OLnN0cmluZ2lmeSh7CiAgICAgICAgICBub3RlX2lkOiBub3RlLm5vdGVfaWQKICAgICAgICB9KTsKICAgICAgICByZXF1ZXN0LnNldFJlcXVlc3RIZWFkZXIoJ3Nlc3Npb25faWQnLCBzZXNzaW9uX2lkKTsgLy9zZW5kIHJlcXVlc3QKCiAgICAgICAgcmVxdWVzdC5zZW5kKGRhdGEpOwoKICAgICAgICByZXF1ZXN0Lm9ubG9hZCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGlmICh0aGlzLnN0YXR1cyA9PSAyMDApIHsKICAgICAgICAgICAgYWxlcnQodGhpcy5yZXNwb25zZVRleHQpOwogICAgICAgICAgICBzZWxmLmdldFJlY2VudE5vdGVzKCk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBhbGVydCh0aGlzLnJlc3BvbnNlVGV4dCk7CiAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgfQogICAgfSwKICAgIGJhY2tfbm90ZXM6IGZ1bmN0aW9uIGJhY2tfbm90ZXMoKSB7CiAgICAgIHRoaXMub3Blbk5vdGUgPSBmYWxzZTsKICAgICAgdGhpcy5nZXRSZWNlbnROb3RlcygpOwogICAgfQogIH0KfTs="},{"version":3,"sources":["Index.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n\n    \n        <main id=\"Index\" class=\"container\">\n            <transition name=\"fade\">\n                <div v-if=\"!openNote\">\n                    <div class=\"container\">\n            \n                        <div class=\"row\" id=\"searchbarContainer\">\n                            <input class=\"col-12\" type=\"text\" id=\"searchbar\" placeholder=\"title\" v-on:keyup='queryNote'>\n                        </div>\n                        \n                        <div v-if=\"this.recentNotes==''\" class=\"row\" id=\"lastNoteContainer\">\n                            <div class=\"col-12 systemMessage  top2\" id=\"lastNote\">\n                               No recent notes found\n                            </div>\n                        </div>      \n        \n                        <div v-if=\"this.recentNotes!=''\">\n                            <div class=\"col-12 top1  systemMessage\">Your recent notes</div>\n                            <div v-for=\"recentNote in this.recentNotes\" :key=\"recentNote.note_id\" class=\"row record full\">\n                                <button class=\"col\"><i class=\"fas fa-feather-alt results_label full left\"> <span class=\"left2\">{{recentNote.title}} </span></i></button>\n                                <button class=\"col-2\" v-on:click=\"oNote(recentNote)\">open</button>\n                                <button class=\"col-2\" v-on:click='deleteNote(recentNote)'><i class=\"far fa-trash-alt\"></i> </button>\n                               \n                            </div>\n                        </div>          \n                    </div>\n                </div>\n            </transition>\n\n            <transition name=\"fade\">\n                <Note v-if=\"openNote\"\n                      v-bind:noteData='selectedNote'\n                      v-on:back_notes='back_notes'   \n                \n                 />\n            </transition>\n\n        </main>\n    \n\n</template>\n\n\n<script>\n\nimport Note from './Note';\nexport default {\n    name:'Index',\n\n    components: {\n    Note\n  },\n\n    data:function(){\n        return{\n           recentNotes:[],\n           selectedNote:[],\n           openNote:false\n        }\n    },\n\n    // props:[],\n\n    watch:{\n         recentNotes:function(newVal){\n               this.recentNotes=newVal;  \n               \n               \n         }, \n        //  dossier:function(newVal){\n        //        this.dossier=newVal;   \n               \n        //  },\n        //  tags:function(newVal){\n        //          this.new_tags=newVal;                 \n        //  },\n        \n    },\n\n    mounted:function(){\n    //get  3 most recent notes\n    this.getRecentNotes();\n    },\n\n    methods:{        \n        getRecentNotes:function(){\n            this.recentNotes=[];\n            let self= this;\n             \n\n            let request= new XMLHttpRequest();            \n            request.open('GET','http://localhost:8080/api/recent-notes');        \n\n            let session_id=localStorage.getItem('session_id');\n            let user_id=localStorage.getItem('user_id');\n\n            request.setRequestHeader('session_id', session_id);               \n            request.setRequestHeader('user_id', user_id);               \n\n            //send request\n            request.send();  \n\n            request.onload=function(){\n                if(this.status==200){\n                    let response=JSON.parse(this.responseText);\n                    self.recentNotes=response;\n                } \n                else{\n                     alert(this.responseText);\n                }  \n            }  \n\n\n        },\n\n        queryNote:function(){\n            this.recentNotes=[];\n            let self= this;\n            let query_input=document.getElementById('searchbar').value.trim();\n            \n            if(query_input!=''){\n\n                let request= new XMLHttpRequest();            \n                request.open('GET','http://localhost:8080/api/query-note');        \n\n                let session_id=localStorage.getItem('session_id');\n                let user_id=localStorage.getItem('user_id');\n                \n\n\n                request.setRequestHeader('session_id', session_id);               \n                request.setRequestHeader('user_id', user_id);               \n                request.setRequestHeader('query_input', query_input);               \n                //send request\n                request.send();  \n\n                request.onload=function(){\n                    if(this.status==200){\n                        let response=JSON.parse(this.responseText);\n                        self.recentNotes=response;\n                    } \n                    else{\n                        alert(this.responseText);\n                    }  \n                }  \n\n            }\n            else{\n                this.getRecentNotes();\n            }\n\n            \n        },\n        oNote:function(note){\n\n            this.selectedNote[0]=({note_id:note.note_id,title:note.title,body:note.body,date:note.date,time:note.time,dossier_fk:note.dossier_fk,user_fk:note.user_fk});\n            this.openNote=true;\n        },\n        deleteNote:function(note){\n            let self=this;\n            let del = confirm('Are you sure you want to delete this note?');\n            if(del==true){\n                \n            let request= new XMLHttpRequest();            \n            request.open('DELETE','http://localhost:8080/api/note');        \n\n            let session_id=localStorage.getItem('session_id');            \n            let data=JSON.stringify({note_id:note.note_id});            \n            request.setRequestHeader('session_id', session_id);                                           \n            //send request\n            request.send(data);  \n\n            request.onload=function(){\n                if(this.status==200){\n                    alert(this.responseText);\n                    self.getRecentNotes();\n                } \n                else{\n                    alert(this.responseText);        \n                }  \n            }        \n\n\n\n            }\n            \n        },\n        back_notes:function(){\n            this.openNote=false;\n            this.getRecentNotes();\n        }\n\n    },\n}\n</script>\n\n\n<style>\n\n\n\n#searchbarContainer {\n                     margin-top: 2%;   \n                     justify-content: center;\n                     text-align: left;\n                    }\n\n#searchbar {\n            \n            border-radius: 20px;\n            border:solid lightgrey thin;\n            }\n\n\n\n\n\n\n</style>"],"sourceRoot":"src/components"}]}