{"remainingRequest":"/Users/stavros/Documents/web/diary/scripta/node_modules/babel-loader/lib/index.js!/Users/stavros/Documents/web/diary/scripta/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/stavros/Documents/web/diary/scripta/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/stavros/Documents/web/diary/scripta/src/components/Dossier.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/stavros/Documents/web/diary/scripta/src/components/Dossier.vue","mtime":1615236563462},{"path":"/Users/stavros/Documents/web/diary/scripta/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/stavros/Documents/web/diary/scripta/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/stavros/Documents/web/diary/scripta/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/stavros/Documents/web/diary/scripta/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IE5vdGVzIGZyb20gJy4vTm90ZXMnOwppbXBvcnQgRWRpdERvc3NpZXJOYW1lIGZyb20gJy4vRWRpdERvc3NpZXJOYW1lJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdEb3NzaWVyJywKICBjb21wb25lbnRzOiB7CiAgICBOb3RlczogTm90ZXMsCiAgICBFZGl0RG9zc2llck5hbWU6IEVkaXREb3NzaWVyTmFtZQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGRvc3NpZXJzOiBbXSwKICAgICAgaGFzRG9zc2llcjogdHJ1ZSwKICAgICAgb3Blbk5vdGVzOiBmYWxzZSwKICAgICAgZWRpdE5hbWU6IGZhbHNlLAogICAgICBzZWxlY3RlZERvc3NpZXI6IFtdCiAgICB9OwogIH0sCiAgd2F0Y2g6IHsKICAgIGRvc3NpZXJzOiBmdW5jdGlvbiBkb3NzaWVycyhuZXdWYWwpIHsKICAgICAgdGhpcy5kb3NzaWVycyA9IG5ld1ZhbDsKICAgIH0gLy8gIGRvc3NpZXI6ZnVuY3Rpb24obmV3VmFsKXsKICAgIC8vICAgICAgICB0aGlzLmRvc3NpZXI9bmV3VmFsOyAgIAogICAgLy8gIH0sCiAgICAvLyAgdGFnczpmdW5jdGlvbihuZXdWYWwpewogICAgLy8gICAgICAgICAgdGhpcy5uZXdfdGFncz1uZXdWYWw7ICAgICAgICAgICAgICAgICAKICAgIC8vICB9LAoKICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB0aGlzLmdldERvc3NpZXJzKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBnZXREb3NzaWVyczogZnVuY3Rpb24gZ2V0RG9zc2llcnMoKSB7CiAgICAgIHRoaXMuZG9zc2llcnMgPSBbXTsKICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAgICB2YXIgcmVxdWVzdCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpOwogICAgICByZXF1ZXN0Lm9wZW4oJ0dFVCcsICcvYXBpL2dldC1kb3NzaWVycy1pbmZvJyk7CiAgICAgIHZhciBzZXNzaW9uX2lkID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Nlc3Npb25faWQnKTsKICAgICAgdmFyIHVzZXJfaWQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndXNlcl9pZCcpOwogICAgICByZXF1ZXN0LnNldFJlcXVlc3RIZWFkZXIoJ3Nlc3Npb25faWQnLCBzZXNzaW9uX2lkKTsKICAgICAgcmVxdWVzdC5zZXRSZXF1ZXN0SGVhZGVyKCd1c2VyX2lkJywgdXNlcl9pZCk7IC8vc2VuZCByZXF1ZXN0CgogICAgICByZXF1ZXN0LnNlbmQoKTsKCiAgICAgIHJlcXVlc3Qub25sb2FkID0gZnVuY3Rpb24gKCkgewogICAgICAgIGlmICh0aGlzLnN0YXR1cyA9PSAyMDApIHsKICAgICAgICAgIGlmICh0aGlzLnJlc3BvbnNlVGV4dCAhPSAnJykgewogICAgICAgICAgICBzZWxmLmhhc0Rvc3NpZXIgPSB0cnVlOwogICAgICAgICAgICB2YXIgcmVzcG9uc2UgPSBKU09OLnBhcnNlKHRoaXMucmVzcG9uc2VUZXh0KTsKICAgICAgICAgICAgcmVzcG9uc2UuZm9yRWFjaChmdW5jdGlvbiAocikgewogICAgICAgICAgICAgIHNlbGYuZG9zc2llcnMucHVzaChyKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMucmVzcG9uc2VUZXh0KTsKICAgICAgICB9CiAgICAgIH07CiAgICB9LAogICAgc2hvd05vdGVzOiBmdW5jdGlvbiBzaG93Tm90ZXMoZG9zc2llcl9maywgZG9zc2llcl9uYW1lKSB7CiAgICAgIHRoaXMuc2VsZWN0ZWREb3NzaWVyID0gewogICAgICAgIGRvc3NpZXJfZms6IGRvc3NpZXJfZmssCiAgICAgICAgZG9zc2llcl9uYW1lOiBkb3NzaWVyX25hbWUKICAgICAgfTsKICAgICAgdGhpcy5vcGVuTm90ZXMgPSB0cnVlOwogICAgfSwKICAgIGVkaXROYW1lT246IGZ1bmN0aW9uIGVkaXROYW1lT24oZG9zc2llcl9pZCwgZG9zc2llcl9uYW1lKSB7CiAgICAgIHRoaXMuc2VsZWN0ZWREb3NzaWVyID0gewogICAgICAgIGRvc3NpZXJfZms6IGRvc3NpZXJfaWQsCiAgICAgICAgZG9zc2llcl9uYW1lOiBkb3NzaWVyX25hbWUKICAgICAgfTsKICAgICAgdGhpcy5lZGl0TmFtZSA9IHRydWU7CiAgICAgIGNvbnNvbGUubG9nKGRvc3NpZXJfaWQgKyBkb3NzaWVyX25hbWUpOwogICAgfSwKICAgIGJhY2tfZG9zc2llcnM6IGZ1bmN0aW9uIGJhY2tfZG9zc2llcnMoKSB7CiAgICAgIHRoaXMub3Blbk5vdGVzID0gZmFsc2U7CiAgICAgIHRoaXMuZG9zc2llcnMgPSBbXTsKICAgICAgdGhpcy5nZXREb3NzaWVycygpOwogICAgfSwKICAgIGJhY2tfZG9zc2llcnMyOiBmdW5jdGlvbiBiYWNrX2Rvc3NpZXJzMigpIHsKICAgICAgdGhpcy5lZGl0TmFtZSA9IGZhbHNlOwogICAgICB0aGlzLmRvc3NpZXJzID0gW107CiAgICAgIHRoaXMuZ2V0RG9zc2llcnMoKTsKICAgIH0sCiAgICBkZWxldGVEb3NzaWVyOiBmdW5jdGlvbiBkZWxldGVEb3NzaWVyKGRvc3NpZXJfaWQsIGRvc3NpZXJfbmFtZSkgewogICAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICAgIHZhciBkZWwgPSBjb25maXJtKCJBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gZGVsZXRlICIuY29uY2F0KGRvc3NpZXJfbmFtZSwgIiBhbmQgYWxsIHRoZSBub3RlcyBpbmNsdWRlZCBpbiBpdD8iKSk7CgogICAgICBpZiAoZGVsID09IHRydWUpIHsKICAgICAgICAvL3NlbmQgZGVsZXRlIHJlcXVlc3QKICAgICAgICB2YXIgc2Vzc2lvbl9pZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdzZXNzaW9uX2lkJyk7CiAgICAgICAgdmFyIHJlcXVlc3QgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTsKICAgICAgICByZXF1ZXN0Lm9wZW4oJ0RFTEVURScsICdodHRwczovL3NjcmlwdGEtYXBwLmhlcm9rdWFwcC5jb20vYXBpL2Rvc3NpZXInKTsKICAgICAgICByZXF1ZXN0LnNldFJlcXVlc3RIZWFkZXIoJ3Nlc3Npb25faWQnLCBzZXNzaW9uX2lkKTsKICAgICAgICB2YXIgZGF0YSA9IEpTT04uc3RyaW5naWZ5KHsKICAgICAgICAgIGRvc3NpZXJfZms6IGRvc3NpZXJfaWQKICAgICAgICB9KTsKICAgICAgICByZXF1ZXN0LnNlbmQoZGF0YSk7CgogICAgICAgIHJlcXVlc3Qub25sb2FkID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgaWYgKHRoaXMuc3RhdHVzID09IDIwMCkgewogICAgICAgICAgICAvL3JlcXVlc3QgaXMgdmFsaWQKICAgICAgICAgICAgYWxlcnQodGhpcy5yZXNwb25zZVRleHQpOwogICAgICAgICAgICBzZWxmLmdldERvc3NpZXJzKCk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBhbGVydCh0aGlzLnJlc3BvbnNlVGV4dCk7CiAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgfQogICAgfQogIH0KfTs="},{"version":3,"sources":["Dossier.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n\n    <main id=\"Dossier\" class=\"container\">\n        <transition name=\"fade\">\n            <div v-if=\"!openNotes && !editName\">\n                <div class=\"row justify-centre systemMessage\" v-if=\"!hasDossier\">You have no recent dossiers</div>\n                <div v-if=\"hasDossier\" >\n                    \n                    <div class=\"row results_row\" v-for=\"dossier in dossiers\" :key=\"dossier\">\n    \n                        <div class=\"col-1\">\n                            <i class=\"fas fa-folder full right results_label\"> </i>                        \n                        </div>\n    \n                        <div class=\"col-3 results_label\">\n                            {{dossier.dossier_name}}                       \n                        </div>\n    \n                        <div class=\"col-2\">\n                            <i class=\"fas fa-feather-alt results_label full left\"> {{dossier.count}} </i>                          \n                        </div>\n    \n                        <button class=\"col\" v-on:click='showNotes(dossier.dossier_id,dossier.dossier_name)'>open</button>\n                        <button class=\"col\" v-on:click='editNameOn(dossier.dossier_id,dossier.dossier_name)' ><i class=\"far fa-edit\"></i></button>\n                        <button class=\"col\" v-on:click='deleteDossier(dossier.dossier_id,dossier.dossier_name)'><i class=\"far fa-trash-alt\"></i> </button>\n                        \n                          \n                    </div>\n                </div>\n            </div>\n        </transition>\n            \n        <transition name=\"fade\">\n            <Notes  v-if=\"openNotes\" v-on:back_dossiers='back_dossiers' v-bind:dossier='selectedDossier' \n                   \n             />\n        </transition>\n\n        <transition name=\"down\">\n            <EditDossierName\n             v-if='editName'\n             v-on:backDossier='back_dossiers2'\n             v-bind:dossier='selectedDossier'\n            />\n        </transition>\n\n\n    </main>    \n\n</template>\n\n<script>\nimport Notes from './Notes';\nimport EditDossierName from './EditDossierName';\nexport default {\n    name:'Dossier',\n\n    components: {\n    Notes,EditDossierName\n    },\n\n    data:function(){\n        return{\n           dossiers:[],\n           hasDossier:true,\n           openNotes:false,\n           editName:false,\n           selectedDossier:[]\n           \n        }\n    },\n\n     watch:{\n         dossiers:function(newVal){\n               this.dossiers=newVal;                                \n               \n         }, \n        //  dossier:function(newVal){\n        //        this.dossier=newVal;   \n               \n        //  },\n        //  tags:function(newVal){\n        //          this.new_tags=newVal;                 \n        //  },\n        \n    },\n\n    mounted:function(){\n\n        this.getDossiers();\n        \n    },\n\n    methods:{\n\n        getDossiers:function(){\n            this.dossiers=[];\n            let self=this;\n            let request= new XMLHttpRequest();            \n            request.open('GET','/api/get-dossiers-info');\n            let session_id=localStorage.getItem('session_id');\n            let user_id=localStorage.getItem('user_id');\n            request.setRequestHeader('session_id', session_id);               \n            request.setRequestHeader('user_id', user_id);               \n            //send request\n            request.send();  \n            request.onload=function(){\n                if(this.status==200){\n                    if(this.responseText!=''){\n                        \n                        self.hasDossier=true;\n                        let response = JSON.parse(this.responseText);\n                        response.forEach(r => {\n                            self.dossiers.push(r);                           \n                        });\n                    }\n\n                } \n                else{\n                    console.log(this.responseText);\n                }  \n            }  \n        },\n       \n       showNotes:function(dossier_fk,dossier_name){\n           \n           this.selectedDossier=({dossier_fk:dossier_fk,dossier_name:dossier_name});\n           \n           this.openNotes=true;\n       },\n\n       editNameOn:function(dossier_id,dossier_name){\n           this.selectedDossier=({dossier_fk:dossier_id,dossier_name:dossier_name})\n           this.editName=true;\n           console.log(dossier_id + dossier_name);\n       },\n\n       back_dossiers:function(){\n           \n           this.openNotes=false;\n           this.dossiers=[];\n            this.getDossiers();\n            \n       },\n       back_dossiers2:function(){           \n           this.editName=false;\n           this.dossiers=[];\n           this.getDossiers();            \n       },\n\n\n       deleteDossier:function(dossier_id,dossier_name){\n           let self=this;\n           let del=confirm(`Are you sure you want to delete ${dossier_name} and all the notes included in it?`);\n           \n           if(del==true){\n\n              //send delete request\n              let session_id=localStorage.getItem('session_id');               \n              let request=new XMLHttpRequest();                \n              request.open('DELETE','https://scripta-app.herokuapp.com/api/dossier');\n              request.setRequestHeader('session_id', session_id);\n              let data=JSON.stringify({dossier_fk:dossier_id});\n              request.send(data);                  \n\n              request.onload = function (){        \n                if(this.status==200){ //request is valid\n                    alert(this.responseText);\n                    self.getDossiers();\n                }\n                else{                        \n                    alert(this.responseText);\n                }                    \n             };\n           }\n           \n\n       },\n      \n\n    },\n}\n</script>\n\n\n<style>\n   .dossier_row{\n       border: solid darkcyan thin;    \n    }\n</style>"],"sourceRoot":"src/components"}]}