{"remainingRequest":"/Users/stavros/Documents/web/diary/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/stavros/Documents/web/diary/node_modules/vue-functional-calendar/src/components/FunctionalCalendar.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/stavros/Documents/web/diary/node_modules/vue-functional-calendar/src/components/FunctionalCalendar.vue","mtime":499162500000},{"path":"/Users/stavros/Documents/web/diary/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/stavros/Documents/web/diary/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/stavros/Documents/web/diary/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/stavros/Documents/web/diary/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgaGVscENhbGVuZGFyQ2xhc3MgZnJvbSAnLi4vYXNzZXRzL2pzL2hlbHBDYWxlbmRhcicNCmltcG9ydCB7IHByb3BzQW5kRGF0YSB9IGZyb20gJy4uL21peGlucy9wcm9wc0FuZERhdGEnDQppbXBvcnQgVGltZVBpY2tlciBmcm9tICcuLi9jb21wb25lbnRzL1RpbWVQaWNrZXInDQppbXBvcnQgQXJyb3dzIGZyb20gJy4uL2NvbXBvbmVudHMvQXJyb3dzJw0KaW1wb3J0IFdlZWtOdW1iZXJzIGZyb20gJy4uL2NvbXBvbmVudHMvV2Vla051bWJlcnMnDQppbXBvcnQgRGF5IGZyb20gJy4uL2NvbXBvbmVudHMvRGF5Jw0KaW1wb3J0IE1vbnRoWWVhclBpY2tlciBmcm9tICcuLi9jb21wb25lbnRzL01vbnRoWWVhclBpY2tlcicNCmltcG9ydCBQaWNrZXJJbnB1dHMgZnJvbSAnLi4vY29tcG9uZW50cy9QaWNrZXJJbnB1dHMnDQppbXBvcnQgRm9vdGVyIGZyb20gJy4uL2NvbXBvbmVudHMvRm9vdGVyJw0KDQppbXBvcnQgeyBoRWxDb250YWlucywgaFVuaXF1ZUlEIH0gZnJvbSAnLi4vdXRpbHMvaGVscGVycycNCi8vIGltcG9ydCBjYWxlbmRhck1ldGhvZHMgZnJvbSAnLi4vdXRpbHMvY2FsZW5kYXJNZXRob2RzJw0KDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICdGdW5jdGlvbmFsQ2FsZW5kYXInLA0KICBjb21wb25lbnRzOiB7DQogICAgTW9udGhZZWFyUGlja2VyLA0KICAgIFRpbWVQaWNrZXIsDQogICAgUGlja2VySW5wdXRzLA0KICAgIEFycm93cywNCiAgICBGb290ZXIsDQogICAgRGF5LA0KICAgIFdlZWtOdW1iZXJzDQogIH0sDQogIG1peGluczogW3Byb3BzQW5kRGF0YV0sDQogIGNvbXB1dGVkOiB7DQogICAgc3RhcnRETVkoKSB7DQogICAgICAvL3N0YXJ0IG9ubHkgd2l0aCBEYXkgTW9udGggYW5kIFllYXINCiAgICAgIGlmICh0aGlzLmNhbGVuZGFyLmRhdGVSYW5nZS5zdGFydCkgew0KICAgICAgICByZXR1cm4gdGhpcy5jYWxlbmRhci5kYXRlUmFuZ2Uuc3RhcnQuc3BsaXQoJyAnKVswXQ0KICAgICAgfQ0KICAgICAgcmV0dXJuICcnDQogICAgfSwNCiAgICBlbmRETVkoKSB7DQogICAgICAvL2VuZCBvbmx5IHdpdGggRGF5IE1vbnRoIGFuZCBZZWFyDQogICAgICBpZiAodGhpcy5jYWxlbmRhci5kYXRlUmFuZ2UuZW5kKSB7DQogICAgICAgIHJldHVybiB0aGlzLmNhbGVuZGFyLmRhdGVSYW5nZS5lbmQuc3BsaXQoJyAnKVswXQ0KICAgICAgfQ0KICAgICAgcmV0dXJuICcnDQogICAgfSwNCiAgICByYW5nZUlzU2VsZWN0ZWQoKSB7DQogICAgICBpZiAoIXRoaXMuaXNNdWx0aXBsZURhdGVSYW5nZSkNCiAgICAgICAgcmV0dXJuICEhKHRoaXMuY2FsZW5kYXIuZGF0ZVJhbmdlLmVuZCAmJiB0aGlzLmNhbGVuZGFyLmRhdGVSYW5nZS5zdGFydCkNCiAgICAgIHJldHVybiB0aGlzLmNhbGVuZGFyLm11bHRpcGxlRGF0ZVJhbmdlLmxlbmd0aCA+IDANCiAgICB9LA0KICAgIGhlbHBDYWxlbmRhcigpIHsNCiAgICAgIHJldHVybiBuZXcgaGVscENhbGVuZGFyQ2xhc3MoDQogICAgICAgIHRoaXMuZkNvbmZpZ3Muc3VuZGF5U3RhcnQsDQogICAgICAgIHRoaXMuY2hlY2tIaWRkZW5FbGVtZW50KCdsZWZ0QW5kUmlnaHREYXlzJyksDQogICAgICAgIHRoaXMuZkNvbmZpZ3MuZGF0ZUZvcm1hdCwNCiAgICAgICAgdGhpcy5mQ29uZmlncy5kYXlOYW1lcw0KICAgICAgKQ0KICAgIH0sDQogICAgc2luZ2xlU2VsZWN0ZWREYXRlOiB7DQogICAgICBnZXQoKSB7DQogICAgICAgIGxldCByZXMgPSAnJw0KICAgICAgICBpZiAodGhpcy5kaXNwbGF5VGltZUlucHV0KSB7DQogICAgICAgICAgY29uc3QgdmFsaWRGb3JtYXRzID0gWw0KICAgICAgICAgICAgJ0hIOk1NJywNCiAgICAgICAgICAgICdISDptbScsDQogICAgICAgICAgICAnaGg6TU0nLA0KICAgICAgICAgICAgJ2hoOm1tJywNCiAgICAgICAgICAgICdNTTpISCcsDQogICAgICAgICAgICAnbW06SEgnLA0KICAgICAgICAgICAgJ01NOmhoJywNCiAgICAgICAgICAgICdtbTpoaCcNCiAgICAgICAgICBdDQogICAgICAgICAgbGV0IGZvcm1hdCA9IHRoaXMuZkNvbmZpZ3MuZGF0ZUZvcm1hdA0KICAgICAgICAgIGlmICh0aGlzLmRhdGVGb3JtYXQpIHsNCiAgICAgICAgICAgIGZvcm1hdCA9IHRoaXMuZGF0ZUZvcm1hdA0KICAgICAgICAgIH0NCiAgICAgICAgICBpZiAodmFsaWRGb3JtYXRzLmluZGV4T2YoZm9ybWF0LnNwbGl0KCcgJylbMV0pID4gMykgew0KICAgICAgICAgICAgcmVzICs9DQogICAgICAgICAgICAgICcgJyArDQogICAgICAgICAgICAgIFt0aGlzLmNhbGVuZGFyLnNlbGVjdGVkSG91ciwgdGhpcy5jYWxlbmRhci5zZWxlY3RlZE1pbnV0ZV0NCiAgICAgICAgICAgICAgICAucmV2ZXJzZSgpDQogICAgICAgICAgICAgICAgLmpvaW4oJzonKQ0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICByZXMgKz0NCiAgICAgICAgICAgICAgJyAnICsNCiAgICAgICAgICAgICAgW3RoaXMuY2FsZW5kYXIuc2VsZWN0ZWRIb3VyLCB0aGlzLmNhbGVuZGFyLnNlbGVjdGVkTWludXRlXS5qb2luKA0KICAgICAgICAgICAgICAgICc6Jw0KICAgICAgICAgICAgICApDQogICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgcmV0dXJuIHRoaXMuY2FsZW5kYXIuc2VsZWN0ZWREYXRlDQogICAgICAgICAgPyB0aGlzLmNhbGVuZGFyLnNlbGVjdGVkRGF0ZSArIHJlcw0KICAgICAgICAgIDogJycNCiAgICAgIH0sDQogICAgICBzZXQobmV3VmFsdWUpIHsNCiAgICAgICAgbmV3VmFsdWUgPSB0aGlzLmhlbHBDYWxlbmRhci5tYXNrKG5ld1ZhbHVlKQ0KICAgICAgICBpZiAodGhpcy5oZWxwQ2FsZW5kYXIuZ2V0RGF0ZUZyb21Gb3JtYXQobmV3VmFsdWUpLmdldE1vbnRoKCkpIHsNCiAgICAgICAgICB0aGlzLmNhbGVuZGFyLnNlbGVjdGVkRGF0ZSA9IG5ld1ZhbHVlDQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9DQogIH0sDQogIGNyZWF0ZWQoKSB7DQogICAgdGhpcy5zZXRDb25maWdzKCkNCiAgICB0aGlzLmluaXRDYWxlbmRhcigpDQogIH0sDQogIG1vdW50ZWQoKSB7DQogICAgLy9zaG93IHRpbWUgcGxhY2Vob2xkZXINCiAgICBpZiAodGhpcy5kaXNwbGF5VGltZUlucHV0KSB7DQogICAgICBjb25zdCB0aW1lRm9ybWF0ID0gdGhpcy5mQ29uZmlncy5wbGFjZWhvbGRlci5zcGxpdCgnICcpWzFdDQogICAgICBpZiAoIXRpbWVGb3JtYXQpIHsNCiAgICAgICAgdGhpcy5mQ29uZmlncy5wbGFjZWhvbGRlciArPSAnIGhoOm1tJw0KICAgICAgfQ0KICAgIH0NCg0KICAgIHRoaXMucG9wb3ZlckVsZW1lbnQgPSB0aGlzLiRyZWZzLnBvcG92ZXJFbGVtZW50DQogICAgLy8gRXZlbnQNCiAgICB0aGlzLnBvcG92ZXJFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzaW4nLCB0aGlzLm9uRm9jdXNJbikNCiAgICB0aGlzLnBvcG92ZXJFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3Vzb3V0JywgdGhpcy5vbkZvY3VzT3V0KQ0KICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuaGlkZU1vbnRoWWVhclBpY2tlciwgew0KICAgICAgY2FwdHVyZTogdHJ1ZQ0KICAgIH0pDQoNCiAgICAvLyBSZWFjdHMgdG8gZXh0ZXJuYWwgc2VsZWN0ZWQgZGF0ZXMNCiAgICB0aGlzLiR3YXRjaCgNCiAgICAgICd2YWx1ZScsDQogICAgICBmdW5jdGlvbih2YWx1ZSkgew0KICAgICAgICBpZiAoDQogICAgICAgICAgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJg0KICAgICAgICAgICh2YWx1ZS5oYXNPd25Qcm9wZXJ0eSgnZGF0ZVJhbmdlJykgfHwNCiAgICAgICAgICAgIHZhbHVlLmhhc093blByb3BlcnR5KCdzZWxlY3RlZERhdGUnKSkNCiAgICAgICAgKSB7DQogICAgICAgICAgdGhpcy5jYWxlbmRhciA9IHZhbHVlDQogICAgICAgIH0gZWxzZSBpZiAoDQogICAgICAgICAgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJg0KICAgICAgICAgIHZhbHVlLmhhc093blByb3BlcnR5KCdtdWx0aXBsZURhdGVSYW5nZScpDQogICAgICAgICkgew0KICAgICAgICAgIHRoaXMuY2FsZW5kYXIubXVsdGlwbGVEYXRlUmFuZ2UgPSB2YWx1ZS5tdWx0aXBsZURhdGVSYW5nZQ0KICAgICAgICAgIGNvbnN0IGxhc3RFbGVtZW50ID0gdGhpcy5jYWxlbmRhci5tdWx0aXBsZURhdGVSYW5nZVsNCiAgICAgICAgICAgIE1hdGgubWF4KDAsIHRoaXMuY2FsZW5kYXIubXVsdGlwbGVEYXRlUmFuZ2UubGVuZ3RoIC0gMSkNCiAgICAgICAgICBdDQogICAgICAgICAgaWYgKA0KICAgICAgICAgICAgbGFzdEVsZW1lbnQgJiYNCiAgICAgICAgICAgICgobGFzdEVsZW1lbnQuc3RhcnQgJiYgIWxhc3RFbGVtZW50LmVuZCkgfHwNCiAgICAgICAgICAgICAgKCFsYXN0RWxlbWVudC5zdGFydCAmJiBsYXN0RWxlbWVudC5lbmQpKQ0KICAgICAgICAgICkgew0KICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIERhdGEgUmFuZ2UnKQ0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfSwNCiAgICAgIHsgaW1tZWRpYXRlOiB0cnVlLCBkZWVwOiB0cnVlIH0NCiAgICApDQoNCiAgICB0aGlzLiR3YXRjaCgNCiAgICAgICdzaG93Q2FsZW5kYXInLA0KICAgICAgZnVuY3Rpb24odmFsdWUpIHsNCiAgICAgICAgaWYgKHZhbHVlKSB0aGlzLiRlbWl0KCdvcGVuZWQnKQ0KICAgICAgICBlbHNlIHRoaXMuJGVtaXQoJ2Nsb3NlZCcpDQogICAgICB9LA0KICAgICAgeyBpbW1lZGlhdGU6IHRydWUsIGRlZXA6IHRydWUgfQ0KICAgICkNCiAgfSwNCiAgYmVmb3JlRGVzdHJveTogZnVuY3Rpb24oKSB7DQogICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2ZvY3VzaW4nLCB0aGlzLm9uRm9jdXNJbikNCiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignZm9jdXNvdXQnLCB0aGlzLm9uRm9jdXNPdXQpDQogICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5oaWRlTW9udGhZZWFyUGlja2VyKQ0KICB9LA0KICB3YXRjaDogew0KICAgIGZDb25maWdzOiB7DQogICAgICBoYW5kbGVyKCkgew0KICAgICAgICB0aGlzLm1hcmtDaG9vc2VEYXlzKCkNCiAgICAgIH0sDQogICAgICBkZWVwOiB0cnVlLA0KICAgICAgaW1tZWRpYXRlOiB0cnVlDQogICAgfSwNCiAgICBjYWxlbmRhcjogew0KICAgICAgaGFuZGxlcigpIHsNCiAgICAgICAgdGhpcy5tYXJrQ2hvb3NlRGF5cygpDQogICAgICB9LA0KICAgICAgZGVlcDogdHJ1ZSwNCiAgICAgIGltbWVkaWF0ZTogdHJ1ZQ0KICAgIH0sDQogICAgJ2NhbGVuZGFyLmN1cnJlbnREYXRlJzogew0KICAgICAgaGFuZGxlcih2YWx1ZSkgew0KICAgICAgICB0aGlzLiRlbWl0KCdpbnB1dCcsIHRoaXMuY2FsZW5kYXIpDQogICAgICAgIHRoaXMuY2hlY2tMaW1pdHModmFsdWUpDQogICAgICB9DQogICAgfQ0KICB9LA0KICBtZXRob2RzOiB7DQogICAgaW5pdENhbGVuZGFyKCkgew0KICAgICAgdGhpcy5zZXRDYWxlbmRhckRhdGEoKQ0KICAgICAgdGhpcy5saXN0UmVuZGVyaW5nKCkNCiAgICAgIHRoaXMubWFya0Nob29zZURheXMoKQ0KICAgICAgdGhpcy5jaGVja0xpbWl0cyh0aGlzLmNhbGVuZGFyLmN1cnJlbnREYXRlKQ0KICAgIH0sDQogICAgdXBkYXRlQ2FsZW5kYXIoKSB7DQogICAgICB0aGlzLnNldEV4aXN0aW5nQ2FsZW5kYXJEYXRhKCkNCiAgICAgIHRoaXMubGlzdFJlbmRlcmluZygpDQogICAgICB0aGlzLm1hcmtDaG9vc2VEYXlzKCkNCiAgICB9LA0KICAgIGlzTm90U2VwYXJhdGVseUFuZEZpcnN0KGtleSkgew0KICAgICAgcmV0dXJuIHRoaXMuaXNTZXBhcmF0ZWx5IHx8IGtleSA9PSAwDQogICAgfSwNCiAgICBzZXRDYWxlbmRhckRhdGEoKSB7DQogICAgICBsZXQgZGF0ZSA9IHRoaXMuY2FsZW5kYXIuY3VycmVudERhdGUNCiAgICAgIGRhdGUgPSBuZXcgRGF0ZShkYXRlLmdldEZ1bGxZZWFyKCksIGRhdGUuZ2V0TW9udGgoKSAtIDEpDQoNCiAgICAgIHRoaXMubGlzdENhbGVuZGFycyA9IFtdDQoNCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5mQ29uZmlncy5jYWxlbmRhcnNDb3VudDsgaSsrKSB7DQogICAgICAgIGRhdGUgPSBuZXcgRGF0ZShkYXRlLmdldEZ1bGxZZWFyKCksIGRhdGUuZ2V0TW9udGgoKSArIDEpDQoNCiAgICAgICAgbGV0IGNhbGVuZGFyID0gew0KICAgICAgICAgIGtleTogaSArIGhVbmlxdWVJRCgpLA0KICAgICAgICAgIGRhdGU6IGRhdGUsDQogICAgICAgICAgZGF0ZVRvcDogYCR7DQogICAgICAgICAgICB0aGlzLmZDb25maWdzLm1vbnRoTmFtZXNbZGF0ZS5nZXRNb250aCgpXQ0KICAgICAgICAgIH0gJHtkYXRlLmdldEZ1bGxZZWFyKCl9YCwNCiAgICAgICAgICBtb250aDogdGhpcy5mQ29uZmlncy5tb250aE5hbWVzW2RhdGUuZ2V0TW9udGgoKV0sDQogICAgICAgICAgeWVhcjogZGF0ZS5nZXRGdWxsWWVhcigpLA0KICAgICAgICAgIHdlZWtzOiB0aGlzLmhlbHBDYWxlbmRhci5nZXRGaW5hbGl6ZWRXZWVrcygNCiAgICAgICAgICAgIGRhdGUuZ2V0TW9udGgoKSwNCiAgICAgICAgICAgIGRhdGUuZ2V0RnVsbFllYXIoKQ0KICAgICAgICAgICkNCiAgICAgICAgfQ0KDQogICAgICAgIHRoaXMubGlzdENhbGVuZGFycy5wdXNoKGNhbGVuZGFyKQ0KDQogICAgICAgIGlmICghdGhpcy5mQ29uZmlncy5pc011bHRpcGxlKSB7DQogICAgICAgICAgYnJlYWsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0sDQogICAgc2V0RXhpc3RpbmdDYWxlbmRhckRhdGEoKSB7DQogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubGlzdENhbGVuZGFycy5sZW5ndGg7IGkrKykgew0KICAgICAgICBsZXQgY2FsZW5kYXIgPSB0aGlzLmxpc3RDYWxlbmRhcnNbaV0NCiAgICAgICAgbGV0IGRhdGUgPSBjYWxlbmRhci5kYXRlDQoNCiAgICAgICAgdGhpcy4kc2V0KHRoaXMubGlzdENhbGVuZGFycywgaSwgew0KICAgICAgICAgIGtleTogY2FsZW5kYXIua2V5LA0KICAgICAgICAgIGRhdGU6IGRhdGUsDQogICAgICAgICAgZGF0ZVRvcDogYCR7DQogICAgICAgICAgICB0aGlzLmZDb25maWdzLm1vbnRoTmFtZXNbZGF0ZS5nZXRNb250aCgpXQ0KICAgICAgICAgIH0gJHtkYXRlLmdldEZ1bGxZZWFyKCl9YCwNCiAgICAgICAgICBtb250aDogdGhpcy5mQ29uZmlncy5tb250aE5hbWVzW2RhdGUuZ2V0TW9udGgoKV0sDQogICAgICAgICAgeWVhcjogZGF0ZS5nZXRGdWxsWWVhcigpLA0KICAgICAgICAgIHdlZWtzOiB0aGlzLmhlbHBDYWxlbmRhci5nZXRGaW5hbGl6ZWRXZWVrcygNCiAgICAgICAgICAgIGRhdGUuZ2V0TW9udGgoKSwNCiAgICAgICAgICAgIGRhdGUuZ2V0RnVsbFllYXIoKQ0KICAgICAgICAgICkNCiAgICAgICAgfSkNCg0KICAgICAgICBpZiAoIXRoaXMuZkNvbmZpZ3MuaXNNdWx0aXBsZSkgew0KICAgICAgICAgIGJyZWFrDQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9LA0KICAgIHNldENvbmZpZ3MoKSB7DQogICAgICBsZXQgZ2xvYmFsT3B0aW9ucw0KICAgICAgaWYgKHR5cGVvZiB0aGlzLiRnZXRPcHRpb25zICE9PSAndW5kZWZpbmVkJykgew0KICAgICAgICAvLyBHbG9iYWwgT3B0aW9ucw0KICAgICAgICBnbG9iYWxPcHRpb25zID0gdGhpcy4kZ2V0T3B0aW9ucygpDQogICAgICAgIE9iamVjdC5rZXlzKGdsb2JhbE9wdGlvbnMpLmZvckVhY2gob2JqZWN0S2V5ID0+IHsNCiAgICAgICAgICBpZiAodHlwZW9mIHRoaXMuZkNvbmZpZ3Nbb2JqZWN0S2V5XSAhPT0gJ3VuZGVmaW5lZCcpIHsNCiAgICAgICAgICAgIHRoaXMuJHNldCh0aGlzLmZDb25maWdzLCBvYmplY3RLZXksIGdsb2JhbE9wdGlvbnNbb2JqZWN0S2V5XSkNCiAgICAgICAgICB9DQogICAgICAgIH0pDQogICAgICB9DQoNCiAgICAgIGlmICh0eXBlb2YgdGhpcy5jb25maWdzICE9PSAndW5kZWZpbmVkJykgew0KICAgICAgICBPYmplY3Qua2V5cyh0aGlzLmZDb25maWdzKS5mb3JFYWNoKG9iamVjdEtleSA9PiB7DQogICAgICAgICAgaWYgKHR5cGVvZiB0aGlzLmNvbmZpZ3Nbb2JqZWN0S2V5XSAhPT0gJ3VuZGVmaW5lZCcpIHsNCiAgICAgICAgICAgIC8vIEdldCBGcm9tIENvbmZpZ3MNCiAgICAgICAgICAgIHRoaXMuJHNldCh0aGlzLmZDb25maWdzLCBvYmplY3RLZXksIHRoaXMuY29uZmlnc1tvYmplY3RLZXldKQ0KICAgICAgICAgIH0NCiAgICAgICAgfSkNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIE9iamVjdC5rZXlzKHRoaXMuJHByb3BzKS5mb3JFYWNoKG9iamVjdEtleSA9PiB7DQogICAgICAgICAgaWYgKA0KICAgICAgICAgICAgdHlwZW9mIHRoaXMuZkNvbmZpZ3Nbb2JqZWN0S2V5XSAhPT0gJ3VuZGVmaW5lZCcgJiYNCiAgICAgICAgICAgIHR5cGVvZiB0aGlzLiRwcm9wc1tvYmplY3RLZXldICE9PSAndW5kZWZpbmVkJw0KICAgICAgICAgICkgew0KICAgICAgICAgICAgdGhpcy4kc2V0KHRoaXMuZkNvbmZpZ3MsIG9iamVjdEtleSwgdGhpcy4kcHJvcHNbb2JqZWN0S2V5XSkNCiAgICAgICAgICB9DQogICAgICAgIH0pDQogICAgICB9DQoNCiAgICAgIC8vIElzIE1vZGFsDQogICAgICBpZiAodGhpcy5mQ29uZmlncy5pc01vZGFsKSB0aGlzLnNob3dDYWxlbmRhciA9IGZhbHNlDQoNCiAgICAgIC8vIFBsYWNlaG9sZGVyDQogICAgICBpZiAoIXRoaXMuZkNvbmZpZ3MucGxhY2Vob2xkZXIpDQogICAgICAgIHRoaXMuZkNvbmZpZ3MucGxhY2Vob2xkZXIgPSB0aGlzLmZDb25maWdzLmRhdGVGb3JtYXQNCg0KICAgICAgaWYgKHR5cGVvZiB0aGlzLm5ld0N1cnJlbnREYXRlICE9PSAndW5kZWZpbmVkJykgew0KICAgICAgICB0aGlzLmNhbGVuZGFyLmN1cnJlbnREYXRlID0gdGhpcy5uZXdDdXJyZW50RGF0ZQ0KICAgICAgfQ0KDQogICAgICAvLyBTdW5kYXkgU3RhcnQNCiAgICAgIGlmICh0aGlzLmZDb25maWdzLnN1bmRheVN0YXJ0KSB7DQogICAgICAgIGxldCBkYXlOYW1lcyA9IFsuLi50aGlzLmZDb25maWdzLmRheU5hbWVzXQ0KICAgICAgICBsZXQgc3VuZGF5TmFtZSA9IGRheU5hbWVzW2RheU5hbWVzLmxlbmd0aCAtIDFdDQogICAgICAgIGRheU5hbWVzLnNwbGljZShkYXlOYW1lcy5sZW5ndGggLSAxLCAxKQ0KICAgICAgICBkYXlOYW1lcy51bnNoaWZ0KHN1bmRheU5hbWUpDQogICAgICAgIHRoaXMuZkNvbmZpZ3MuZGF5TmFtZXMgPSBkYXlOYW1lcw0KICAgICAgfQ0KICAgIH0sDQogICAgbGlzdFJlbmRlcmluZygpIHsNCiAgICAgIC8vIEVhY2ggQ2FsZW5kYXJzDQogICAgICB0aGlzLmxpc3RDYWxlbmRhcnMuZm9yRWFjaChjYWxlbmRhciA9PiB7DQogICAgICAgIC8vIFNldCBDYWxlbmRhciBXZWVrcw0KICAgICAgICBjYWxlbmRhci53ZWVrcy5mb3JFYWNoKHdlZWsgPT4gew0KICAgICAgICAgIGxldCBmaW5hbGl6ZWREYXlzID0gW10NCg0KICAgICAgICAgIHdlZWsuZGF5cy5mb3JFYWNoKGRheSA9PiB7DQogICAgICAgICAgICBsZXQgZGF0ZSA9IG5ldyBEYXRlKGRheS55ZWFyLCBkYXkubW9udGgsIGRheS5kYXkpDQogICAgICAgICAgICBsZXQgbm93ID0gbmV3IERhdGUoKQ0KDQogICAgICAgICAgICBsZXQgaXNUb2RheSA9IGZhbHNlDQoNCiAgICAgICAgICAgIGRhdGUuc2V0SG91cnMoMCwgMCwgMCwgMCkNCiAgICAgICAgICAgIG5vdy5zZXRIb3VycygwLCAwLCAwLCAwKQ0KDQogICAgICAgICAgICBpZiAoZGF0ZS5nZXRUaW1lKCkgPT09IG5vdy5nZXRUaW1lKCkpIHsNCiAgICAgICAgICAgICAgaXNUb2RheSA9IHRydWUNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgbGV0IGNoZWNrTWFya2VkDQogICAgICAgICAgICAvLyBXaXRoIEN1c3RvbSBDbGFzc2VzDQogICAgICAgICAgICBpZiAodHlwZW9mIHRoaXMuZkNvbmZpZ3MubWFya2VkRGF0ZXNbMF0gPT09ICdvYmplY3QnKSB7DQogICAgICAgICAgICAgIGNoZWNrTWFya2VkID0gdGhpcy5mQ29uZmlncy5tYXJrZWREYXRlcy5maW5kKG1hcmtEYXRlID0+IHsNCiAgICAgICAgICAgICAgICByZXR1cm4gbWFya0RhdGUuZGF0ZSA9PT0gdGhpcy5oZWxwQ2FsZW5kYXIuZm9ybWF0RGF0ZShkYXRlKQ0KICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgLy8gV2l0aG91dCBDbGFzc2VzDQogICAgICAgICAgICAgIGNoZWNrTWFya2VkID0gdGhpcy5mQ29uZmlncy5tYXJrZWREYXRlcy5maW5kKG1hcmtEYXRlID0+IHsNCiAgICAgICAgICAgICAgICByZXR1cm4gbWFya0RhdGUgPT09IHRoaXMuaGVscENhbGVuZGFyLmZvcm1hdERhdGUoZGF0ZSkNCiAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgaWYgKHRoaXMuc3RhcnRETVkgPT09IHRoaXMuaGVscENhbGVuZGFyLmZvcm1hdERhdGUoZGF0ZSkpIHsNCiAgICAgICAgICAgICAgY2hlY2tNYXJrZWQgPSB0cnVlDQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGxldCBpc01hcmtlZCA9IGZhbHNlDQogICAgICAgICAgICBpZiAodHlwZW9mIGNoZWNrTWFya2VkICE9PSAndW5kZWZpbmVkJykgew0KICAgICAgICAgICAgICBpc01hcmtlZCA9IHRydWUNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgZmluYWxpemVkRGF5cy5wdXNoKHsNCiAgICAgICAgICAgICAgZGF5OiBkYXkuZGF5LA0KICAgICAgICAgICAgICBkYXRlOiB0aGlzLmhlbHBDYWxlbmRhci5mb3JtYXREYXRlKGRhdGUpLA0KICAgICAgICAgICAgICBoaWRlOiBkYXkuaGlkZSwNCiAgICAgICAgICAgICAgaXNNb3VzZVRvTGVmdDogZmFsc2UsDQogICAgICAgICAgICAgIGlzTW91c2VUb1JpZ2h0OiBmYWxzZSwNCiAgICAgICAgICAgICAgaXNIb3ZlcmVkOiBmYWxzZSwNCiAgICAgICAgICAgICAgaXNEYXRlUmFuZ2VTdGFydDogdGhpcy5jaGVja0RhdGVSYW5nZVN0YXJ0KA0KICAgICAgICAgICAgICAgIHRoaXMuaGVscENhbGVuZGFyLmZvcm1hdERhdGUoZGF0ZSkNCiAgICAgICAgICAgICAgKSwNCiAgICAgICAgICAgICAgaXNEYXRlUmFuZ2VFbmQ6IHRoaXMuY2hlY2tEYXRlUmFuZ2VFbmQoDQogICAgICAgICAgICAgICAgdGhpcy5oZWxwQ2FsZW5kYXIuZm9ybWF0RGF0ZShkYXRlKQ0KICAgICAgICAgICAgICApLA0KICAgICAgICAgICAgICBoaWRlTGVmdEFuZFJpZ2h0RGF5czogZGF5LmhpZGVMZWZ0QW5kUmlnaHREYXlzLA0KICAgICAgICAgICAgICBpc1RvZGF5LA0KICAgICAgICAgICAgICBpc01hcmtlZA0KICAgICAgICAgICAgfSkNCiAgICAgICAgICB9KQ0KDQogICAgICAgICAgd2Vlay5kYXlzID0gZmluYWxpemVkRGF5cw0KICAgICAgICB9KQ0KICAgICAgfSkNCiAgICB9LA0KICAgIGNsaWNrRGF5KGl0ZW0sIGlzRGlzYWJsZWREYXRlKSB7DQogICAgICBpZiAodGhpcy5mQ29uZmlncy53aXRoVGltZVBpY2tlciAmJiB0aGlzLmZDb25maWdzLmlzRGF0ZVJhbmdlKSB7DQogICAgICAgIGl0ZW0uZGF0ZSA9IGl0ZW0uZGF0ZSArICcgMDA6MDAnDQogICAgICB9DQogICAgICB0aGlzLiRlbWl0KCdkYXlDbGlja2VkJywgaXRlbSkNCg0KICAgICAgaWYgKA0KICAgICAgICAhdGhpcy5mQ29uZmlncy5pc0RhdGVSYW5nZSAmJg0KICAgICAgICAhdGhpcy5mQ29uZmlncy5pc0RhdGVQaWNrZXIgJiYNCiAgICAgICAgIXRoaXMuZkNvbmZpZ3MuaXNNdWx0aXBsZURhdGVQaWNrZXINCiAgICAgICkgew0KICAgICAgICByZXR1cm4gZmFsc2UNCiAgICAgIH0NCg0KICAgICAgLy9EaXNhYmxlZCBEYXRlcyAtIFN0YXJ0DQoNCiAgICAgIC8vIERpc2FibGUgZGF5cyBvZiB3ZWVrIGlmIHNldCBpbiBjb25maWd1cmF0aW9uDQogICAgICBsZXQgZGF0ZURheSA9IHRoaXMuaGVscENhbGVuZGFyLmdldERhdGVGcm9tRm9ybWF0KGl0ZW0uZGF0ZSkuZ2V0RGF5KCkgLSAxDQogICAgICBpZiAoZGF0ZURheSA9PT0gLTEpIHsNCiAgICAgICAgZGF0ZURheSA9IDYNCiAgICAgIH0NCg0KICAgICAgbGV0IGRheU9mV2Vla1N0cmluZyA9IHRoaXMuZkNvbmZpZ3MuZGF5TmFtZXNbZGF0ZURheV0NCiAgICAgIGlmICgNCiAgICAgICAgdGhpcy5mQ29uZmlncy5kaXNhYmxlZERheU5hbWVzLmluY2x1ZGVzKGRheU9mV2Vla1N0cmluZykgfHwNCiAgICAgICAgaXNEaXNhYmxlZERhdGUoaXRlbS5kYXRlKQ0KICAgICAgKSB7DQogICAgICAgIHJldHVybiBmYWxzZQ0KICAgICAgfQ0KDQogICAgICAvL0Rpc2FibGVkIERhdGVzIC0gRW5kDQoNCiAgICAgIC8vIExpbWl0cw0KICAgICAgaWYgKHRoaXMuZkNvbmZpZ3MubGltaXRzKSB7DQogICAgICAgIGxldCBtaW4gPSB0aGlzLmhlbHBDYWxlbmRhcg0KICAgICAgICAgIC5nZXREYXRlRnJvbUZvcm1hdCh0aGlzLmZDb25maWdzLmxpbWl0cy5taW4pDQogICAgICAgICAgLmdldFRpbWUoKQ0KICAgICAgICBsZXQgbWF4ID0gdGhpcy5oZWxwQ2FsZW5kYXINCiAgICAgICAgICAuZ2V0RGF0ZUZyb21Gb3JtYXQodGhpcy5mQ29uZmlncy5saW1pdHMubWF4KQ0KICAgICAgICAgIC5nZXRUaW1lKCkNCiAgICAgICAgbGV0IGRhdGUgPSB0aGlzLmhlbHBDYWxlbmRhci5nZXREYXRlRnJvbUZvcm1hdChpdGVtLmRhdGUpLmdldFRpbWUoKQ0KDQogICAgICAgIGlmIChkYXRlIDwgbWluIHx8IGRhdGUgPiBtYXgpIHsNCiAgICAgICAgICByZXR1cm4gZmFsc2UNCiAgICAgICAgfQ0KICAgICAgfQ0KDQogICAgICAvLyBEYXRlIE11bHRpcGxlIFJhbmdlDQogICAgICBpZiAodGhpcy5mQ29uZmlncy5pc011bHRpcGxlRGF0ZVJhbmdlKSB7DQogICAgICAgIGxldCBjbGlja0RhdGUgPSB0aGlzLmhlbHBDYWxlbmRhcg0KICAgICAgICAgIC5nZXREYXRlRnJvbUZvcm1hdChpdGVtLmRhdGUuc3BsaXQoJyAnKVswXSkNCiAgICAgICAgICAuZ2V0VGltZSgpDQogICAgICAgIGxldCByYW5nZXNMZW5ndGggPSB0aGlzLmNhbGVuZGFyLm11bHRpcGxlRGF0ZVJhbmdlLmxlbmd0aA0KICAgICAgICBsZXQgbGFzdFJhbmdlID0gdGhpcy5jYWxlbmRhci5tdWx0aXBsZURhdGVSYW5nZVtyYW5nZXNMZW5ndGggLSAxXQ0KICAgICAgICBsZXQgc3RhcnREYXRlID0gJycNCiAgICAgICAgLy8gaWYgKGxhc3RSYW5nZSkgew0KICAgICAgICAvLyAgIC8vIGlmIChsYXN0UmFuZ2Uuc3RhcnQgJiYgbGFzdFJhbmdlLmVuZCkNCiAgICAgICAgLy8gfSBlbHNlDQoNCiAgICAgICAgaWYgKCFsYXN0UmFuZ2UpIHsNCiAgICAgICAgICB0aGlzLmNhbGVuZGFyLm11bHRpcGxlRGF0ZVJhbmdlLnB1c2goeyBlbmQ6ICcnLCBzdGFydDogJycgfSkNCiAgICAgICAgICByYW5nZXNMZW5ndGggPSB0aGlzLmNhbGVuZGFyLm11bHRpcGxlRGF0ZVJhbmdlLmxlbmd0aA0KICAgICAgICAgIGxhc3RSYW5nZSA9IHRoaXMuY2FsZW5kYXIubXVsdGlwbGVEYXRlUmFuZ2VbcmFuZ2VzTGVuZ3RoIC0gMV0NCiAgICAgICAgfQ0KDQogICAgICAgIGlmIChsYXN0UmFuZ2Uuc3RhcnQpIHsNCiAgICAgICAgICBzdGFydERhdGUgPSB0aGlzLmhlbHBDYWxlbmRhci5nZXREYXRlRnJvbUZvcm1hdChsYXN0UmFuZ2Uuc3RhcnQpDQogICAgICAgIH0NCg0KICAgICAgICAvLyBUd28gZGF0ZXMgaXMgbm90IGVtcHR5DQogICAgICAgIGlmIChsYXN0UmFuZ2Uuc3RhcnQgIT09ICcnICYmIGxhc3RSYW5nZS5lbmQgIT09ICcnKSB7DQogICAgICAgICAgdGhpcy5jYWxlbmRhci5tdWx0aXBsZURhdGVSYW5nZS5wdXNoKHsgZW5kOiAnJywgc3RhcnQ6IGl0ZW0uZGF0ZSB9KQ0KICAgICAgICAgIC8vIGxhc3RSYW5nZS5zdGFydCA9IGl0ZW0uZGF0ZQ0KICAgICAgICAgIC8vIGxhc3RSYW5nZS5lbmQgPSAnJw0KICAgICAgICAgIC8vIE5vdCBkYXRlIHNlbGVjdGVkDQogICAgICAgIH0gZWxzZSBpZiAobGFzdFJhbmdlLnN0YXJ0ID09PSAnJyAmJiBsYXN0UmFuZ2UuZW5kID09PSAnJykgew0KICAgICAgICAgIGxhc3RSYW5nZS5zdGFydCA9IGl0ZW0uZGF0ZQ0KICAgICAgICAgIC8vIFN0YXJ0IERhdGUgbm90IGVtcHR5LCBjaG9zZSBkYXRlID4gc3RhcnQgZGF0ZQ0KICAgICAgICB9IGVsc2UgaWYgKGxhc3RSYW5nZS5lbmQgPT09ICcnICYmIGNsaWNrRGF0ZSA+IHN0YXJ0RGF0ZS5nZXRUaW1lKCkpIHsNCiAgICAgICAgICBsYXN0UmFuZ2UuZW5kID0gaXRlbS5kYXRlDQogICAgICAgICAgLy8gU3RhcnQgZGF0ZSBub3QgZW1wdHksIGNob3NlIGRhdGUgPD0gc3RhcnQgZGF0ZSAoYWxzbyBzYW1lIGRhdGUgcmFuZ2Ugc2VsZWN0KQ0KICAgICAgICB9IGVsc2UgaWYgKGxhc3RSYW5nZS5zdGFydCAhPT0gJycgJiYgY2xpY2tEYXRlIDw9IHN0YXJ0RGF0ZS5nZXRUaW1lKCkpIHsNCiAgICAgICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7DQogICAgICAgICAgICBpZiAodGhpcy5jYWxlbmRhci53aXRoVGltZVBpY2tlcikgew0KICAgICAgICAgICAgICB0aGlzLiRyZWZzWyd0aW1lUGlja2VyJ10uc3RhcnREYXRlQWN0aXZlID0gdHJ1ZQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0pDQogICAgICAgICAgbGFzdFJhbmdlLmVuZCA9IGxhc3RSYW5nZS5zdGFydA0KICAgICAgICAgIGxhc3RSYW5nZS5zdGFydCA9IGl0ZW0uZGF0ZQ0KICAgICAgICB9DQoNCiAgICAgICAgLy9HZXQgbnVtYmVyIG9mIGRheXMgYmV0d2VlbiBkYXRlIHJhbmdlIGRhdGVzDQogICAgICAgIGlmIChsYXN0UmFuZ2Uuc3RhcnQgIT09ICcnICYmIGxhc3RSYW5nZS5lbmQgIT09ICcnKSB7DQogICAgICAgICAgbGV0IG9uZURheSA9IDI0ICogNjAgKiA2MCAqIDEwMDANCiAgICAgICAgICBsZXQgZmlyc3REYXRlID0gdGhpcy5oZWxwQ2FsZW5kYXIuZ2V0RGF0ZUZyb21Gb3JtYXQobGFzdFJhbmdlLnN0YXJ0KQ0KICAgICAgICAgIGxldCBzZWNvbmREYXRlID0gdGhpcy5oZWxwQ2FsZW5kYXIuZ2V0RGF0ZUZyb21Gb3JtYXQobGFzdFJhbmdlLmVuZCkNCiAgICAgICAgICBsZXQgZGlmZkRheXMgPSBNYXRoLnJvdW5kKA0KICAgICAgICAgICAgTWF0aC5hYnMoKGZpcnN0RGF0ZS5nZXRUaW1lKCkgLSBzZWNvbmREYXRlLmdldFRpbWUoKSkgLyBvbmVEYXkpDQogICAgICAgICAgKQ0KICAgICAgICAgIGxldCBpdGVtVGltZSA9IHRoaXMuaGVscENhbGVuZGFyDQogICAgICAgICAgICAuZ2V0RGF0ZUZyb21Gb3JtYXQoaXRlbS5kYXRlKQ0KICAgICAgICAgICAgLmdldFRpbWUoKQ0KDQogICAgICAgICAgdGhpcy4kZW1pdCgnc2VsZWN0ZWREYXlzQ291bnQnLCBkaWZmRGF5cykNCg0KICAgICAgICAgIC8vIElzIEF1dG8gQ2xvc2VhYmxlDQogICAgICAgICAgaWYgKHRoaXMuZkNvbmZpZ3MuaXNNb2RhbCAmJiB0aGlzLmZDb25maWdzLmlzQXV0b0Nsb3NlYWJsZSkgew0KICAgICAgICAgICAgdGhpcy5zaG93Q2FsZW5kYXIgPSBmYWxzZQ0KICAgICAgICAgIH0NCg0KICAgICAgICAgIC8vIE1pbmltdW0gU2VsZWN0ZWQgRGF5cw0KICAgICAgICAgIGxldCBtaW5TZWxEYXlzID0gdGhpcy5mQ29uZmlncy5taW5TZWxEYXlzDQoNCiAgICAgICAgICBpZiAoDQogICAgICAgICAgICBtaW5TZWxEYXlzICYmDQogICAgICAgICAgICBpdGVtVGltZSA+PSBzdGFydERhdGUuZ2V0VGltZSgpICYmDQogICAgICAgICAgICBkaWZmRGF5cyA8IG1pblNlbERheXMNCiAgICAgICAgICApIHsNCiAgICAgICAgICAgIHN0YXJ0RGF0ZS5zZXREYXRlKHN0YXJ0RGF0ZS5nZXREYXRlKCkgKyAobWluU2VsRGF5cyAtIDEpKQ0KICAgICAgICAgICAgbGFzdFJhbmdlLmVuZCA9IHRoaXMuaGVscENhbGVuZGFyLmZvcm1hdERhdGUoc3RhcnREYXRlKQ0KICAgICAgICAgIH0NCg0KICAgICAgICAgIGlmICgNCiAgICAgICAgICAgIG1pblNlbERheXMgJiYNCiAgICAgICAgICAgIGl0ZW1UaW1lIDwgc3RhcnREYXRlLmdldFRpbWUoKSAmJg0KICAgICAgICAgICAgZGlmZkRheXMgPCBtaW5TZWxEYXlzDQogICAgICAgICAgKSB7DQogICAgICAgICAgICBzdGFydERhdGUuc2V0RGF0ZShzdGFydERhdGUuZ2V0RGF0ZSgpIC0gKG1pblNlbERheXMgLSAxKSkNCiAgICAgICAgICAgIGxhc3RSYW5nZS5zdGFydCA9IHRoaXMuaGVscENhbGVuZGFyLmZvcm1hdERhdGUoc3RhcnREYXRlKQ0KICAgICAgICAgIH0NCg0KICAgICAgICAgIC8vIE1heGltdW0gU2VsZWN0ZWQgRGF5cw0KICAgICAgICAgIGxldCBtYXhTZWxEYXlzID0gdGhpcy5mQ29uZmlncy5tYXhTZWxEYXlzDQoNCiAgICAgICAgICBpZiAoDQogICAgICAgICAgICBtYXhTZWxEYXlzICYmDQogICAgICAgICAgICBpdGVtVGltZSA+PSBzdGFydERhdGUuZ2V0VGltZSgpICYmDQogICAgICAgICAgICBkaWZmRGF5cyA+PSBtYXhTZWxEYXlzDQogICAgICAgICAgKSB7DQogICAgICAgICAgICBzdGFydERhdGUuc2V0RGF0ZShzdGFydERhdGUuZ2V0RGF0ZSgpICsgKG1heFNlbERheXMgLSAxKSkNCiAgICAgICAgICAgIGxhc3RSYW5nZS5lbmQgPSB0aGlzLmhlbHBDYWxlbmRhci5mb3JtYXREYXRlKHN0YXJ0RGF0ZSkNCiAgICAgICAgICB9DQoNCiAgICAgICAgICBpZiAoDQogICAgICAgICAgICBtYXhTZWxEYXlzICYmDQogICAgICAgICAgICBpdGVtVGltZSA8IHN0YXJ0RGF0ZS5nZXRUaW1lKCkgJiYNCiAgICAgICAgICAgIGRpZmZEYXlzID49IG1heFNlbERheXMNCiAgICAgICAgICApIHsNCiAgICAgICAgICAgIHN0YXJ0RGF0ZS5zZXREYXRlKHN0YXJ0RGF0ZS5nZXREYXRlKCkgLSAobWF4U2VsRGF5cyAtIDEpKQ0KICAgICAgICAgICAgbGFzdFJhbmdlLnN0YXJ0ID0gdGhpcy5oZWxwQ2FsZW5kYXIuZm9ybWF0RGF0ZShzdGFydERhdGUpDQogICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgdGhpcy4kZW1pdCgnaW5wdXQnLCB0aGlzLmNhbGVuZGFyKQ0KICAgICAgfSAvLyBEYXRlIFJhbmdlDQogICAgICBlbHNlIGlmICh0aGlzLmZDb25maWdzLmlzRGF0ZVJhbmdlKSB7DQogICAgICAgIGxldCBjbGlja0RhdGUgPSB0aGlzLmhlbHBDYWxlbmRhcg0KICAgICAgICAgIC5nZXREYXRlRnJvbUZvcm1hdChpdGVtLmRhdGUuc3BsaXQoJyAnKVswXSkNCiAgICAgICAgICAuZ2V0VGltZSgpDQoNCiAgICAgICAgbGV0IHN0YXJ0RGF0ZSA9ICcnDQogICAgICAgIGlmICh0aGlzLmNhbGVuZGFyLmRhdGVSYW5nZS5zdGFydCkgew0KICAgICAgICAgIHN0YXJ0RGF0ZSA9IHRoaXMuaGVscENhbGVuZGFyLmdldERhdGVGcm9tRm9ybWF0KA0KICAgICAgICAgICAgdGhpcy5jYWxlbmRhci5kYXRlUmFuZ2Uuc3RhcnQNCiAgICAgICAgICApDQogICAgICAgIH0NCg0KICAgICAgICAvLyBUd28gZGF0ZXMgaXMgbm90IGVtcHR5DQogICAgICAgIGlmICgNCiAgICAgICAgICB0aGlzLmNhbGVuZGFyLmRhdGVSYW5nZS5zdGFydCAhPT0gJycgJiYNCiAgICAgICAgICB0aGlzLmNhbGVuZGFyLmRhdGVSYW5nZS5lbmQgIT09ICcnDQogICAgICAgICkgew0KICAgICAgICAgIHRoaXMuY2FsZW5kYXIuZGF0ZVJhbmdlLnN0YXJ0ID0gaXRlbS5kYXRlDQogICAgICAgICAgdGhpcy5jYWxlbmRhci5kYXRlUmFuZ2UuZW5kID0gJycNCiAgICAgICAgICAvLyBOb3QgZGF0ZSBzZWxlY3RlZA0KICAgICAgICB9IGVsc2UgaWYgKA0KICAgICAgICAgIHRoaXMuY2FsZW5kYXIuZGF0ZVJhbmdlLnN0YXJ0ID09PSAnJyAmJg0KICAgICAgICAgIHRoaXMuY2FsZW5kYXIuZGF0ZVJhbmdlLmVuZCA9PT0gJycNCiAgICAgICAgKSB7DQogICAgICAgICAgdGhpcy5jYWxlbmRhci5kYXRlUmFuZ2Uuc3RhcnQgPSBpdGVtLmRhdGUNCiAgICAgICAgICAvLyBTdGFydCBEYXRlIG5vdCBlbXB0eSwgY2hvc2UgZGF0ZSA+IHN0YXJ0IGRhdGUNCiAgICAgICAgfSBlbHNlIGlmICgNCiAgICAgICAgICB0aGlzLmNhbGVuZGFyLmRhdGVSYW5nZS5lbmQgPT09ICcnICYmDQogICAgICAgICAgY2xpY2tEYXRlID4gc3RhcnREYXRlLmdldFRpbWUoKQ0KICAgICAgICApIHsNCiAgICAgICAgICB0aGlzLmNhbGVuZGFyLmRhdGVSYW5nZS5lbmQgPSBpdGVtLmRhdGUNCiAgICAgICAgICAvLyBTdGFydCBkYXRlIG5vdCBlbXB0eSwgY2hvc2UgZGF0ZSA8PSBzdGFydCBkYXRlIChhbHNvIHNhbWUgZGF0ZSByYW5nZSBzZWxlY3QpDQogICAgICAgIH0gZWxzZSBpZiAoDQogICAgICAgICAgdGhpcy5jYWxlbmRhci5kYXRlUmFuZ2Uuc3RhcnQgIT09ICcnICYmDQogICAgICAgICAgY2xpY2tEYXRlIDw9IHN0YXJ0RGF0ZS5nZXRUaW1lKCkNCiAgICAgICAgKSB7DQogICAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gew0KICAgICAgICAgICAgaWYgKHRoaXMuY2FsZW5kYXIuZGF0ZVJhbmdlICYmIHRoaXMuY2FsZW5kYXIud2l0aFRpbWVQaWNrZXIpIHsNCiAgICAgICAgICAgICAgdGhpcy4kcmVmc1sndGltZVBpY2tlciddLnN0YXJ0RGF0ZUFjdGl2ZSA9IHRydWUNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9KQ0KICAgICAgICAgIHRoaXMuY2FsZW5kYXIuZGF0ZVJhbmdlLmVuZCA9IHRoaXMuY2FsZW5kYXIuZGF0ZVJhbmdlLnN0YXJ0DQogICAgICAgICAgdGhpcy5jYWxlbmRhci5kYXRlUmFuZ2Uuc3RhcnQgPSBpdGVtLmRhdGUNCiAgICAgICAgfQ0KDQogICAgICAgIC8vR2V0IG51bWJlciBvZiBkYXlzIGJldHdlZW4gZGF0ZSByYW5nZSBkYXRlcw0KICAgICAgICBpZiAoDQogICAgICAgICAgdGhpcy5jYWxlbmRhci5kYXRlUmFuZ2Uuc3RhcnQgIT09ICcnICYmDQogICAgICAgICAgdGhpcy5jYWxlbmRhci5kYXRlUmFuZ2UuZW5kICE9PSAnJw0KICAgICAgICApIHsNCiAgICAgICAgICBsZXQgb25lRGF5ID0gMjQgKiA2MCAqIDYwICogMTAwMA0KICAgICAgICAgIGxldCBmaXJzdERhdGUgPSB0aGlzLmhlbHBDYWxlbmRhci5nZXREYXRlRnJvbUZvcm1hdCgNCiAgICAgICAgICAgIHRoaXMuY2FsZW5kYXIuZGF0ZVJhbmdlLnN0YXJ0DQogICAgICAgICAgKQ0KICAgICAgICAgIGxldCBzZWNvbmREYXRlID0gdGhpcy5oZWxwQ2FsZW5kYXIuZ2V0RGF0ZUZyb21Gb3JtYXQoDQogICAgICAgICAgICB0aGlzLmNhbGVuZGFyLmRhdGVSYW5nZS5lbmQNCiAgICAgICAgICApDQogICAgICAgICAgbGV0IGRpZmZEYXlzID0gTWF0aC5yb3VuZCgNCiAgICAgICAgICAgIE1hdGguYWJzKChmaXJzdERhdGUuZ2V0VGltZSgpIC0gc2Vjb25kRGF0ZS5nZXRUaW1lKCkpIC8gb25lRGF5KQ0KICAgICAgICAgICkNCiAgICAgICAgICBsZXQgaXRlbVRpbWUgPSB0aGlzLmhlbHBDYWxlbmRhcg0KICAgICAgICAgICAgLmdldERhdGVGcm9tRm9ybWF0KGl0ZW0uZGF0ZSkNCiAgICAgICAgICAgIC5nZXRUaW1lKCkNCg0KICAgICAgICAgIHRoaXMuJGVtaXQoJ3NlbGVjdGVkRGF5c0NvdW50JywgZGlmZkRheXMpDQoNCiAgICAgICAgICAvLyBJcyBBdXRvIENsb3NlYWJsZQ0KICAgICAgICAgIGlmICh0aGlzLmZDb25maWdzLmlzTW9kYWwgJiYgdGhpcy5mQ29uZmlncy5pc0F1dG9DbG9zZWFibGUpIHsNCiAgICAgICAgICAgIHRoaXMuc2hvd0NhbGVuZGFyID0gZmFsc2UNCiAgICAgICAgICB9DQoNCiAgICAgICAgICAvLyBNaW5pbXVtIFNlbGVjdGVkIERheXMNCiAgICAgICAgICBsZXQgbWluU2VsRGF5cyA9IHRoaXMuZkNvbmZpZ3MubWluU2VsRGF5cw0KDQogICAgICAgICAgaWYgKA0KICAgICAgICAgICAgbWluU2VsRGF5cyAmJg0KICAgICAgICAgICAgaXRlbVRpbWUgPj0gc3RhcnREYXRlLmdldFRpbWUoKSAmJg0KICAgICAgICAgICAgZGlmZkRheXMgPCBtaW5TZWxEYXlzDQogICAgICAgICAgKSB7DQogICAgICAgICAgICBzdGFydERhdGUuc2V0RGF0ZShzdGFydERhdGUuZ2V0RGF0ZSgpICsgKG1pblNlbERheXMgLSAxKSkNCiAgICAgICAgICAgIHRoaXMuY2FsZW5kYXIuZGF0ZVJhbmdlLmVuZCA9IHRoaXMuaGVscENhbGVuZGFyLmZvcm1hdERhdGUoDQogICAgICAgICAgICAgIHN0YXJ0RGF0ZQ0KICAgICAgICAgICAgKQ0KICAgICAgICAgIH0NCg0KICAgICAgICAgIGlmICgNCiAgICAgICAgICAgIG1pblNlbERheXMgJiYNCiAgICAgICAgICAgIGl0ZW1UaW1lIDwgc3RhcnREYXRlLmdldFRpbWUoKSAmJg0KICAgICAgICAgICAgZGlmZkRheXMgPCBtaW5TZWxEYXlzDQogICAgICAgICAgKSB7DQogICAgICAgICAgICBzdGFydERhdGUuc2V0RGF0ZShzdGFydERhdGUuZ2V0RGF0ZSgpIC0gKG1pblNlbERheXMgLSAxKSkNCiAgICAgICAgICAgIHRoaXMuY2FsZW5kYXIuZGF0ZVJhbmdlLnN0YXJ0ID0gdGhpcy5oZWxwQ2FsZW5kYXIuZm9ybWF0RGF0ZSgNCiAgICAgICAgICAgICAgc3RhcnREYXRlDQogICAgICAgICAgICApDQogICAgICAgICAgfQ0KDQogICAgICAgICAgLy8gTWF4aW11bSBTZWxlY3RlZCBEYXlzDQogICAgICAgICAgbGV0IG1heFNlbERheXMgPSB0aGlzLmZDb25maWdzLm1heFNlbERheXMNCg0KICAgICAgICAgIGlmICgNCiAgICAgICAgICAgIG1heFNlbERheXMgJiYNCiAgICAgICAgICAgIGl0ZW1UaW1lID49IHN0YXJ0RGF0ZS5nZXRUaW1lKCkgJiYNCiAgICAgICAgICAgIGRpZmZEYXlzID49IG1heFNlbERheXMNCiAgICAgICAgICApIHsNCiAgICAgICAgICAgIHN0YXJ0RGF0ZS5zZXREYXRlKHN0YXJ0RGF0ZS5nZXREYXRlKCkgKyAobWF4U2VsRGF5cyAtIDEpKQ0KICAgICAgICAgICAgdGhpcy5jYWxlbmRhci5kYXRlUmFuZ2UuZW5kID0gdGhpcy5oZWxwQ2FsZW5kYXIuZm9ybWF0RGF0ZSgNCiAgICAgICAgICAgICAgc3RhcnREYXRlDQogICAgICAgICAgICApDQogICAgICAgICAgfQ0KDQogICAgICAgICAgaWYgKA0KICAgICAgICAgICAgbWF4U2VsRGF5cyAmJg0KICAgICAgICAgICAgaXRlbVRpbWUgPCBzdGFydERhdGUuZ2V0VGltZSgpICYmDQogICAgICAgICAgICBkaWZmRGF5cyA+PSBtYXhTZWxEYXlzDQogICAgICAgICAgKSB7DQogICAgICAgICAgICBzdGFydERhdGUuc2V0RGF0ZShzdGFydERhdGUuZ2V0RGF0ZSgpIC0gKG1heFNlbERheXMgLSAxKSkNCiAgICAgICAgICAgIHRoaXMuY2FsZW5kYXIuZGF0ZVJhbmdlLnN0YXJ0ID0gdGhpcy5oZWxwQ2FsZW5kYXIuZm9ybWF0RGF0ZSgNCiAgICAgICAgICAgICAgc3RhcnREYXRlDQogICAgICAgICAgICApDQogICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgdGhpcy4kZW1pdCgnaW5wdXQnLCB0aGlzLmNhbGVuZGFyKQ0KICAgICAgfSBlbHNlIGlmICh0aGlzLmZDb25maWdzLmlzRGF0ZVBpY2tlcikgew0KICAgICAgICB0aGlzLmNhbGVuZGFyLnNlbGVjdGVkRGF0ZSA9IGl0ZW0uZGF0ZQ0KICAgICAgICB0aGlzLiRlbWl0KCdpbnB1dCcsIHRoaXMuY2FsZW5kYXIpDQoNCiAgICAgICAgLy8gSXMgQXV0byBDbG9zZWFibGUNCiAgICAgICAgaWYgKHRoaXMuZkNvbmZpZ3MuaXNNb2RhbCAmJiB0aGlzLmZDb25maWdzLmlzQXV0b0Nsb3NlYWJsZSkgew0KICAgICAgICAgIHRoaXMuc2hvd0NhbGVuZGFyID0gZmFsc2UNCiAgICAgICAgfQ0KICAgICAgfSBlbHNlIGlmICh0aGlzLmZDb25maWdzLmlzTXVsdGlwbGVEYXRlUGlja2VyKSB7DQogICAgICAgIGlmICgNCiAgICAgICAgICB0aGlzLmNhbGVuZGFyLmhhc093blByb3BlcnR5KCdzZWxlY3RlZERhdGVzJykgJiYNCiAgICAgICAgICB0aGlzLmNhbGVuZGFyLnNlbGVjdGVkRGF0ZXMuZmluZChkYXRlID0+IGRhdGUuZGF0ZSA9PT0gaXRlbS5kYXRlKQ0KICAgICAgICApIHsNCiAgICAgICAgICBsZXQgZGF0ZUluZGV4ID0gdGhpcy5jYWxlbmRhci5zZWxlY3RlZERhdGVzLmZpbmRJbmRleCgNCiAgICAgICAgICAgIGRhdGUgPT4gZGF0ZS5kYXRlID09PSBpdGVtLmRhdGUNCiAgICAgICAgICApDQogICAgICAgICAgdGhpcy5jYWxlbmRhci5zZWxlY3RlZERhdGVzLnNwbGljZShkYXRlSW5kZXgsIDEpDQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgbGV0IGRhdGUgPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLmRlZmF1bHREYXRlRm9ybWF0KQ0KICAgICAgICAgIGRhdGUuZGF0ZSA9IGl0ZW0uZGF0ZQ0KDQogICAgICAgICAgaWYgKCF0aGlzLmNhbGVuZGFyLmhhc093blByb3BlcnR5KCdzZWxlY3RlZERhdGVzJykpIHsNCiAgICAgICAgICAgIHRoaXMuY2FsZW5kYXIuc2VsZWN0ZWREYXRlcyA9IFtdDQogICAgICAgICAgfQ0KDQogICAgICAgICAgdGhpcy5jYWxlbmRhci5zZWxlY3RlZERhdGVzLnB1c2goZGF0ZSkNCiAgICAgICAgfQ0KDQogICAgICAgIHRoaXMuJGVtaXQoJ2lucHV0JywgdGhpcy5jYWxlbmRhcikNCiAgICAgIH0NCg0KICAgICAgdGhpcy5tYXJrQ2hvb3NlRGF5cygpDQoNCiAgICAgIC8vIFRpbWUgUGlja2VyDQogICAgICBpZiAodGhpcy5mQ29uZmlncy53aXRoVGltZVBpY2tlcikgew0KICAgICAgICBpZiAodGhpcy5mQ29uZmlncy5pc0RhdGVSYW5nZSB8fCB0aGlzLmZDb25maWdzLmlzRGF0ZVBpY2tlcikgew0KICAgICAgICAgIHRoaXMub3BlblRpbWVQaWNrZXIoKQ0KICAgICAgICB9DQoNCiAgICAgICAgaWYgKA0KICAgICAgICAgIHRoaXMuY2FsZW5kYXIuc2VsZWN0ZWREYXRlcy5maW5kKGRhdGUgPT4gZGF0ZS5kYXRlID09PSBpdGVtLmRhdGUpICYmDQogICAgICAgICAgdGhpcy5mQ29uZmlncy5pc011bHRpcGxlRGF0ZVBpY2tlcg0KICAgICAgICApIHsNCiAgICAgICAgICB0aGlzLm9wZW5UaW1lUGlja2VyKCkNCiAgICAgICAgfQ0KICAgICAgfQ0KDQogICAgICB0aGlzLiRlbWl0KCdjaG9zZURheScsIGl0ZW0pDQogICAgfSwNCiAgICBtYXJrQ2hvb3NlRGF5cygpIHsNCiAgICAgIGxldCBzdGFydERhdGUgPSB0aGlzLnN0YXJ0RE1ZDQogICAgICBsZXQgZW5kRGF0ZSA9IHRoaXMuZW5kRE1ZDQogICAgICB0aGlzLmxpc3RDYWxlbmRhcnMuZm9yRWFjaChjYWxlbmRhciA9PiB7DQogICAgICAgIGNhbGVuZGFyLndlZWtzLmZvckVhY2god2VlayA9PiB7DQogICAgICAgICAgd2Vlay5kYXlzLmZvckVhY2goZGF5ID0+IHsNCiAgICAgICAgICAgIGRheS5pc01hcmtlZCA9IGZhbHNlDQogICAgICAgICAgICBkYXkuZGF0ZSA9IGRheS5kYXRlLnNwbGl0KCcgJylbMF0NCiAgICAgICAgICAgIC8vIERhdGUgUGlja2VyDQogICAgICAgICAgICBpZiAodGhpcy5mQ29uZmlncy5pc0RhdGVQaWNrZXIpIHsNCiAgICAgICAgICAgICAgaWYgKHRoaXMuY2FsZW5kYXIuc2VsZWN0ZWREYXRlID09PSBkYXkuZGF0ZSkgZGF5LmlzTWFya2VkID0gdHJ1ZQ0KICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmZDb25maWdzLmlzTXVsdGlwbGVEYXRlUGlja2VyKSB7DQogICAgICAgICAgICAgIGlmICgNCiAgICAgICAgICAgICAgICB0aGlzLmNhbGVuZGFyLmhhc093blByb3BlcnR5KCdzZWxlY3RlZERhdGVzJykgJiYNCiAgICAgICAgICAgICAgICB0aGlzLmNhbGVuZGFyLnNlbGVjdGVkRGF0ZXMuZmluZChkYXRlID0+IGRhdGUuZGF0ZSA9PT0gZGF5LmRhdGUpDQogICAgICAgICAgICAgICkNCiAgICAgICAgICAgICAgICBkYXkuaXNNYXJrZWQgPSB0cnVlDQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICBkYXkuaXNNb3VzZVRvTGVmdCA9IGZhbHNlDQogICAgICAgICAgICAgIGRheS5pc01vdXNlVG9SaWdodCA9IGZhbHNlDQogICAgICAgICAgICAgIC8vIERhdGUgUmFuZ2UNCiAgICAgICAgICAgICAgaWYgKHN0YXJ0RGF0ZSA9PT0gZGF5LmRhdGUpIHsNCiAgICAgICAgICAgICAgICBkYXkuaXNNb3VzZVRvTGVmdCA9ICEhZW5kRGF0ZQ0KICAgICAgICAgICAgICAgIGRheS5pc01hcmtlZCA9IHRydWUNCiAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgIGlmIChlbmREYXRlID09PSBkYXkuZGF0ZSkgew0KICAgICAgICAgICAgICAgIGRheS5pc01vdXNlVG9SaWdodCA9ICEhZW5kRGF0ZQ0KICAgICAgICAgICAgICAgIGRheS5pc01hcmtlZCA9IHRydWUNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAvL011bHRpcGxlIFJhbmdlDQogICAgICAgICAgICAgIGlmICh0aGlzLmNhbGVuZGFyLm11bHRpcGxlRGF0ZVJhbmdlKSB7DQogICAgICAgICAgICAgICAgaWYgKA0KICAgICAgICAgICAgICAgICAgfnRoaXMuY2FsZW5kYXIubXVsdGlwbGVEYXRlUmFuZ2UNCiAgICAgICAgICAgICAgICAgICAgLm1hcChyYW5nZSA9PiByYW5nZS5zdGFydC5zcGxpdCgnICcpWzBdKQ0KICAgICAgICAgICAgICAgICAgICAuaW5kZXhPZihkYXkuZGF0ZSkNCiAgICAgICAgICAgICAgICApIHsNCiAgICAgICAgICAgICAgICAgIGRheS5pc01vdXNlVG9MZWZ0ID0gISFlbmREYXRlDQogICAgICAgICAgICAgICAgICBkYXkuaXNNYXJrZWQgPSB0cnVlDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGlmICgNCiAgICAgICAgICAgICAgICAgIH50aGlzLmNhbGVuZGFyLm11bHRpcGxlRGF0ZVJhbmdlDQogICAgICAgICAgICAgICAgICAgIC5tYXAocmFuZ2UgPT4gcmFuZ2UuZW5kLnNwbGl0KCcgJylbMF0pDQogICAgICAgICAgICAgICAgICAgIC5pbmRleE9mKGRheS5kYXRlKQ0KICAgICAgICAgICAgICAgICkgew0KICAgICAgICAgICAgICAgICAgZGF5LmlzTW91c2VUb1JpZ2h0ID0gISFlbmREYXRlDQogICAgICAgICAgICAgICAgICBkYXkuaXNNYXJrZWQgPSB0cnVlDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHRoaXMuY2FsZW5kYXIubXVsdGlwbGVEYXRlUmFuZ2UuZm9yRWFjaChyYW5nZSA9PiB7DQogICAgICAgICAgICAgICAgICBpZiAocmFuZ2Uuc3RhcnQgJiYgcmFuZ2Uuc3RhcnQgPT09IHJhbmdlLmVuZCkgew0KICAgICAgICAgICAgICAgICAgICBkYXkuaXNNb3VzZVRvTGVmdCA9IGZhbHNlDQogICAgICAgICAgICAgICAgICAgIGRheS5pc01vdXNlVG9SaWdodCA9IGZhbHNlDQogICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICBpZiAocmFuZ2Uuc3RhcnQgJiYgcmFuZ2UuZW5kKSB7DQogICAgICAgICAgICAgICAgICAgIGlmICgNCiAgICAgICAgICAgICAgICAgICAgICB0aGlzLmhlbHBDYWxlbmRhci5nZXREYXRlRnJvbUZvcm1hdChkYXkuZGF0ZSkuZ2V0VGltZSgpID4NCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGVscENhbGVuZGFyLmdldERhdGVGcm9tRm9ybWF0KHJhbmdlLnN0YXJ0KSAmJg0KICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGVscENhbGVuZGFyLmdldERhdGVGcm9tRm9ybWF0KGRheS5kYXRlKSA8DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmhlbHBDYWxlbmRhci5nZXREYXRlRnJvbUZvcm1hdChyYW5nZS5lbmQpDQogICAgICAgICAgICAgICAgICAgICkgew0KICAgICAgICAgICAgICAgICAgICAgIGRheS5pc01hcmtlZCA9IHRydWUNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICBpZiAoc3RhcnREYXRlICYmIHN0YXJ0RGF0ZSA9PT0gZW5kRGF0ZSkgew0KICAgICAgICAgICAgICAgIGRheS5pc01vdXNlVG9MZWZ0ID0gZmFsc2UNCiAgICAgICAgICAgICAgICBkYXkuaXNNb3VzZVRvUmlnaHQgPSBmYWxzZQ0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIGlmIChzdGFydERhdGUgJiYgZW5kRGF0ZSkgew0KICAgICAgICAgICAgICAgIGlmICgNCiAgICAgICAgICAgICAgICAgIHRoaXMuaGVscENhbGVuZGFyLmdldERhdGVGcm9tRm9ybWF0KGRheS5kYXRlKS5nZXRUaW1lKCkgPg0KICAgICAgICAgICAgICAgICAgICB0aGlzLmhlbHBDYWxlbmRhci5nZXREYXRlRnJvbUZvcm1hdChzdGFydERhdGUpICYmDQogICAgICAgICAgICAgICAgICB0aGlzLmhlbHBDYWxlbmRhci5nZXREYXRlRnJvbUZvcm1hdChkYXkuZGF0ZSkgPA0KICAgICAgICAgICAgICAgICAgICB0aGlzLmhlbHBDYWxlbmRhci5nZXREYXRlRnJvbUZvcm1hdChlbmREYXRlKQ0KICAgICAgICAgICAgICAgICkgew0KICAgICAgICAgICAgICAgICAgZGF5LmlzTWFya2VkID0gdHJ1ZQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKHRoaXMuZkNvbmZpZ3MubWFya2VkRGF0ZXMuaW5jbHVkZXMoZGF5LmRhdGUpKQ0KICAgICAgICAgICAgICBkYXkuaXNNYXJrZWQgPSB0cnVlDQogICAgICAgICAgfSkNCiAgICAgICAgfSkNCiAgICAgIH0pDQogICAgfSwNCiAgICBkYXlNb3VzZU92ZXIoZGF0ZSkgew0KICAgICAgaWYgKCF0aGlzLmZDb25maWdzLmlzRGF0ZVJhbmdlKSB7DQogICAgICAgIHJldHVybiBmYWxzZQ0KICAgICAgfQ0KDQogICAgICAvLyBMaW1pdHMNCiAgICAgIGlmICh0aGlzLmZDb25maWdzLmxpbWl0cykgew0KICAgICAgICBsZXQgbGltaXRNaW4gPSB0aGlzLmhlbHBDYWxlbmRhcg0KICAgICAgICAgIC5nZXREYXRlRnJvbUZvcm1hdCh0aGlzLmZDb25maWdzLmxpbWl0cy5taW4pDQogICAgICAgICAgLmdldFRpbWUoKQ0KICAgICAgICBsZXQgbGltaXRNYXggPSB0aGlzLmhlbHBDYWxlbmRhcg0KICAgICAgICAgIC5nZXREYXRlRnJvbUZvcm1hdCh0aGlzLmZDb25maWdzLmxpbWl0cy5tYXgpDQogICAgICAgICAgLmdldFRpbWUoKQ0KICAgICAgICBsZXQgbGltaXREYXRlID0gdGhpcy5oZWxwQ2FsZW5kYXIuZ2V0RGF0ZUZyb21Gb3JtYXQoZGF0ZSkuZ2V0VGltZSgpDQoNCiAgICAgICAgaWYgKGxpbWl0RGF0ZSA8IGxpbWl0TWluIHx8IGxpbWl0RGF0ZSA+IGxpbWl0TWF4KSB7DQogICAgICAgICAgcmV0dXJuIGZhbHNlDQogICAgICAgIH0NCiAgICAgIH0NCg0KICAgICAgLy9NdWx0aXBsZSBSYW5nZQ0KDQogICAgICBpZiAoDQogICAgICAgICh0aGlzLmNhbGVuZGFyLmRhdGVSYW5nZS5zdGFydCA9PT0gJycgfHwNCiAgICAgICAgICB0aGlzLmNhbGVuZGFyLmRhdGVSYW5nZS5lbmQgPT09ICcnKSAmJg0KICAgICAgICAodGhpcy5jYWxlbmRhci5kYXRlUmFuZ2Uuc3RhcnQgIT09ICcnIHx8DQogICAgICAgICAgdGhpcy5jYWxlbmRhci5kYXRlUmFuZ2UuZW5kICE9PSAnJykNCiAgICAgICkgew0KICAgICAgICBmb3IgKGxldCBlID0gMDsgZSA8IHRoaXMubGlzdENhbGVuZGFycy5sZW5ndGg7IGUrKykgew0KICAgICAgICAgIGxldCBjYWxlbmRhciA9IHRoaXMubGlzdENhbGVuZGFyc1tlXQ0KDQogICAgICAgICAgZm9yIChsZXQgZiA9IDA7IGYgPCBjYWxlbmRhci53ZWVrcy5sZW5ndGg7IGYrKykgew0KICAgICAgICAgICAgbGV0IHdlZWsgPSBjYWxlbmRhci53ZWVrc1tmXQ0KDQogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHdlZWsuZGF5cy5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgICBsZXQgaXRlbSA9IHdlZWsuZGF5c1tpXQ0KDQogICAgICAgICAgICAgIHRoaXMubGlzdENhbGVuZGFyc1tlXS53ZWVrc1tmXS5kYXlzW2ldLmlzSG92ZXJlZCA9IGZhbHNlDQogICAgICAgICAgICAgIGlmICgNCiAgICAgICAgICAgICAgICBpdGVtLmRhdGUgIT09IHRoaXMuc3RhcnRETVkgJiYNCiAgICAgICAgICAgICAgICAhdGhpcy5mQ29uZmlncy5tYXJrZWREYXRlcy5pbmNsdWRlcyhpdGVtLmRhdGUpDQogICAgICAgICAgICAgICkgew0KICAgICAgICAgICAgICAgIHRoaXMubGlzdENhbGVuZGFyc1tlXS53ZWVrc1tmXS5kYXlzW2ldLmlzTWFya2VkID0gZmFsc2UNCiAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgIGlmICh0aGlzLmNhbGVuZGFyLmRhdGVSYW5nZS5zdGFydCkgew0KICAgICAgICAgICAgICAgIGxldCBpdGVtRGF0ZSA9IHRoaXMuaGVscENhbGVuZGFyDQogICAgICAgICAgICAgICAgICAuZ2V0RGF0ZUZyb21Gb3JtYXQoaXRlbS5kYXRlKQ0KICAgICAgICAgICAgICAgICAgLmdldFRpbWUoKQ0KDQogICAgICAgICAgICAgICAgbGV0IHRoaXNEYXRlID0gdGhpcy5oZWxwQ2FsZW5kYXINCiAgICAgICAgICAgICAgICAgIC5nZXREYXRlRnJvbUZvcm1hdChkYXRlKQ0KICAgICAgICAgICAgICAgICAgLmdldFRpbWUoKQ0KICAgICAgICAgICAgICAgIGxldCBzdGFydERhdGUgPSB0aGlzLmhlbHBDYWxlbmRhci5nZXREYXRlRnJvbUZvcm1hdCgNCiAgICAgICAgICAgICAgICAgIHRoaXMuY2FsZW5kYXIuZGF0ZVJhbmdlLnN0YXJ0DQogICAgICAgICAgICAgICAgKQ0KDQogICAgICAgICAgICAgICAgdGhpcy5saXN0Q2FsZW5kYXJzW2VdLndlZWtzW2ZdLmRheXNbaV0uaXNNb3VzZVRvTGVmdCA9DQogICAgICAgICAgICAgICAgICAoaXRlbURhdGUgPT09IHN0YXJ0RGF0ZS5nZXRUaW1lKCkgJiYNCiAgICAgICAgICAgICAgICAgICAgdGhpc0RhdGUgPiBzdGFydERhdGUuZ2V0VGltZSgpKSB8fA0KICAgICAgICAgICAgICAgICAgKGl0ZW1EYXRlID09PSB0aGlzRGF0ZSAmJiB0aGlzRGF0ZSA8IHN0YXJ0RGF0ZS5nZXRUaW1lKCkpDQogICAgICAgICAgICAgICAgdGhpcy5saXN0Q2FsZW5kYXJzW2VdLndlZWtzW2ZdLmRheXNbaV0uaXNNb3VzZVRvUmlnaHQgPQ0KICAgICAgICAgICAgICAgICAgKGl0ZW1EYXRlID09PSBzdGFydERhdGUuZ2V0VGltZSgpICYmDQogICAgICAgICAgICAgICAgICAgIHRoaXNEYXRlIDwgc3RhcnREYXRlLmdldFRpbWUoKSkgfHwNCiAgICAgICAgICAgICAgICAgIChpdGVtRGF0ZSA9PT0gdGhpc0RhdGUgJiYgdGhpc0RhdGUgPiBzdGFydERhdGUuZ2V0VGltZSgpKQ0KDQogICAgICAgICAgICAgICAgbGV0IGRhdGVEYXkgPQ0KICAgICAgICAgICAgICAgICAgdGhpcy5oZWxwQ2FsZW5kYXIuZ2V0RGF0ZUZyb21Gb3JtYXQoaXRlbS5kYXRlKS5nZXREYXkoKSAtIDENCiAgICAgICAgICAgICAgICBpZiAoZGF0ZURheSA9PT0gLTEpIHsNCiAgICAgICAgICAgICAgICAgIGRhdGVEYXkgPSA2DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgbGV0IGRheU9mV2Vla1N0cmluZyA9IHRoaXMuZkNvbmZpZ3MuZGF5TmFtZXNbZGF0ZURheV0NCiAgICAgICAgICAgICAgICBpZiAoDQogICAgICAgICAgICAgICAgICAhdGhpcy5mQ29uZmlncy5kaXNhYmxlZERheU5hbWVzLmluY2x1ZGVzKGRheU9mV2Vla1N0cmluZykgJiYNCiAgICAgICAgICAgICAgICAgICgoaXRlbURhdGUgPiBzdGFydERhdGUuZ2V0VGltZSgpICYmIGl0ZW1EYXRlIDwgdGhpc0RhdGUpIHx8DQogICAgICAgICAgICAgICAgICAgIChpdGVtRGF0ZSA8IHN0YXJ0RGF0ZS5nZXRUaW1lKCkgJiYgaXRlbURhdGUgPiB0aGlzRGF0ZSkpDQogICAgICAgICAgICAgICAgKSB7DQogICAgICAgICAgICAgICAgICB0aGlzLmxpc3RDYWxlbmRhcnNbZV0ud2Vla3NbZl0uZGF5c1tpXS5pc01hcmtlZCA9IHRydWUNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuY2FsZW5kYXIuZGF0ZVJhbmdlLmVuZCAmJiBpdGVtRGF0ZSA9PT0gdGhpc0RhdGUpIHsNCiAgICAgICAgICAgICAgICAgIHRoaXMubGlzdENhbGVuZGFyc1tlXS53ZWVrc1tmXS5kYXlzW2ldLmlzSG92ZXJlZCA9IGZhbHNlDQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgaWYgKA0KICAgICAgICAgICAgICAgICAgdGhpcy5jaGVja1NlbERhdGVzKA0KICAgICAgICAgICAgICAgICAgICAnbWluJywNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5jYWxlbmRhci5kYXRlUmFuZ2Uuc3RhcnQsDQogICAgICAgICAgICAgICAgICAgIGl0ZW0uZGF0ZSwNCiAgICAgICAgICAgICAgICAgICAgZGF0ZQ0KICAgICAgICAgICAgICAgICAgKQ0KICAgICAgICAgICAgICAgICkgew0KICAgICAgICAgICAgICAgICAgdGhpcy5saXN0Q2FsZW5kYXJzW2VdLndlZWtzW2ZdLmRheXNbaV0uaXNNYXJrZWQgPSB0cnVlDQoNCiAgICAgICAgICAgICAgICAgIGxldCBtaW5EYXRlVG9SaWdodCwgbWluRGF0ZVRvTGVmdA0KICAgICAgICAgICAgICAgICAgbWluRGF0ZVRvTGVmdCA9IG5ldyBEYXRlKHN0YXJ0RGF0ZS5nZXRUaW1lKCkpDQogICAgICAgICAgICAgICAgICBtaW5EYXRlVG9SaWdodCA9IG5ldyBEYXRlKHN0YXJ0RGF0ZS5nZXRUaW1lKCkpDQogICAgICAgICAgICAgICAgICBtaW5EYXRlVG9MZWZ0LnNldERhdGUoDQogICAgICAgICAgICAgICAgICAgIG1pbkRhdGVUb0xlZnQuZ2V0RGF0ZSgpIC0gdGhpcy5mQ29uZmlncy5taW5TZWxEYXlzICsgMQ0KICAgICAgICAgICAgICAgICAgKQ0KICAgICAgICAgICAgICAgICAgbWluRGF0ZVRvUmlnaHQuc2V0RGF0ZSgNCiAgICAgICAgICAgICAgICAgICAgbWluRGF0ZVRvUmlnaHQuZ2V0RGF0ZSgpICsgdGhpcy5mQ29uZmlncy5taW5TZWxEYXlzIC0gMQ0KICAgICAgICAgICAgICAgICAgKQ0KDQogICAgICAgICAgICAgICAgICBpZiAoDQogICAgICAgICAgICAgICAgICAgIHRoaXNEYXRlID49IG1pbkRhdGVUb0xlZnQuZ2V0VGltZSgpICYmDQogICAgICAgICAgICAgICAgICAgIHRoaXMuaGVscENhbGVuZGFyLmZvcm1hdERhdGUobWluRGF0ZVRvTGVmdCkgPT09IGl0ZW0uZGF0ZQ0KICAgICAgICAgICAgICAgICAgKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMubGlzdENhbGVuZGFyc1tlXS53ZWVrc1tmXS5kYXlzW2ldLmlzTWFya2VkID0gZmFsc2UNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5saXN0Q2FsZW5kYXJzW2VdLndlZWtzW2ZdLmRheXNbaV0uaXNNb3VzZVRvTGVmdCA9IHRydWUNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5saXN0Q2FsZW5kYXJzW2VdLndlZWtzW2ZdLmRheXNbaV0uaXNIb3ZlcmVkID0gdHJ1ZQ0KICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICgNCiAgICAgICAgICAgICAgICAgICAgdGhpc0RhdGUgPD0gbWluRGF0ZVRvUmlnaHQuZ2V0VGltZSgpICYmDQogICAgICAgICAgICAgICAgICAgIHRoaXMuaGVscENhbGVuZGFyLmZvcm1hdERhdGUobWluRGF0ZVRvUmlnaHQpID09PSBpdGVtLmRhdGUNCiAgICAgICAgICAgICAgICAgICkgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLmxpc3RDYWxlbmRhcnNbZV0ud2Vla3NbZl0uZGF5c1tpXS5pc01hcmtlZCA9IGZhbHNlDQogICAgICAgICAgICAgICAgICAgIHRoaXMubGlzdENhbGVuZGFyc1tlXS53ZWVrc1tmXS5kYXlzW2ldLmlzTW91c2VUb1JpZ2h0ID0gdHJ1ZQ0KICAgICAgICAgICAgICAgICAgICB0aGlzLmxpc3RDYWxlbmRhcnNbZV0ud2Vla3NbZl0uZGF5c1tpXS5pc0hvdmVyZWQgPSB0cnVlDQogICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgaWYgKA0KICAgICAgICAgICAgICAgICAgdGhpcy5jaGVja1NlbERhdGVzKA0KICAgICAgICAgICAgICAgICAgICAnbWF4JywNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5jYWxlbmRhci5kYXRlUmFuZ2Uuc3RhcnQsDQogICAgICAgICAgICAgICAgICAgIGl0ZW0uZGF0ZSwNCiAgICAgICAgICAgICAgICAgICAgZGF0ZQ0KICAgICAgICAgICAgICAgICAgKQ0KICAgICAgICAgICAgICAgICkgew0KICAgICAgICAgICAgICAgICAgdGhpcy5saXN0Q2FsZW5kYXJzW2VdLndlZWtzW2ZdLmRheXNbaV0uaXNNYXJrZWQgPSBmYWxzZQ0KICAgICAgICAgICAgICAgICAgdGhpcy5saXN0Q2FsZW5kYXJzW2VdLndlZWtzW2ZdLmRheXNbaV0uaXNIb3ZlcmVkID0gZmFsc2UNCiAgICAgICAgICAgICAgICAgIHRoaXMubGlzdENhbGVuZGFyc1tlXS53ZWVrc1tmXS5kYXlzW2ldLmlzTW91c2VUb0xlZnQgPSBmYWxzZQ0KICAgICAgICAgICAgICAgICAgdGhpcy5saXN0Q2FsZW5kYXJzW2VdLndlZWtzW2ZdLmRheXNbaV0uaXNNb3VzZVRvUmlnaHQgPSBmYWxzZQ0KDQogICAgICAgICAgICAgICAgICBsZXQgbWF4RGF0ZVRvTGVmdCwgbWF4RGF0ZVRvUmlnaHQNCiAgICAgICAgICAgICAgICAgIG1heERhdGVUb0xlZnQgPSBuZXcgRGF0ZShzdGFydERhdGUuZ2V0VGltZSgpKQ0KICAgICAgICAgICAgICAgICAgbWF4RGF0ZVRvUmlnaHQgPSBuZXcgRGF0ZShzdGFydERhdGUuZ2V0VGltZSgpKQ0KICAgICAgICAgICAgICAgICAgbWF4RGF0ZVRvTGVmdC5zZXREYXRlKA0KICAgICAgICAgICAgICAgICAgICBtYXhEYXRlVG9MZWZ0LmdldERhdGUoKSAtIHRoaXMuZkNvbmZpZ3MubWF4U2VsRGF5cyArIDENCiAgICAgICAgICAgICAgICAgICkNCiAgICAgICAgICAgICAgICAgIG1heERhdGVUb1JpZ2h0LnNldERhdGUoDQogICAgICAgICAgICAgICAgICAgIG1heERhdGVUb1JpZ2h0LmdldERhdGUoKSArIHRoaXMuZkNvbmZpZ3MubWF4U2VsRGF5cyAtIDENCiAgICAgICAgICAgICAgICAgICkNCg0KICAgICAgICAgICAgICAgICAgaWYgKHRoaXNEYXRlIDw9IG1heERhdGVUb0xlZnQuZ2V0VGltZSgpKSB7DQogICAgICAgICAgICAgICAgICAgIGlmICgNCiAgICAgICAgICAgICAgICAgICAgICB0aGlzLmhlbHBDYWxlbmRhci5mb3JtYXREYXRlKG1heERhdGVUb0xlZnQpID09PSBpdGVtLmRhdGUNCiAgICAgICAgICAgICAgICAgICAgKSB7DQogICAgICAgICAgICAgICAgICAgICAgdGhpcy5saXN0Q2FsZW5kYXJzW2VdLndlZWtzW2ZdLmRheXNbaV0uaXNIb3ZlcmVkID0gdHJ1ZQ0KICAgICAgICAgICAgICAgICAgICAgIHRoaXMubGlzdENhbGVuZGFyc1tlXS53ZWVrc1tmXS5kYXlzWw0KICAgICAgICAgICAgICAgICAgICAgICAgaQ0KICAgICAgICAgICAgICAgICAgICAgIF0uaXNNb3VzZVRvTGVmdCA9IHRydWUNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgICBpZiAodGhpc0RhdGUgPj0gbWF4RGF0ZVRvUmlnaHQuZ2V0VGltZSgpKSB7DQogICAgICAgICAgICAgICAgICAgIGlmICgNCiAgICAgICAgICAgICAgICAgICAgICB0aGlzLmhlbHBDYWxlbmRhci5mb3JtYXREYXRlKG1heERhdGVUb1JpZ2h0KSA9PT0gaXRlbS5kYXRlDQogICAgICAgICAgICAgICAgICAgICkgew0KICAgICAgICAgICAgICAgICAgICAgIHRoaXMubGlzdENhbGVuZGFyc1tlXS53ZWVrc1tmXS5kYXlzW2ldLmlzSG92ZXJlZCA9IHRydWUNCiAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxpc3RDYWxlbmRhcnNbZV0ud2Vla3NbZl0uZGF5c1sNCiAgICAgICAgICAgICAgICAgICAgICAgIGkNCiAgICAgICAgICAgICAgICAgICAgICBdLmlzTW91c2VUb1JpZ2h0ID0gdHJ1ZQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9DQogICAgICBpZiAodGhpcy5jYWxlbmRhci5tdWx0aXBsZURhdGVSYW5nZSkgew0KICAgICAgICBsZXQgcmFuZ2UgPSB0aGlzLmNhbGVuZGFyLm11bHRpcGxlRGF0ZVJhbmdlWw0KICAgICAgICAgIHRoaXMuY2FsZW5kYXIubXVsdGlwbGVEYXRlUmFuZ2UubGVuZ3RoIC0gMQ0KICAgICAgICBdDQogICAgICAgIGlmICghcmFuZ2UpIHJldHVybg0KICAgICAgICAvLyB0aGlzLmNhbGVuZGFyLm11bHRpcGxlRGF0ZVJhbmdlLmZvckVhY2goKHJhbmdlLCBpbmRleCkgPT4gew0KICAgICAgICBpZiAoDQogICAgICAgICAgKHJhbmdlLnN0YXJ0ID09PSAnJyB8fCByYW5nZS5lbmQgPT09ICcnKSAmJg0KICAgICAgICAgIChyYW5nZS5zdGFydCAhPT0gJycgfHwgcmFuZ2UuZW5kICE9PSAnJykNCiAgICAgICAgKSB7DQogICAgICAgICAgZm9yIChsZXQgZSA9IDA7IGUgPCB0aGlzLmxpc3RDYWxlbmRhcnMubGVuZ3RoOyBlKyspIHsNCiAgICAgICAgICAgIGxldCBjYWxlbmRhciA9IHRoaXMubGlzdENhbGVuZGFyc1tlXQ0KDQogICAgICAgICAgICBmb3IgKGxldCBmID0gMDsgZiA8IGNhbGVuZGFyLndlZWtzLmxlbmd0aDsgZisrKSB7DQogICAgICAgICAgICAgIGxldCB3ZWVrID0gY2FsZW5kYXIud2Vla3NbZl0NCg0KICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHdlZWsuZGF5cy5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgICAgIGxldCBpdGVtID0gd2Vlay5kYXlzW2ldDQoNCiAgICAgICAgICAgICAgICB0aGlzLmxpc3RDYWxlbmRhcnNbZV0ud2Vla3NbZl0uZGF5c1tpXS5pc0hvdmVyZWQgPSBmYWxzZQ0KICAgICAgICAgICAgICAgIGlmICgNCiAgICAgICAgICAgICAgICAgIGl0ZW0uZGF0ZSAhPT0gdGhpcy5zdGFydERNWSAmJg0KICAgICAgICAgICAgICAgICAgIXRoaXMuZkNvbmZpZ3MubWFya2VkRGF0ZXMuaW5jbHVkZXMoaXRlbS5kYXRlKQ0KICAgICAgICAgICAgICAgICkgew0KICAgICAgICAgICAgICAgICAgdGhpcy5saXN0Q2FsZW5kYXJzW2VdLndlZWtzW2ZdLmRheXNbaV0uaXNNYXJrZWQgPSBmYWxzZQ0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIGlmIChyYW5nZS5zdGFydCkgew0KICAgICAgICAgICAgICAgICAgbGV0IGl0ZW1EYXRlID0gdGhpcy5oZWxwQ2FsZW5kYXINCiAgICAgICAgICAgICAgICAgICAgLmdldERhdGVGcm9tRm9ybWF0KGl0ZW0uZGF0ZSkNCiAgICAgICAgICAgICAgICAgICAgLmdldFRpbWUoKQ0KDQogICAgICAgICAgICAgICAgICBsZXQgdGhpc0RhdGUgPSB0aGlzLmhlbHBDYWxlbmRhcg0KICAgICAgICAgICAgICAgICAgICAuZ2V0RGF0ZUZyb21Gb3JtYXQoZGF0ZSkNCiAgICAgICAgICAgICAgICAgICAgLmdldFRpbWUoKQ0KICAgICAgICAgICAgICAgICAgbGV0IHN0YXJ0RGF0ZSA9IHRoaXMuaGVscENhbGVuZGFyLmdldERhdGVGcm9tRm9ybWF0KA0KICAgICAgICAgICAgICAgICAgICByYW5nZS5zdGFydA0KICAgICAgICAgICAgICAgICAgKQ0KDQogICAgICAgICAgICAgICAgICB0aGlzLmxpc3RDYWxlbmRhcnNbZV0ud2Vla3NbZl0uZGF5c1tpXS5pc01vdXNlVG9MZWZ0ID0NCiAgICAgICAgICAgICAgICAgICAgKGl0ZW1EYXRlID09PSBzdGFydERhdGUuZ2V0VGltZSgpICYmDQogICAgICAgICAgICAgICAgICAgICAgdGhpc0RhdGUgPiBzdGFydERhdGUuZ2V0VGltZSgpKSB8fA0KICAgICAgICAgICAgICAgICAgICAoaXRlbURhdGUgPT09IHRoaXNEYXRlICYmIHRoaXNEYXRlIDwgc3RhcnREYXRlLmdldFRpbWUoKSkNCiAgICAgICAgICAgICAgICAgIHRoaXMubGlzdENhbGVuZGFyc1tlXS53ZWVrc1tmXS5kYXlzW2ldLmlzTW91c2VUb1JpZ2h0ID0NCiAgICAgICAgICAgICAgICAgICAgKGl0ZW1EYXRlID09PSBzdGFydERhdGUuZ2V0VGltZSgpICYmDQogICAgICAgICAgICAgICAgICAgICAgdGhpc0RhdGUgPCBzdGFydERhdGUuZ2V0VGltZSgpKSB8fA0KICAgICAgICAgICAgICAgICAgICAoaXRlbURhdGUgPT09IHRoaXNEYXRlICYmIHRoaXNEYXRlID4gc3RhcnREYXRlLmdldFRpbWUoKSkNCg0KICAgICAgICAgICAgICAgICAgbGV0IGRhdGVEYXkgPQ0KICAgICAgICAgICAgICAgICAgICB0aGlzLmhlbHBDYWxlbmRhci5nZXREYXRlRnJvbUZvcm1hdChpdGVtLmRhdGUpLmdldERheSgpIC0gMQ0KICAgICAgICAgICAgICAgICAgaWYgKGRhdGVEYXkgPT09IC0xKSB7DQogICAgICAgICAgICAgICAgICAgIGRhdGVEYXkgPSA2DQogICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAgIGxldCBkYXlPZldlZWtTdHJpbmcgPSB0aGlzLmZDb25maWdzLmRheU5hbWVzW2RhdGVEYXldDQogICAgICAgICAgICAgICAgICBpZiAoDQogICAgICAgICAgICAgICAgICAgICF0aGlzLmZDb25maWdzLmRpc2FibGVkRGF5TmFtZXMuaW5jbHVkZXMoZGF5T2ZXZWVrU3RyaW5nKSAmJg0KICAgICAgICAgICAgICAgICAgICAoKGl0ZW1EYXRlID4gc3RhcnREYXRlLmdldFRpbWUoKSAmJiBpdGVtRGF0ZSA8IHRoaXNEYXRlKSB8fA0KICAgICAgICAgICAgICAgICAgICAgIChpdGVtRGF0ZSA8IHN0YXJ0RGF0ZS5nZXRUaW1lKCkgJiYgaXRlbURhdGUgPiB0aGlzRGF0ZSkpDQogICAgICAgICAgICAgICAgICApIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5saXN0Q2FsZW5kYXJzW2VdLndlZWtzW2ZdLmRheXNbaV0uaXNNYXJrZWQgPSB0cnVlDQogICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAgIGlmICghcmFuZ2UuZW5kICYmIGl0ZW1EYXRlID09PSB0aGlzRGF0ZSkgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLmxpc3RDYWxlbmRhcnNbZV0ud2Vla3NbZl0uZGF5c1tpXS5pc0hvdmVyZWQgPSBmYWxzZQ0KICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgICBpZiAodGhpcy5jaGVja1NlbERhdGVzKCdtaW4nLCByYW5nZS5zdGFydCwgaXRlbS5kYXRlLCBkYXRlKSkgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLmxpc3RDYWxlbmRhcnNbZV0ud2Vla3NbZl0uZGF5c1tpXS5pc01hcmtlZCA9IHRydWUNCg0KICAgICAgICAgICAgICAgICAgICBsZXQgbWluRGF0ZVRvUmlnaHQsIG1pbkRhdGVUb0xlZnQNCiAgICAgICAgICAgICAgICAgICAgbWluRGF0ZVRvTGVmdCA9IG5ldyBEYXRlKHN0YXJ0RGF0ZS5nZXRUaW1lKCkpDQogICAgICAgICAgICAgICAgICAgIG1pbkRhdGVUb1JpZ2h0ID0gbmV3IERhdGUoc3RhcnREYXRlLmdldFRpbWUoKSkNCiAgICAgICAgICAgICAgICAgICAgbWluRGF0ZVRvTGVmdC5zZXREYXRlKA0KICAgICAgICAgICAgICAgICAgICAgIG1pbkRhdGVUb0xlZnQuZ2V0RGF0ZSgpIC0gdGhpcy5mQ29uZmlncy5taW5TZWxEYXlzICsgMQ0KICAgICAgICAgICAgICAgICAgICApDQogICAgICAgICAgICAgICAgICAgIG1pbkRhdGVUb1JpZ2h0LnNldERhdGUoDQogICAgICAgICAgICAgICAgICAgICAgbWluRGF0ZVRvUmlnaHQuZ2V0RGF0ZSgpICsgdGhpcy5mQ29uZmlncy5taW5TZWxEYXlzIC0gMQ0KICAgICAgICAgICAgICAgICAgICApDQoNCiAgICAgICAgICAgICAgICAgICAgaWYgKA0KICAgICAgICAgICAgICAgICAgICAgIHRoaXNEYXRlID49IG1pbkRhdGVUb0xlZnQuZ2V0VGltZSgpICYmDQogICAgICAgICAgICAgICAgICAgICAgdGhpcy5oZWxwQ2FsZW5kYXIuZm9ybWF0RGF0ZShtaW5EYXRlVG9MZWZ0KSA9PT0gaXRlbS5kYXRlDQogICAgICAgICAgICAgICAgICAgICkgew0KICAgICAgICAgICAgICAgICAgICAgIHRoaXMubGlzdENhbGVuZGFyc1tlXS53ZWVrc1tmXS5kYXlzW2ldLmlzTWFya2VkID0gZmFsc2UNCiAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxpc3RDYWxlbmRhcnNbZV0ud2Vla3NbZl0uZGF5c1sNCiAgICAgICAgICAgICAgICAgICAgICAgIGkNCiAgICAgICAgICAgICAgICAgICAgICBdLmlzTW91c2VUb0xlZnQgPSB0cnVlDQogICAgICAgICAgICAgICAgICAgICAgdGhpcy5saXN0Q2FsZW5kYXJzW2VdLndlZWtzW2ZdLmRheXNbaV0uaXNIb3ZlcmVkID0gdHJ1ZQ0KICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKA0KICAgICAgICAgICAgICAgICAgICAgIHRoaXNEYXRlIDw9IG1pbkRhdGVUb1JpZ2h0LmdldFRpbWUoKSAmJg0KICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGVscENhbGVuZGFyLmZvcm1hdERhdGUobWluRGF0ZVRvUmlnaHQpID09PSBpdGVtLmRhdGUNCiAgICAgICAgICAgICAgICAgICAgKSB7DQogICAgICAgICAgICAgICAgICAgICAgdGhpcy5saXN0Q2FsZW5kYXJzW2VdLndlZWtzW2ZdLmRheXNbaV0uaXNNYXJrZWQgPSBmYWxzZQ0KICAgICAgICAgICAgICAgICAgICAgIHRoaXMubGlzdENhbGVuZGFyc1tlXS53ZWVrc1tmXS5kYXlzWw0KICAgICAgICAgICAgICAgICAgICAgICAgaQ0KICAgICAgICAgICAgICAgICAgICAgIF0uaXNNb3VzZVRvUmlnaHQgPSB0cnVlDQogICAgICAgICAgICAgICAgICAgICAgdGhpcy5saXN0Q2FsZW5kYXJzW2VdLndlZWtzW2ZdLmRheXNbaV0uaXNIb3ZlcmVkID0gdHJ1ZQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmNoZWNrU2VsRGF0ZXMoJ21heCcsIHJhbmdlLnN0YXJ0LCBpdGVtLmRhdGUsIGRhdGUpKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMubGlzdENhbGVuZGFyc1tlXS53ZWVrc1tmXS5kYXlzW2ldLmlzTWFya2VkID0gZmFsc2UNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5saXN0Q2FsZW5kYXJzW2VdLndlZWtzW2ZdLmRheXNbaV0uaXNIb3ZlcmVkID0gZmFsc2UNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5saXN0Q2FsZW5kYXJzW2VdLndlZWtzW2ZdLmRheXNbaV0uaXNNb3VzZVRvTGVmdCA9IGZhbHNlDQogICAgICAgICAgICAgICAgICAgIHRoaXMubGlzdENhbGVuZGFyc1tlXS53ZWVrc1tmXS5kYXlzWw0KICAgICAgICAgICAgICAgICAgICAgIGkNCiAgICAgICAgICAgICAgICAgICAgXS5pc01vdXNlVG9SaWdodCA9IGZhbHNlDQoNCiAgICAgICAgICAgICAgICAgICAgbGV0IG1heERhdGVUb0xlZnQsIG1heERhdGVUb1JpZ2h0DQogICAgICAgICAgICAgICAgICAgIG1heERhdGVUb0xlZnQgPSBuZXcgRGF0ZShzdGFydERhdGUuZ2V0VGltZSgpKQ0KICAgICAgICAgICAgICAgICAgICBtYXhEYXRlVG9SaWdodCA9IG5ldyBEYXRlKHN0YXJ0RGF0ZS5nZXRUaW1lKCkpDQogICAgICAgICAgICAgICAgICAgIG1heERhdGVUb0xlZnQuc2V0RGF0ZSgNCiAgICAgICAgICAgICAgICAgICAgICBtYXhEYXRlVG9MZWZ0LmdldERhdGUoKSAtIHRoaXMuZkNvbmZpZ3MubWF4U2VsRGF5cyArIDENCiAgICAgICAgICAgICAgICAgICAgKQ0KICAgICAgICAgICAgICAgICAgICBtYXhEYXRlVG9SaWdodC5zZXREYXRlKA0KICAgICAgICAgICAgICAgICAgICAgIG1heERhdGVUb1JpZ2h0LmdldERhdGUoKSArIHRoaXMuZkNvbmZpZ3MubWF4U2VsRGF5cyAtIDENCiAgICAgICAgICAgICAgICAgICAgKQ0KDQogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzRGF0ZSA8PSBtYXhEYXRlVG9MZWZ0LmdldFRpbWUoKSkgew0KICAgICAgICAgICAgICAgICAgICAgIGlmICgNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGVscENhbGVuZGFyLmZvcm1hdERhdGUobWF4RGF0ZVRvTGVmdCkgPT09DQogICAgICAgICAgICAgICAgICAgICAgICBpdGVtLmRhdGUNCiAgICAgICAgICAgICAgICAgICAgICApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubGlzdENhbGVuZGFyc1tlXS53ZWVrc1tmXS5kYXlzW2ldLmlzSG92ZXJlZCA9IHRydWUNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubGlzdENhbGVuZGFyc1tlXS53ZWVrc1tmXS5kYXlzWw0KICAgICAgICAgICAgICAgICAgICAgICAgICBpDQogICAgICAgICAgICAgICAgICAgICAgICBdLmlzTW91c2VUb0xlZnQgPSB0cnVlDQogICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXNEYXRlID49IG1heERhdGVUb1JpZ2h0LmdldFRpbWUoKSkgew0KICAgICAgICAgICAgICAgICAgICAgIGlmICgNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGVscENhbGVuZGFyLmZvcm1hdERhdGUobWF4RGF0ZVRvUmlnaHQpID09PQ0KICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5kYXRlDQogICAgICAgICAgICAgICAgICAgICAgKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxpc3RDYWxlbmRhcnNbZV0ud2Vla3NbZl0uZGF5c1tpXS5pc0hvdmVyZWQgPSB0cnVlDQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxpc3RDYWxlbmRhcnNbZV0ud2Vla3NbZl0uZGF5c1sNCiAgICAgICAgICAgICAgICAgICAgICAgICAgaQ0KICAgICAgICAgICAgICAgICAgICAgICAgXS5pc01vdXNlVG9SaWdodCA9IHRydWUNCiAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgLy8gfSkNCiAgICAgIH0NCiAgICB9LA0KICAgIC8qKg0KICAgICAqIEByZXR1cm4ge2Jvb2xlYW59DQogICAgICovDQogICAgUHJlTW9udGgoY2FsZW5kYXJLZXkgPSBudWxsKSB7DQogICAgICBpZiAoIXRoaXMuYWxsb3dQcmVEYXRlKSByZXR1cm4gZmFsc2UNCg0KICAgICAgdGhpcy50cmFuc2l0aW9uUHJlZml4ID0gJ3JpZ2h0Jw0KDQogICAgICBjYWxlbmRhcktleSA9IGNhbGVuZGFyS2V5ICE9PSBudWxsID8gY2FsZW5kYXJLZXkgOiAwDQoNCiAgICAgIGxldCBjdXJyZW50Q2FsZW5kYXIgPSB0aGlzLmxpc3RDYWxlbmRhcnNbY2FsZW5kYXJLZXldDQogICAgICBjdXJyZW50Q2FsZW5kYXIuZGF0ZSA9IG5ldyBEYXRlKA0KICAgICAgICBjdXJyZW50Q2FsZW5kYXIuZGF0ZS5nZXRGdWxsWWVhcigpLA0KICAgICAgICBjdXJyZW50Q2FsZW5kYXIuZGF0ZS5nZXRNb250aCgpIC0gMQ0KICAgICAgKQ0KICAgICAgY3VycmVudENhbGVuZGFyLmtleSAtPSBoVW5pcXVlSUQoKQ0KICAgICAgdGhpcy51cGRhdGVDYWxlbmRhcigpDQoNCiAgICAgIGlmICghdGhpcy5mQ29uZmlncy5pc1NlcGFyYXRlbHkpIHsNCiAgICAgICAgdGhpcy5jYWxlbmRhci5jdXJyZW50RGF0ZSA9IGN1cnJlbnRDYWxlbmRhci5kYXRlDQogICAgICAgIHRoaXMuaW5pdENhbGVuZGFyKCkNCiAgICAgIH0NCg0KICAgICAgdGhpcy4kZW1pdCgnY2hhbmdlZE1vbnRoJywgY3VycmVudENhbGVuZGFyLmRhdGUpDQogICAgfSwNCiAgICAvKioNCiAgICAgKiBAcmV0dXJuIHtib29sZWFufQ0KICAgICAqLw0KICAgIE5leHRNb250aChjYWxlbmRhcktleSA9IG51bGwpIHsNCiAgICAgIGlmICghdGhpcy5hbGxvd05leHREYXRlKSByZXR1cm4gZmFsc2UNCg0KICAgICAgdGhpcy50cmFuc2l0aW9uUHJlZml4ID0gJ2xlZnQnDQoNCiAgICAgIGNhbGVuZGFyS2V5ID0gY2FsZW5kYXJLZXkgIT09IG51bGwgPyBjYWxlbmRhcktleSA6IDANCg0KICAgICAgbGV0IGN1cnJlbnRDYWxlbmRhciA9IHRoaXMubGlzdENhbGVuZGFyc1tjYWxlbmRhcktleV0NCiAgICAgIGN1cnJlbnRDYWxlbmRhci5kYXRlID0gbmV3IERhdGUoDQogICAgICAgIGN1cnJlbnRDYWxlbmRhci5kYXRlLmdldEZ1bGxZZWFyKCksDQogICAgICAgIGN1cnJlbnRDYWxlbmRhci5kYXRlLmdldE1vbnRoKCkgKyAxDQogICAgICApDQogICAgICBjdXJyZW50Q2FsZW5kYXIua2V5ICs9IGhVbmlxdWVJRCgpDQogICAgICB0aGlzLnVwZGF0ZUNhbGVuZGFyKCkNCg0KICAgICAgaWYgKCF0aGlzLmZDb25maWdzLmlzU2VwYXJhdGVseSkgew0KICAgICAgICB0aGlzLmNhbGVuZGFyLmN1cnJlbnREYXRlID0gY3VycmVudENhbGVuZGFyLmRhdGUNCiAgICAgICAgdGhpcy5pbml0Q2FsZW5kYXIoKQ0KICAgICAgfQ0KDQogICAgICB0aGlzLiRlbWl0KCdjaGFuZ2VkTW9udGgnLCBjdXJyZW50Q2FsZW5kYXIuZGF0ZSkNCiAgICB9LA0KICAgIC8qKg0KICAgICAqIEByZXR1cm4ge2Jvb2xlYW59DQogICAgICovDQogICAgUHJlWWVhcihjYWxlbmRhcktleSA9IG51bGwpIHsNCiAgICAgIGlmICghdGhpcy5hbGxvd1ByZURhdGUpIHJldHVybiBmYWxzZQ0KDQogICAgICBsZXQgc3RlcCA9IHRoaXMuc2hvd1llYXJQaWNrZXIgPyB0aGlzLmZDb25maWdzLmNoYW5nZVllYXJTdGVwIDogMQ0KDQogICAgICBjYWxlbmRhcktleSA9IGNhbGVuZGFyS2V5ICE9PSBudWxsID8gY2FsZW5kYXJLZXkgOiAwDQoNCiAgICAgIGxldCBjdXJyZW50Q2FsZW5kYXIgPSB0aGlzLmxpc3RDYWxlbmRhcnNbY2FsZW5kYXJLZXldDQogICAgICBjdXJyZW50Q2FsZW5kYXIuZGF0ZSA9IG5ldyBEYXRlKA0KICAgICAgICBjdXJyZW50Q2FsZW5kYXIuZGF0ZS5nZXRGdWxsWWVhcigpIC0gc3RlcCwNCiAgICAgICAgY3VycmVudENhbGVuZGFyLmRhdGUuZ2V0TW9udGgoKQ0KICAgICAgKQ0KICAgICAgdGhpcy51cGRhdGVDYWxlbmRhcigpDQoNCiAgICAgIGlmICghdGhpcy5mQ29uZmlncy5pc1NlcGFyYXRlbHkpIHsNCiAgICAgICAgdGhpcy5jYWxlbmRhci5jdXJyZW50RGF0ZSA9IGN1cnJlbnRDYWxlbmRhci5kYXRlDQogICAgICAgIHRoaXMuaW5pdENhbGVuZGFyKCkNCiAgICAgIH0NCg0KICAgICAgdGhpcy4kZW1pdCgnY2hhbmdlZFllYXInLCBjdXJyZW50Q2FsZW5kYXIuZGF0ZSkNCiAgICB9LA0KICAgIC8qKg0KICAgICAqIEByZXR1cm4ge2Jvb2xlYW59DQogICAgICovDQogICAgTmV4dFllYXIoY2FsZW5kYXJLZXkgPSBudWxsKSB7DQogICAgICBpZiAoIXRoaXMuYWxsb3dOZXh0RGF0ZSkgcmV0dXJuIGZhbHNlDQoNCiAgICAgIGxldCBzdGVwID0gdGhpcy5zaG93WWVhclBpY2tlciA/IHRoaXMuZkNvbmZpZ3MuY2hhbmdlWWVhclN0ZXAgOiAxDQoNCiAgICAgIGNhbGVuZGFyS2V5ID0gY2FsZW5kYXJLZXkgIT09IG51bGwgPyBjYWxlbmRhcktleSA6IDANCg0KICAgICAgbGV0IGN1cnJlbnRDYWxlbmRhciA9IHRoaXMubGlzdENhbGVuZGFyc1tjYWxlbmRhcktleV0NCiAgICAgIGN1cnJlbnRDYWxlbmRhci5kYXRlID0gbmV3IERhdGUoDQogICAgICAgIGN1cnJlbnRDYWxlbmRhci5kYXRlLmdldEZ1bGxZZWFyKCkgKyBzdGVwLA0KICAgICAgICBjdXJyZW50Q2FsZW5kYXIuZGF0ZS5nZXRNb250aCgpDQogICAgICApDQogICAgICB0aGlzLnVwZGF0ZUNhbGVuZGFyKCkNCg0KICAgICAgaWYgKCF0aGlzLmZDb25maWdzLmlzU2VwYXJhdGVseSkgew0KICAgICAgICB0aGlzLmNhbGVuZGFyLmN1cnJlbnREYXRlID0gY3VycmVudENhbGVuZGFyLmRhdGUNCiAgICAgICAgdGhpcy5pbml0Q2FsZW5kYXIoKQ0KICAgICAgfQ0KDQogICAgICB0aGlzLiRlbWl0KCdjaGFuZ2VkWWVhcicsIGN1cnJlbnRDYWxlbmRhci5kYXRlKQ0KICAgIH0sDQogICAgQ2hvb3NlRGF0ZShkYXRlKSB7DQogICAgICBsZXQgbmV3RGF0ZSA9IHRoaXMuaGVscENhbGVuZGFyLmdldERhdGVGcm9tRm9ybWF0KGRhdGUpDQoNCiAgICAgIGlmIChkYXRlID09PSAndG9kYXknKSB7DQogICAgICAgIG5ld0RhdGUgPSBuZXcgRGF0ZSgpDQogICAgICB9DQoNCiAgICAgIHRoaXMubGlzdENhbGVuZGFyc1swXS5kYXRlID0gdGhpcy5jYWxlbmRhci5jdXJyZW50RGF0ZSA9IG5ld0RhdGUNCg0KICAgICAgdGhpcy51cGRhdGVDYWxlbmRhcigpDQogICAgICB0aGlzLmluaXRDYWxlbmRhcigpDQogICAgfSwNCiAgICBvcGVuTW9udGhQaWNrZXIoa2V5KSB7DQogICAgICBpZiAodGhpcy5mQ29uZmlncy5jaGFuZ2VNb250aEZ1bmN0aW9uKSB7DQogICAgICAgIHRoaXMuc2hvd01vbnRoUGlja2VyID0ga2V5ID09PSB0aGlzLnNob3dNb250aFBpY2tlciA/IGZhbHNlIDoga2V5DQogICAgICAgIHRoaXMuc2hvd1llYXJQaWNrZXIgPSBmYWxzZQ0KICAgICAgfQ0KICAgIH0sDQogICAgb3BlblllYXJQaWNrZXIoa2V5KSB7DQogICAgICBpZiAodGhpcy5mQ29uZmlncy5jaGFuZ2VZZWFyRnVuY3Rpb24pIHsNCiAgICAgICAgdGhpcy5zaG93WWVhclBpY2tlciA9IGtleSA9PT0gdGhpcy5zaG93WWVhclBpY2tlciA/IGZhbHNlIDoga2V5DQogICAgICAgIHRoaXMuc2hvd01vbnRoUGlja2VyID0gZmFsc2UNCiAgICAgIH0NCiAgICB9LA0KICAgIG9wZW5UaW1lUGlja2VyKCkgew0KICAgICAgdGhpcy5zaG93VGltZVBpY2tlciA9IHRydWUNCiAgICB9LA0KICAgIHBpY2tNb250aChrZXksIGNhbGVuZGFyS2V5KSB7DQogICAgICB0aGlzLnNob3dNb250aFBpY2tlciA9IGZhbHNlDQogICAgICBpZiAoIXRoaXMuaXNTZXBhcmF0ZWx5KSB7DQogICAgICAgIHRoaXMubGlzdENhbGVuZGFycy5mb3JFYWNoKChjdXJyZW50Q2FsZW5kYXIsIGluZGV4KSA9PiB7DQogICAgICAgICAgbGV0IGRhdGUgPSBjdXJyZW50Q2FsZW5kYXIuZGF0ZQ0KICAgICAgICAgIGN1cnJlbnRDYWxlbmRhci5kYXRlID0gbmV3IERhdGUoDQogICAgICAgICAgICBkYXRlLmdldEZ1bGxZZWFyKCksDQogICAgICAgICAgICBrZXkgKyAxICsgaW5kZXgsDQogICAgICAgICAgICAwDQogICAgICAgICAgKQ0KICAgICAgICAgIGN1cnJlbnRDYWxlbmRhci5rZXkgKz0gaFVuaXF1ZUlEKCkNCiAgICAgICAgfSkNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIGxldCBjdXJyZW50Q2FsZW5kYXIgPSB0aGlzLmxpc3RDYWxlbmRhcnNbY2FsZW5kYXJLZXldDQogICAgICAgIGxldCBkYXRlID0gY3VycmVudENhbGVuZGFyLmRhdGUNCiAgICAgICAgY3VycmVudENhbGVuZGFyLmRhdGUgPSBuZXcgRGF0ZShkYXRlLmdldEZ1bGxZZWFyKCksIGtleSArIDEsIDApDQogICAgICAgIGN1cnJlbnRDYWxlbmRhci5rZXkgKz0gaFVuaXF1ZUlEKCkNCiAgICAgIH0NCiAgICAgIHRoaXMudXBkYXRlQ2FsZW5kYXIoKQ0KICAgIH0sDQogICAgcGlja1llYXIoeWVhciwgY2FsZW5kYXJLZXkpIHsNCiAgICAgIHRoaXMuc2hvd1llYXJQaWNrZXIgPSBmYWxzZQ0KICAgICAgaWYgKCF0aGlzLmlzU2VwYXJhdGVseSkgew0KICAgICAgICB0aGlzLmxpc3RDYWxlbmRhcnMuZm9yRWFjaChjdXJyZW50Q2FsZW5kYXIgPT4gew0KICAgICAgICAgIGxldCBkYXRlID0gY3VycmVudENhbGVuZGFyLmRhdGUNCiAgICAgICAgICBjdXJyZW50Q2FsZW5kYXIuZGF0ZSA9IG5ldyBEYXRlKHllYXIsIGRhdGUuZ2V0TW9udGgoKSArIDEsIDApDQogICAgICAgICAgY3VycmVudENhbGVuZGFyLmtleSArPSBoVW5pcXVlSUQoKQ0KICAgICAgICB9KQ0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgbGV0IGN1cnJlbnRDYWxlbmRhciA9IHRoaXMubGlzdENhbGVuZGFyc1tjYWxlbmRhcktleV0NCiAgICAgICAgbGV0IGRhdGUgPSBjdXJyZW50Q2FsZW5kYXIuZGF0ZQ0KICAgICAgICBjdXJyZW50Q2FsZW5kYXIuZGF0ZSA9IG5ldyBEYXRlKHllYXIsIGRhdGUuZ2V0TW9udGgoKSArIDEsIDApDQogICAgICAgIGN1cnJlbnRDYWxlbmRhci5rZXkgKz0gaFVuaXF1ZUlEKCkNCiAgICAgIH0NCiAgICAgIHRoaXMudXBkYXRlQ2FsZW5kYXIoKQ0KICAgIH0sDQogICAgZ2V0WWVhckxpc3QoZGF0ZSwgZGVsdGEpIHsNCiAgICAgIGxldCB5ZWFycyA9IFtdDQogICAgICBsZXQgeWVhciA9IGRhdGUuZ2V0RnVsbFllYXIoKSAtIDQgKyBkZWx0YQ0KICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxMjsgaSsrKSB7DQogICAgICAgIGxldCBmaW5hbFllYXIgPSB5ZWFyICsgaQ0KDQogICAgICAgIHllYXJzLnB1c2goew0KICAgICAgICAgIHllYXI6IGZpbmFsWWVhcg0KICAgICAgICB9KQ0KICAgICAgfQ0KICAgICAgcmV0dXJuIHllYXJzDQogICAgfSwNCiAgICAvKioNCiAgICAgKiBBZGQgZGF0ZSB0byBzZWxlY3RlZERhdGVzIGxpc3QNCiAgICAgKiBAcGFyYW0gaW5kZXgNCiAgICAgKi8NCiAgICBhZGRUb1NlbGVjdGVkRGF0ZXMoKSB7DQogICAgICBpZiAodGhpcy5oZWxwQ2FsZW5kYXIuY2hlY2tWYWxpZERhdGUodGhpcy5jYWxlbmRhci5zZWxlY3RlZERhdGVzSXRlbSkpIHsNCiAgICAgICAgbGV0IGRhdGUgPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLmRlZmF1bHREYXRlRm9ybWF0KQ0KICAgICAgICBkYXRlLmRhdGUgPSB0aGlzLmNhbGVuZGFyLnNlbGVjdGVkRGF0ZXNJdGVtDQogICAgICAgIHRoaXMuY2FsZW5kYXIuc2VsZWN0ZWREYXRlcy5wdXNoKGRhdGUpDQogICAgICAgIHRoaXMuY2FsZW5kYXIuc2VsZWN0ZWREYXRlc0l0ZW0gPSAnJw0KICAgICAgICB0aGlzLm1hcmtDaG9vc2VEYXlzKCkNCiAgICAgIH0NCiAgICB9LA0KICAgIC8qKg0KICAgICAqIFJlbW92ZSBkYXRlIGZyb20gc2VsZWN0ZWREYXRlcyBsaXN0DQogICAgICogQHBhcmFtIGluZGV4DQogICAgICovDQogICAgcmVtb3ZlRnJvbVNlbGVjdGVkRGF0ZXMoaW5kZXgpIHsNCiAgICAgIHRoaXMuY2FsZW5kYXIuc2VsZWN0ZWREYXRlcy5zcGxpY2UoaW5kZXgsIDEpDQogICAgICB0aGlzLm1hcmtDaG9vc2VEYXlzKCkNCiAgICB9LA0KDQogICAgY2hlY2tEYXRlUmFuZ2VFbmQoZGF0ZSkgew0KICAgICAgaWYgKEFycmF5LmlzQXJyYXkodGhpcy5mQ29uZmlncy5tYXJrZWREYXRlUmFuZ2UpKSB7DQogICAgICAgIHJldHVybiAoDQogICAgICAgICAgdGhpcy5mQ29uZmlncy5tYXJrZWREYXRlUmFuZ2UuZmluZEluZGV4KHJhbmdlID0+IHsNCiAgICAgICAgICAgIHJldHVybiByYW5nZS5lbmQgPT09IGRhdGUNCiAgICAgICAgICB9KSAhPT0gLTENCiAgICAgICAgKQ0KICAgICAgfQ0KDQogICAgICByZXR1cm4gZGF0ZSA9PT0gdGhpcy5mQ29uZmlncy5tYXJrZWREYXRlUmFuZ2UuZW5kDQogICAgfSwNCiAgICBjaGVja1NlbERhdGVzKHR5cGUsIHN0YXJ0RGF0ZSwgaXRlbURhdGUsIGhvdmVyRGF0ZSkgew0KICAgICAgbGV0IHN0YXJ0VGltZSA9IHRoaXMuaGVscENhbGVuZGFyLmdldERhdGVGcm9tRm9ybWF0KHN0YXJ0RGF0ZSkuZ2V0VGltZSgpDQogICAgICBsZXQgaXRlbVRpbWUgPSB0aGlzLmhlbHBDYWxlbmRhci5nZXREYXRlRnJvbUZvcm1hdChpdGVtRGF0ZSkuZ2V0VGltZSgpDQogICAgICBsZXQgaG92ZXJUaW1lID0gdGhpcy5oZWxwQ2FsZW5kYXIuZ2V0RGF0ZUZyb21Gb3JtYXQoaG92ZXJEYXRlKS5nZXRUaW1lKCkNCg0KICAgICAgbGV0IGRheXMgPQ0KICAgICAgICB0eXBlID09PSAnbWluJyA/IHRoaXMuZkNvbmZpZ3MubWluU2VsRGF5cyA6IHRoaXMuZkNvbmZpZ3MubWF4U2VsRGF5cyAtIDINCiAgICAgIGxldCBtaW5UaW1lID0gZGF5cyAqIDEwMDAgKiA2MCAqIDYwICogMjQNCiAgICAgIGxldCByaWdodFRpbWUgPSBzdGFydFRpbWUgKyBtaW5UaW1lDQogICAgICBsZXQgbGVmdFRpbWUgPSBzdGFydFRpbWUgLSBtaW5UaW1lDQoNCiAgICAgIGxldCByZXN1bHQNCiAgICAgIGlmIChob3ZlclRpbWUgPiBzdGFydFRpbWUpIHsNCiAgICAgICAgaWYgKHR5cGUgPT09ICdtaW4nKQ0KICAgICAgICAgIHJlc3VsdCA9DQogICAgICAgICAgICBpdGVtVGltZSA8IHJpZ2h0VGltZSAmJg0KICAgICAgICAgICAgaXRlbVRpbWUgPiBzdGFydFRpbWUgJiYNCiAgICAgICAgICAgIHRoaXMuZkNvbmZpZ3MubWluU2VsRGF5cw0KICAgICAgICBlbHNlDQogICAgICAgICAgcmVzdWx0ID0NCiAgICAgICAgICAgIGl0ZW1UaW1lID4gcmlnaHRUaW1lICYmDQogICAgICAgICAgICBpdGVtVGltZSA+IHN0YXJ0VGltZSAmJg0KICAgICAgICAgICAgdGhpcy5mQ29uZmlncy5tYXhTZWxEYXlzDQogICAgICB9IGVsc2UgaWYgKGhvdmVyVGltZSA8IHN0YXJ0VGltZSkgew0KICAgICAgICBpZiAodHlwZSA9PT0gJ21pbicpDQogICAgICAgICAgcmVzdWx0ID0NCiAgICAgICAgICAgIGl0ZW1UaW1lID4gbGVmdFRpbWUgJiYNCiAgICAgICAgICAgIGl0ZW1UaW1lIDwgc3RhcnRUaW1lICYmDQogICAgICAgICAgICB0aGlzLmZDb25maWdzLm1pblNlbERheXMNCiAgICAgICAgZWxzZQ0KICAgICAgICAgIHJlc3VsdCA9DQogICAgICAgICAgICBpdGVtVGltZSA8IGxlZnRUaW1lICYmDQogICAgICAgICAgICBpdGVtVGltZSA8IHN0YXJ0VGltZSAmJg0KICAgICAgICAgICAgdGhpcy5mQ29uZmlncy5tYXhTZWxEYXlzDQogICAgICB9DQoNCiAgICAgIHJldHVybiByZXN1bHQNCiAgICB9LA0KICAgIGNoZWNrTGltaXRzKHZhbHVlKSB7DQogICAgICBpZiAodGhpcy5mQ29uZmlncy5saW1pdHMpIHsNCiAgICAgICAgbGV0IG1pbiA9IG5ldyBEYXRlKA0KICAgICAgICAgIHRoaXMuaGVscENhbGVuZGFyLmdldERhdGVGcm9tRm9ybWF0KHRoaXMuZkNvbmZpZ3MubGltaXRzLm1pbikNCiAgICAgICAgKQ0KICAgICAgICBtaW4uc2V0RGF0ZSgxKQ0KICAgICAgICBtaW4uc2V0SG91cnMoMCwgMCwgMCwgMCkNCiAgICAgICAgbGV0IG1heCA9IG5ldyBEYXRlKA0KICAgICAgICAgIHRoaXMuaGVscENhbGVuZGFyLmdldERhdGVGcm9tRm9ybWF0KHRoaXMuZkNvbmZpZ3MubGltaXRzLm1heCkNCiAgICAgICAgKQ0KICAgICAgICBtYXguc2V0RGF0ZSgxKQ0KICAgICAgICBtYXguc2V0SG91cnMoMCwgMCwgMCwgMCkNCg0KICAgICAgICB0aGlzLmFsbG93UHJlRGF0ZSA9IHRydWUNCiAgICAgICAgdGhpcy5hbGxvd05leHREYXRlID0gdHJ1ZQ0KDQogICAgICAgIGxldCBjdXJyZW50ID0gbmV3IERhdGUodmFsdWUpDQogICAgICAgIGN1cnJlbnQuc2V0RGF0ZSgxKQ0KICAgICAgICBjdXJyZW50LnNldEhvdXJzKDAsIDAsIDAsIDApDQoNCiAgICAgICAgaWYgKGN1cnJlbnQgPD0gbWluKSB7DQogICAgICAgICAgdGhpcy5hbGxvd1ByZURhdGUgPSBmYWxzZQ0KICAgICAgICB9DQoNCiAgICAgICAgaWYgKGN1cnJlbnQgPj0gbWF4KSB7DQogICAgICAgICAgdGhpcy5hbGxvd05leHREYXRlID0gZmFsc2UNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0sDQogICAgZ2V0VHJhbnNpdGlvbl8oKSB7DQogICAgICBpZiAoIXRoaXMuZkNvbmZpZ3MudHJhbnNpdGlvbikgcmV0dXJuICcnDQoNCiAgICAgIGxldCBuYW1lID0gJycNCiAgICAgIGlmICh0aGlzLnRyYW5zaXRpb25QcmVmaXggPT09ICdsZWZ0Jykgew0KICAgICAgICBuYW1lID0gJ3ZmYy1jYWxlbmRhci1zbGlkZS1sZWZ0Jw0KICAgICAgfSBlbHNlIGlmICh0aGlzLnRyYW5zaXRpb25QcmVmaXggPT09ICdyaWdodCcpIHsNCiAgICAgICAgbmFtZSA9ICd2ZmMtY2FsZW5kYXItc2xpZGUtcmlnaHQnDQogICAgICB9DQogICAgICByZXR1cm4gbmFtZQ0KICAgIH0sDQogICAgY2hlY2tIaWRkZW5FbGVtZW50KGVsZW1lbnROYW1lKSB7DQogICAgICByZXR1cm4gIXRoaXMuZkNvbmZpZ3MuaGlkZGVuRWxlbWVudHMuaW5jbHVkZXMoZWxlbWVudE5hbWUpDQogICAgfSwNCiAgICBvbkZvY3VzSW4oKSB7DQogICAgICBpZiAodGhpcy5mQ29uZmlncy5pc01vZGFsKSB7DQogICAgICAgIHRoaXMuc2hvd0NhbGVuZGFyID0gdHJ1ZQ0KICAgICAgfQ0KICAgIH0sDQogICAgb25Gb2N1c091dChlKSB7DQogICAgICBpZiAoDQogICAgICAgIHRoaXMuZkNvbmZpZ3MuaXNNb2RhbCAmJg0KICAgICAgICAhaEVsQ29udGFpbnModGhpcy5wb3BvdmVyRWxlbWVudCwgZS5yZWxhdGVkVGFyZ2V0KQ0KICAgICAgKSB7DQogICAgICAgIHJldHVybiAodGhpcy5zaG93Q2FsZW5kYXIgPSB0aGlzLnNob3dNb250aFBpY2tlciA9IHRoaXMuc2hvd1llYXJQaWNrZXIgPSBmYWxzZSkNCiAgICAgIH0NCiAgICB9LA0KDQogICAgaGlkZU1vbnRoWWVhclBpY2tlcihlKSB7DQogICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7DQogICAgICAgIGlmICh0aGlzLnNob3dNb250aFBpY2tlciB8fCB0aGlzLnNob3dZZWFyUGlja2VyKSB7DQogICAgICAgICAgbGV0IGtleSA9IHRoaXMuc2hvd01vbnRoUGlja2VyDQogICAgICAgICAgICA/IHRoaXMuc2hvd01vbnRoUGlja2VyIC0gMQ0KICAgICAgICAgICAgOiB0aGlzLnNob3dZZWFyUGlja2VyIC0gMQ0KDQogICAgICAgICAgY29uc3QgTVlhY3RpdmUgPSB0aGlzLiRyZWZzLmNhbGVuZGFycy5xdWVyeVNlbGVjdG9yQWxsKA0KICAgICAgICAgICAgYC52ZmMtY29udGVudC1NWS1waWNrZXJgDQogICAgICAgICAgKVtrZXldDQogICAgICAgICAgaWYgKE1ZYWN0aXZlLmNvbnRhaW5zKGUudGFyZ2V0KSkgew0KICAgICAgICAgICAgcmV0dXJuDQogICAgICAgICAgfQ0KICAgICAgICAgIHJldHVybiAodGhpcy5zaG93TW9udGhQaWNrZXIgPSB0aGlzLnNob3dZZWFyUGlja2VyID0gZmFsc2UpDQogICAgICAgIH0NCiAgICAgIH0pDQogICAgfSwNCg0KICAgIGNoZWNrRGF0ZVJhbmdlU3RhcnQoZGF0ZSkgew0KICAgICAgaWYgKEFycmF5LmlzQXJyYXkodGhpcy5mQ29uZmlncy5tYXJrZWREYXRlUmFuZ2UpKSB7DQogICAgICAgIHJldHVybiAoDQogICAgICAgICAgdGhpcy5mQ29uZmlncy5tYXJrZWREYXRlUmFuZ2UuZmluZEluZGV4KHJhbmdlID0+IHsNCiAgICAgICAgICAgIHJldHVybiByYW5nZS5zdGFydCA9PT0gZGF0ZQ0KICAgICAgICAgIH0pICE9PSAtMQ0KICAgICAgICApDQogICAgICB9DQoNCiAgICAgIHJldHVybiBkYXRlID09PSB0aGlzLmZDb25maWdzLm1hcmtlZERhdGVSYW5nZS5zdGFydA0KICAgIH0sDQogICAgY2xlYW5SYW5nZSgpIHsNCiAgICAgIGlmICghdGhpcy5pc011bHRpcGxlRGF0ZVJhbmdlKSB7DQogICAgICAgIHRoaXMuY2FsZW5kYXIuZGF0ZVJhbmdlLmVuZCA9ICcnDQogICAgICAgIHRoaXMuY2FsZW5kYXIuZGF0ZVJhbmdlLnN0YXJ0ID0gJycNCiAgICAgICAgcmV0dXJuDQogICAgICB9DQogICAgICB0aGlzLmNhbGVuZGFyLm11bHRpcGxlRGF0ZVJhbmdlID0gW10NCiAgICAgIC8vIHRoaXMuY2FsZW5kYXIubXVsdGlwbGVEYXRlUmFuZ2UucHVzaCh7DQogICAgICAvLyAgIHN0YXJ0OiAnJywNCiAgICAgIC8vICAgZW5kOiAnJw0KICAgICAgLy8gfSkNCiAgICB9DQogIH0NCn0NCg=="},{"version":3,"sources":["FunctionalCalendar.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"FunctionalCalendar.vue","sourceRoot":"node_modules/vue-functional-calendar/src/components","sourcesContent":["<template>\r\n  <div class=\"vfc-popover-container\" ref=\"popoverElement\" tabindex=\"0\">\r\n    <PickerInputs\r\n      :fConfigs=\"fConfigs\"\r\n      :singleSelectedDate=\"singleSelectedDate\"\r\n      :calendar=\"calendar\"\r\n    >\r\n      <template v-slot:dateRangeInputs=\"props\">\r\n        <slot\r\n          :startDate=\"props.startDate\"\r\n          :endDate=\"props.endDate\"\r\n          :isTypeable=\"fConfigs.isTypeable\"\r\n          name=\"dateRangeInputs\"\r\n        >\r\n        </slot>\r\n      </template>\r\n      <template v-slot:datePickerInput=\"props\">\r\n        <slot\r\n          :selectedDate=\"props.selectedDate\"\r\n          :isTypeable=\"fConfigs.isTypeable\"\r\n          name=\"datePickerInput\"\r\n        >\r\n        </slot>\r\n      </template>\r\n    </PickerInputs>\r\n\r\n    <div\r\n      class=\"vfc-main-container\"\r\n      v-show=\"showCalendar\"\r\n      ref=\"mainContainer\"\r\n      :class=\"{\r\n        'vfc-modal':\r\n          fConfigs.isModal &&\r\n          (fConfigs.isDatePicker ||\r\n            fConfigs.isDateRange ||\r\n            fConfigs.isMultipleDatePicker),\r\n        'vfc-dark': fConfigs.isDark\r\n      }\"\r\n    >\r\n      <time-picker\r\n        v-if=\"showTimePicker\"\r\n        ref=\"timePicker\"\r\n        :height=\"$refs.popoverElement.clientHeight\"\r\n      ></time-picker>\r\n\r\n      <template v-else>\r\n        <div class=\"vfc-calendars-container\">\r\n          <Arrows\r\n            :isMultiple=\"false\"\r\n            :fConfigs=\"fConfigs\"\r\n            :allowPreDate=\"allowPreDate\"\r\n            :allowNextDate=\"allowNextDate\"\r\n          >\r\n            <template v-slot:navigationArrowLeft>\r\n              <slot name=\"navigationArrowLeft\"></slot>\r\n            </template>\r\n            <template v-slot:navigationArrowRight>\r\n              <slot name=\"navigationArrowRight\"></slot>\r\n            </template>\r\n          </Arrows>\r\n\r\n          <div class=\"vfc-calendars\" ref=\"calendars\">\r\n            <div\r\n              class=\"vfc-calendar\"\r\n              v-for=\"(calendarItem, key) in listCalendars\"\r\n              :key=\"calendarItem.key\"\r\n            >\r\n              <month-year-picker\r\n                ref=\"monthContainer\"\r\n                :class=\"'vfc-' + fConfigs.titlePosition\"\r\n                :changeYearStep=\"changeYearStep\"\r\n                v-show=\"\r\n                  showMonthPicker === key + 1 || showYearPicker === key + 1\r\n                \"\r\n                :calendar-key=\"key\"\r\n              >\r\n              </month-year-picker>\r\n              <div class=\"vfc-content\">\r\n                <Arrows\r\n                  :isMultiple=\"true\"\r\n                  :fConfigs=\"fConfigs\"\r\n                  :allowPreDate=\"allowPreDate\"\r\n                  :allowNextDate=\"allowNextDate\"\r\n                  :calendar-key=\"key\"\r\n                >\r\n                  <template v-slot:navigationArrowLeft>\r\n                    <slot name=\"navigationArrowLeft\"></slot>\r\n                  </template>\r\n                  <template v-slot:navigationArrowRight>\r\n                    <slot name=\"navigationArrowRight\"></slot>\r\n                  </template>\r\n                </Arrows>\r\n\r\n                <transition tag=\"div\" :name=\"getTransition_()\" appear>\r\n                  <div\r\n                    class=\"vfc-top-date\"\r\n                    :class=\"'vfc-' + fConfigs.titlePosition\"\r\n                    v-if=\"checkHiddenElement('month')\"\r\n                  >\r\n                    <span\r\n                      @click.prevent=\"\r\n                        isNotSeparatelyAndFirst(key) && openMonthPicker(key + 1)\r\n                      \"\r\n                      :class=\"{\r\n                        'vfc-cursor-pointer vfc-underline':\r\n                          fConfigs.changeMonthFunction &&\r\n                          isNotSeparatelyAndFirst(key),\r\n                        'vfc-underline-active': showMonthPicker === key + 1\r\n                      }\"\r\n                    >\r\n                      {{ calendarItem.month }}</span\r\n                    >\r\n                    <span\r\n                      @click.prevent=\"\r\n                        isNotSeparatelyAndFirst(key) && openYearPicker(key + 1)\r\n                      \"\r\n                      :class=\"{\r\n                        'vfc-cursor-pointer vfc-underline':\r\n                          fConfigs.changeYearFunction &&\r\n                          isNotSeparatelyAndFirst(key),\r\n                        'vfc-underline-active': showYearPicker === key + 1\r\n                      }\"\r\n                    >\r\n                      {{ calendarItem.year }}\r\n                    </span>\r\n                  </div>\r\n                </transition>\r\n                <transition tag=\"div\" :name=\"getTransition_()\" appear>\r\n                  <div class=\"vfc-dayNames\">\r\n                    <span v-if=\"fConfigs.showWeekNumbers\"></span>\r\n                    <span\r\n                      v-for=\"(dayName, dayKey) in fConfigs.dayNames\"\r\n                      :key=\"key + dayKey + 1\"\r\n                      class=\"vfc-day\"\r\n                    >\r\n                      <template v-if=\"checkHiddenElement('dayNames')\">\r\n                        {{ dayName }}\r\n                      </template>\r\n                    </span>\r\n                  </div>\r\n                </transition>\r\n                <transition-group tag=\"div\" :name=\"getTransition_()\" appear>\r\n                  <div\r\n                    class=\"vfc-week\"\r\n                    v-for=\"(week, week_key) in calendarItem.weeks\"\r\n                    :key=\"key + week_key + 1\"\r\n                  >\r\n                    <WeekNumbers\r\n                      v-if=\"showWeekNumbers\"\r\n                      :number=\"week.number\"\r\n                      :borderColor=\"borderColor\"\r\n                    />\r\n                    <Day\r\n                      v-for=\"(day, day_key) in week.days\"\r\n                      ref=\"day\"\r\n                      :key=\"key + week_key + day_key + 1\"\r\n                      :isMultipleDateRange=\"isMultipleDateRange\"\r\n                      :day=\"day\"\r\n                      :fConfigs=\"fConfigs\"\r\n                      :calendar=\"calendar\"\r\n                      :helpCalendar=\"helpCalendar\"\r\n                      :week=\"week\"\r\n                      :day_key=\"day_key\"\r\n                      @dayMouseOver=\"dayMouseOver\"\r\n                    >\r\n                      <template v-slot:default=\"props\">\r\n                        <slot :week=\"props.week\" :day=\"props.day\"></slot>\r\n                      </template>\r\n                    </Day>\r\n                  </div>\r\n                  <template\r\n                    v-if=\"\r\n                      calendarItem.weeks.length < 6 &&\r\n                        !fConfigs.isLayoutExpandable\r\n                    \"\r\n                  >\r\n                    <!-- stabilizator -->\r\n                    <div\r\n                      style=\"height: 32.6px\"\r\n                      v-for=\"moreWeekKey in 6 - calendarItem.weeks.length\"\r\n                      :key=\"key + moreWeekKey + 'moreWeek'\"\r\n                    >\r\n                      &nbsp;\r\n                    </div>\r\n                  </template>\r\n                </transition-group>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <Footer v-if=\"canClearRange || $slots['footer']\">\r\n            <template v-slot:footer>\r\n              <div @click=\"cleanRange\">\r\n                <slot name=\"cleaner\">\r\n                  <div\r\n                    v-if=\"canClearRange && fConfigs.isDateRange\"\r\n                    class=\"rangeCleaner\"\r\n                  >\r\n                    <span\r\n                      :class=\"[rangeIsSelected ? 'active' : 'disabled']\"\r\n                      @click=\"cleanRange\"\r\n                      >Clear Range{{ isMultipleDateRange && 's' }}</span\r\n                    >\r\n                  </div>\r\n                </slot>\r\n              </div>\r\n              <slot name=\"footer\"></slot>\r\n            </template>\r\n            <!-- <span>&nbsp;</span> -->\r\n          </Footer>\r\n        </div>\r\n      </template>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport helpCalendarClass from '../assets/js/helpCalendar'\r\nimport { propsAndData } from '../mixins/propsAndData'\r\nimport TimePicker from '../components/TimePicker'\r\nimport Arrows from '../components/Arrows'\r\nimport WeekNumbers from '../components/WeekNumbers'\r\nimport Day from '../components/Day'\r\nimport MonthYearPicker from '../components/MonthYearPicker'\r\nimport PickerInputs from '../components/PickerInputs'\r\nimport Footer from '../components/Footer'\r\n\r\nimport { hElContains, hUniqueID } from '../utils/helpers'\r\n// import calendarMethods from '../utils/calendarMethods'\r\n\r\nexport default {\r\n  name: 'FunctionalCalendar',\r\n  components: {\r\n    MonthYearPicker,\r\n    TimePicker,\r\n    PickerInputs,\r\n    Arrows,\r\n    Footer,\r\n    Day,\r\n    WeekNumbers\r\n  },\r\n  mixins: [propsAndData],\r\n  computed: {\r\n    startDMY() {\r\n      //start only with Day Month and Year\r\n      if (this.calendar.dateRange.start) {\r\n        return this.calendar.dateRange.start.split(' ')[0]\r\n      }\r\n      return ''\r\n    },\r\n    endDMY() {\r\n      //end only with Day Month and Year\r\n      if (this.calendar.dateRange.end) {\r\n        return this.calendar.dateRange.end.split(' ')[0]\r\n      }\r\n      return ''\r\n    },\r\n    rangeIsSelected() {\r\n      if (!this.isMultipleDateRange)\r\n        return !!(this.calendar.dateRange.end && this.calendar.dateRange.start)\r\n      return this.calendar.multipleDateRange.length > 0\r\n    },\r\n    helpCalendar() {\r\n      return new helpCalendarClass(\r\n        this.fConfigs.sundayStart,\r\n        this.checkHiddenElement('leftAndRightDays'),\r\n        this.fConfigs.dateFormat,\r\n        this.fConfigs.dayNames\r\n      )\r\n    },\r\n    singleSelectedDate: {\r\n      get() {\r\n        let res = ''\r\n        if (this.displayTimeInput) {\r\n          const validFormats = [\r\n            'HH:MM',\r\n            'HH:mm',\r\n            'hh:MM',\r\n            'hh:mm',\r\n            'MM:HH',\r\n            'mm:HH',\r\n            'MM:hh',\r\n            'mm:hh'\r\n          ]\r\n          let format = this.fConfigs.dateFormat\r\n          if (this.dateFormat) {\r\n            format = this.dateFormat\r\n          }\r\n          if (validFormats.indexOf(format.split(' ')[1]) > 3) {\r\n            res +=\r\n              ' ' +\r\n              [this.calendar.selectedHour, this.calendar.selectedMinute]\r\n                .reverse()\r\n                .join(':')\r\n          } else {\r\n            res +=\r\n              ' ' +\r\n              [this.calendar.selectedHour, this.calendar.selectedMinute].join(\r\n                ':'\r\n              )\r\n          }\r\n        }\r\n\r\n        return this.calendar.selectedDate\r\n          ? this.calendar.selectedDate + res\r\n          : ''\r\n      },\r\n      set(newValue) {\r\n        newValue = this.helpCalendar.mask(newValue)\r\n        if (this.helpCalendar.getDateFromFormat(newValue).getMonth()) {\r\n          this.calendar.selectedDate = newValue\r\n        }\r\n      }\r\n    }\r\n  },\r\n  created() {\r\n    this.setConfigs()\r\n    this.initCalendar()\r\n  },\r\n  mounted() {\r\n    //show time placeholder\r\n    if (this.displayTimeInput) {\r\n      const timeFormat = this.fConfigs.placeholder.split(' ')[1]\r\n      if (!timeFormat) {\r\n        this.fConfigs.placeholder += ' hh:mm'\r\n      }\r\n    }\r\n\r\n    this.popoverElement = this.$refs.popoverElement\r\n    // Event\r\n    this.popoverElement.addEventListener('focusin', this.onFocusIn)\r\n    this.popoverElement.addEventListener('focusout', this.onFocusOut)\r\n    window.addEventListener('click', this.hideMonthYearPicker, {\r\n      capture: true\r\n    })\r\n\r\n    // Reacts to external selected dates\r\n    this.$watch(\r\n      'value',\r\n      function(value) {\r\n        if (\r\n          typeof value === 'object' &&\r\n          (value.hasOwnProperty('dateRange') ||\r\n            value.hasOwnProperty('selectedDate'))\r\n        ) {\r\n          this.calendar = value\r\n        } else if (\r\n          typeof value === 'object' &&\r\n          value.hasOwnProperty('multipleDateRange')\r\n        ) {\r\n          this.calendar.multipleDateRange = value.multipleDateRange\r\n          const lastElement = this.calendar.multipleDateRange[\r\n            Math.max(0, this.calendar.multipleDateRange.length - 1)\r\n          ]\r\n          if (\r\n            lastElement &&\r\n            ((lastElement.start && !lastElement.end) ||\r\n              (!lastElement.start && lastElement.end))\r\n          ) {\r\n            throw new Error('Invalid Data Range')\r\n          }\r\n        }\r\n      },\r\n      { immediate: true, deep: true }\r\n    )\r\n\r\n    this.$watch(\r\n      'showCalendar',\r\n      function(value) {\r\n        if (value) this.$emit('opened')\r\n        else this.$emit('closed')\r\n      },\r\n      { immediate: true, deep: true }\r\n    )\r\n  },\r\n  beforeDestroy: function() {\r\n    window.removeEventListener('focusin', this.onFocusIn)\r\n    window.removeEventListener('focusout', this.onFocusOut)\r\n    window.removeEventListener('click', this.hideMonthYearPicker)\r\n  },\r\n  watch: {\r\n    fConfigs: {\r\n      handler() {\r\n        this.markChooseDays()\r\n      },\r\n      deep: true,\r\n      immediate: true\r\n    },\r\n    calendar: {\r\n      handler() {\r\n        this.markChooseDays()\r\n      },\r\n      deep: true,\r\n      immediate: true\r\n    },\r\n    'calendar.currentDate': {\r\n      handler(value) {\r\n        this.$emit('input', this.calendar)\r\n        this.checkLimits(value)\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    initCalendar() {\r\n      this.setCalendarData()\r\n      this.listRendering()\r\n      this.markChooseDays()\r\n      this.checkLimits(this.calendar.currentDate)\r\n    },\r\n    updateCalendar() {\r\n      this.setExistingCalendarData()\r\n      this.listRendering()\r\n      this.markChooseDays()\r\n    },\r\n    isNotSeparatelyAndFirst(key) {\r\n      return this.isSeparately || key == 0\r\n    },\r\n    setCalendarData() {\r\n      let date = this.calendar.currentDate\r\n      date = new Date(date.getFullYear(), date.getMonth() - 1)\r\n\r\n      this.listCalendars = []\r\n\r\n      for (let i = 0; i < this.fConfigs.calendarsCount; i++) {\r\n        date = new Date(date.getFullYear(), date.getMonth() + 1)\r\n\r\n        let calendar = {\r\n          key: i + hUniqueID(),\r\n          date: date,\r\n          dateTop: `${\r\n            this.fConfigs.monthNames[date.getMonth()]\r\n          } ${date.getFullYear()}`,\r\n          month: this.fConfigs.monthNames[date.getMonth()],\r\n          year: date.getFullYear(),\r\n          weeks: this.helpCalendar.getFinalizedWeeks(\r\n            date.getMonth(),\r\n            date.getFullYear()\r\n          )\r\n        }\r\n\r\n        this.listCalendars.push(calendar)\r\n\r\n        if (!this.fConfigs.isMultiple) {\r\n          break\r\n        }\r\n      }\r\n    },\r\n    setExistingCalendarData() {\r\n      for (let i = 0; i < this.listCalendars.length; i++) {\r\n        let calendar = this.listCalendars[i]\r\n        let date = calendar.date\r\n\r\n        this.$set(this.listCalendars, i, {\r\n          key: calendar.key,\r\n          date: date,\r\n          dateTop: `${\r\n            this.fConfigs.monthNames[date.getMonth()]\r\n          } ${date.getFullYear()}`,\r\n          month: this.fConfigs.monthNames[date.getMonth()],\r\n          year: date.getFullYear(),\r\n          weeks: this.helpCalendar.getFinalizedWeeks(\r\n            date.getMonth(),\r\n            date.getFullYear()\r\n          )\r\n        })\r\n\r\n        if (!this.fConfigs.isMultiple) {\r\n          break\r\n        }\r\n      }\r\n    },\r\n    setConfigs() {\r\n      let globalOptions\r\n      if (typeof this.$getOptions !== 'undefined') {\r\n        // Global Options\r\n        globalOptions = this.$getOptions()\r\n        Object.keys(globalOptions).forEach(objectKey => {\r\n          if (typeof this.fConfigs[objectKey] !== 'undefined') {\r\n            this.$set(this.fConfigs, objectKey, globalOptions[objectKey])\r\n          }\r\n        })\r\n      }\r\n\r\n      if (typeof this.configs !== 'undefined') {\r\n        Object.keys(this.fConfigs).forEach(objectKey => {\r\n          if (typeof this.configs[objectKey] !== 'undefined') {\r\n            // Get From Configs\r\n            this.$set(this.fConfigs, objectKey, this.configs[objectKey])\r\n          }\r\n        })\r\n      } else {\r\n        Object.keys(this.$props).forEach(objectKey => {\r\n          if (\r\n            typeof this.fConfigs[objectKey] !== 'undefined' &&\r\n            typeof this.$props[objectKey] !== 'undefined'\r\n          ) {\r\n            this.$set(this.fConfigs, objectKey, this.$props[objectKey])\r\n          }\r\n        })\r\n      }\r\n\r\n      // Is Modal\r\n      if (this.fConfigs.isModal) this.showCalendar = false\r\n\r\n      // Placeholder\r\n      if (!this.fConfigs.placeholder)\r\n        this.fConfigs.placeholder = this.fConfigs.dateFormat\r\n\r\n      if (typeof this.newCurrentDate !== 'undefined') {\r\n        this.calendar.currentDate = this.newCurrentDate\r\n      }\r\n\r\n      // Sunday Start\r\n      if (this.fConfigs.sundayStart) {\r\n        let dayNames = [...this.fConfigs.dayNames]\r\n        let sundayName = dayNames[dayNames.length - 1]\r\n        dayNames.splice(dayNames.length - 1, 1)\r\n        dayNames.unshift(sundayName)\r\n        this.fConfigs.dayNames = dayNames\r\n      }\r\n    },\r\n    listRendering() {\r\n      // Each Calendars\r\n      this.listCalendars.forEach(calendar => {\r\n        // Set Calendar Weeks\r\n        calendar.weeks.forEach(week => {\r\n          let finalizedDays = []\r\n\r\n          week.days.forEach(day => {\r\n            let date = new Date(day.year, day.month, day.day)\r\n            let now = new Date()\r\n\r\n            let isToday = false\r\n\r\n            date.setHours(0, 0, 0, 0)\r\n            now.setHours(0, 0, 0, 0)\r\n\r\n            if (date.getTime() === now.getTime()) {\r\n              isToday = true\r\n            }\r\n\r\n            let checkMarked\r\n            // With Custom Classes\r\n            if (typeof this.fConfigs.markedDates[0] === 'object') {\r\n              checkMarked = this.fConfigs.markedDates.find(markDate => {\r\n                return markDate.date === this.helpCalendar.formatDate(date)\r\n              })\r\n            } else {\r\n              // Without Classes\r\n              checkMarked = this.fConfigs.markedDates.find(markDate => {\r\n                return markDate === this.helpCalendar.formatDate(date)\r\n              })\r\n            }\r\n\r\n            if (this.startDMY === this.helpCalendar.formatDate(date)) {\r\n              checkMarked = true\r\n            }\r\n\r\n            let isMarked = false\r\n            if (typeof checkMarked !== 'undefined') {\r\n              isMarked = true\r\n            }\r\n\r\n            finalizedDays.push({\r\n              day: day.day,\r\n              date: this.helpCalendar.formatDate(date),\r\n              hide: day.hide,\r\n              isMouseToLeft: false,\r\n              isMouseToRight: false,\r\n              isHovered: false,\r\n              isDateRangeStart: this.checkDateRangeStart(\r\n                this.helpCalendar.formatDate(date)\r\n              ),\r\n              isDateRangeEnd: this.checkDateRangeEnd(\r\n                this.helpCalendar.formatDate(date)\r\n              ),\r\n              hideLeftAndRightDays: day.hideLeftAndRightDays,\r\n              isToday,\r\n              isMarked\r\n            })\r\n          })\r\n\r\n          week.days = finalizedDays\r\n        })\r\n      })\r\n    },\r\n    clickDay(item, isDisabledDate) {\r\n      if (this.fConfigs.withTimePicker && this.fConfigs.isDateRange) {\r\n        item.date = item.date + ' 00:00'\r\n      }\r\n      this.$emit('dayClicked', item)\r\n\r\n      if (\r\n        !this.fConfigs.isDateRange &&\r\n        !this.fConfigs.isDatePicker &&\r\n        !this.fConfigs.isMultipleDatePicker\r\n      ) {\r\n        return false\r\n      }\r\n\r\n      //Disabled Dates - Start\r\n\r\n      // Disable days of week if set in configuration\r\n      let dateDay = this.helpCalendar.getDateFromFormat(item.date).getDay() - 1\r\n      if (dateDay === -1) {\r\n        dateDay = 6\r\n      }\r\n\r\n      let dayOfWeekString = this.fConfigs.dayNames[dateDay]\r\n      if (\r\n        this.fConfigs.disabledDayNames.includes(dayOfWeekString) ||\r\n        isDisabledDate(item.date)\r\n      ) {\r\n        return false\r\n      }\r\n\r\n      //Disabled Dates - End\r\n\r\n      // Limits\r\n      if (this.fConfigs.limits) {\r\n        let min = this.helpCalendar\r\n          .getDateFromFormat(this.fConfigs.limits.min)\r\n          .getTime()\r\n        let max = this.helpCalendar\r\n          .getDateFromFormat(this.fConfigs.limits.max)\r\n          .getTime()\r\n        let date = this.helpCalendar.getDateFromFormat(item.date).getTime()\r\n\r\n        if (date < min || date > max) {\r\n          return false\r\n        }\r\n      }\r\n\r\n      // Date Multiple Range\r\n      if (this.fConfigs.isMultipleDateRange) {\r\n        let clickDate = this.helpCalendar\r\n          .getDateFromFormat(item.date.split(' ')[0])\r\n          .getTime()\r\n        let rangesLength = this.calendar.multipleDateRange.length\r\n        let lastRange = this.calendar.multipleDateRange[rangesLength - 1]\r\n        let startDate = ''\r\n        // if (lastRange) {\r\n        //   // if (lastRange.start && lastRange.end)\r\n        // } else\r\n\r\n        if (!lastRange) {\r\n          this.calendar.multipleDateRange.push({ end: '', start: '' })\r\n          rangesLength = this.calendar.multipleDateRange.length\r\n          lastRange = this.calendar.multipleDateRange[rangesLength - 1]\r\n        }\r\n\r\n        if (lastRange.start) {\r\n          startDate = this.helpCalendar.getDateFromFormat(lastRange.start)\r\n        }\r\n\r\n        // Two dates is not empty\r\n        if (lastRange.start !== '' && lastRange.end !== '') {\r\n          this.calendar.multipleDateRange.push({ end: '', start: item.date })\r\n          // lastRange.start = item.date\r\n          // lastRange.end = ''\r\n          // Not date selected\r\n        } else if (lastRange.start === '' && lastRange.end === '') {\r\n          lastRange.start = item.date\r\n          // Start Date not empty, chose date > start date\r\n        } else if (lastRange.end === '' && clickDate > startDate.getTime()) {\r\n          lastRange.end = item.date\r\n          // Start date not empty, chose date <= start date (also same date range select)\r\n        } else if (lastRange.start !== '' && clickDate <= startDate.getTime()) {\r\n          this.$nextTick(() => {\r\n            if (this.calendar.withTimePicker) {\r\n              this.$refs['timePicker'].startDateActive = true\r\n            }\r\n          })\r\n          lastRange.end = lastRange.start\r\n          lastRange.start = item.date\r\n        }\r\n\r\n        //Get number of days between date range dates\r\n        if (lastRange.start !== '' && lastRange.end !== '') {\r\n          let oneDay = 24 * 60 * 60 * 1000\r\n          let firstDate = this.helpCalendar.getDateFromFormat(lastRange.start)\r\n          let secondDate = this.helpCalendar.getDateFromFormat(lastRange.end)\r\n          let diffDays = Math.round(\r\n            Math.abs((firstDate.getTime() - secondDate.getTime()) / oneDay)\r\n          )\r\n          let itemTime = this.helpCalendar\r\n            .getDateFromFormat(item.date)\r\n            .getTime()\r\n\r\n          this.$emit('selectedDaysCount', diffDays)\r\n\r\n          // Is Auto Closeable\r\n          if (this.fConfigs.isModal && this.fConfigs.isAutoCloseable) {\r\n            this.showCalendar = false\r\n          }\r\n\r\n          // Minimum Selected Days\r\n          let minSelDays = this.fConfigs.minSelDays\r\n\r\n          if (\r\n            minSelDays &&\r\n            itemTime >= startDate.getTime() &&\r\n            diffDays < minSelDays\r\n          ) {\r\n            startDate.setDate(startDate.getDate() + (minSelDays - 1))\r\n            lastRange.end = this.helpCalendar.formatDate(startDate)\r\n          }\r\n\r\n          if (\r\n            minSelDays &&\r\n            itemTime < startDate.getTime() &&\r\n            diffDays < minSelDays\r\n          ) {\r\n            startDate.setDate(startDate.getDate() - (minSelDays - 1))\r\n            lastRange.start = this.helpCalendar.formatDate(startDate)\r\n          }\r\n\r\n          // Maximum Selected Days\r\n          let maxSelDays = this.fConfigs.maxSelDays\r\n\r\n          if (\r\n            maxSelDays &&\r\n            itemTime >= startDate.getTime() &&\r\n            diffDays >= maxSelDays\r\n          ) {\r\n            startDate.setDate(startDate.getDate() + (maxSelDays - 1))\r\n            lastRange.end = this.helpCalendar.formatDate(startDate)\r\n          }\r\n\r\n          if (\r\n            maxSelDays &&\r\n            itemTime < startDate.getTime() &&\r\n            diffDays >= maxSelDays\r\n          ) {\r\n            startDate.setDate(startDate.getDate() - (maxSelDays - 1))\r\n            lastRange.start = this.helpCalendar.formatDate(startDate)\r\n          }\r\n        }\r\n\r\n        this.$emit('input', this.calendar)\r\n      } // Date Range\r\n      else if (this.fConfigs.isDateRange) {\r\n        let clickDate = this.helpCalendar\r\n          .getDateFromFormat(item.date.split(' ')[0])\r\n          .getTime()\r\n\r\n        let startDate = ''\r\n        if (this.calendar.dateRange.start) {\r\n          startDate = this.helpCalendar.getDateFromFormat(\r\n            this.calendar.dateRange.start\r\n          )\r\n        }\r\n\r\n        // Two dates is not empty\r\n        if (\r\n          this.calendar.dateRange.start !== '' &&\r\n          this.calendar.dateRange.end !== ''\r\n        ) {\r\n          this.calendar.dateRange.start = item.date\r\n          this.calendar.dateRange.end = ''\r\n          // Not date selected\r\n        } else if (\r\n          this.calendar.dateRange.start === '' &&\r\n          this.calendar.dateRange.end === ''\r\n        ) {\r\n          this.calendar.dateRange.start = item.date\r\n          // Start Date not empty, chose date > start date\r\n        } else if (\r\n          this.calendar.dateRange.end === '' &&\r\n          clickDate > startDate.getTime()\r\n        ) {\r\n          this.calendar.dateRange.end = item.date\r\n          // Start date not empty, chose date <= start date (also same date range select)\r\n        } else if (\r\n          this.calendar.dateRange.start !== '' &&\r\n          clickDate <= startDate.getTime()\r\n        ) {\r\n          this.$nextTick(() => {\r\n            if (this.calendar.dateRange && this.calendar.withTimePicker) {\r\n              this.$refs['timePicker'].startDateActive = true\r\n            }\r\n          })\r\n          this.calendar.dateRange.end = this.calendar.dateRange.start\r\n          this.calendar.dateRange.start = item.date\r\n        }\r\n\r\n        //Get number of days between date range dates\r\n        if (\r\n          this.calendar.dateRange.start !== '' &&\r\n          this.calendar.dateRange.end !== ''\r\n        ) {\r\n          let oneDay = 24 * 60 * 60 * 1000\r\n          let firstDate = this.helpCalendar.getDateFromFormat(\r\n            this.calendar.dateRange.start\r\n          )\r\n          let secondDate = this.helpCalendar.getDateFromFormat(\r\n            this.calendar.dateRange.end\r\n          )\r\n          let diffDays = Math.round(\r\n            Math.abs((firstDate.getTime() - secondDate.getTime()) / oneDay)\r\n          )\r\n          let itemTime = this.helpCalendar\r\n            .getDateFromFormat(item.date)\r\n            .getTime()\r\n\r\n          this.$emit('selectedDaysCount', diffDays)\r\n\r\n          // Is Auto Closeable\r\n          if (this.fConfigs.isModal && this.fConfigs.isAutoCloseable) {\r\n            this.showCalendar = false\r\n          }\r\n\r\n          // Minimum Selected Days\r\n          let minSelDays = this.fConfigs.minSelDays\r\n\r\n          if (\r\n            minSelDays &&\r\n            itemTime >= startDate.getTime() &&\r\n            diffDays < minSelDays\r\n          ) {\r\n            startDate.setDate(startDate.getDate() + (minSelDays - 1))\r\n            this.calendar.dateRange.end = this.helpCalendar.formatDate(\r\n              startDate\r\n            )\r\n          }\r\n\r\n          if (\r\n            minSelDays &&\r\n            itemTime < startDate.getTime() &&\r\n            diffDays < minSelDays\r\n          ) {\r\n            startDate.setDate(startDate.getDate() - (minSelDays - 1))\r\n            this.calendar.dateRange.start = this.helpCalendar.formatDate(\r\n              startDate\r\n            )\r\n          }\r\n\r\n          // Maximum Selected Days\r\n          let maxSelDays = this.fConfigs.maxSelDays\r\n\r\n          if (\r\n            maxSelDays &&\r\n            itemTime >= startDate.getTime() &&\r\n            diffDays >= maxSelDays\r\n          ) {\r\n            startDate.setDate(startDate.getDate() + (maxSelDays - 1))\r\n            this.calendar.dateRange.end = this.helpCalendar.formatDate(\r\n              startDate\r\n            )\r\n          }\r\n\r\n          if (\r\n            maxSelDays &&\r\n            itemTime < startDate.getTime() &&\r\n            diffDays >= maxSelDays\r\n          ) {\r\n            startDate.setDate(startDate.getDate() - (maxSelDays - 1))\r\n            this.calendar.dateRange.start = this.helpCalendar.formatDate(\r\n              startDate\r\n            )\r\n          }\r\n        }\r\n\r\n        this.$emit('input', this.calendar)\r\n      } else if (this.fConfigs.isDatePicker) {\r\n        this.calendar.selectedDate = item.date\r\n        this.$emit('input', this.calendar)\r\n\r\n        // Is Auto Closeable\r\n        if (this.fConfigs.isModal && this.fConfigs.isAutoCloseable) {\r\n          this.showCalendar = false\r\n        }\r\n      } else if (this.fConfigs.isMultipleDatePicker) {\r\n        if (\r\n          this.calendar.hasOwnProperty('selectedDates') &&\r\n          this.calendar.selectedDates.find(date => date.date === item.date)\r\n        ) {\r\n          let dateIndex = this.calendar.selectedDates.findIndex(\r\n            date => date.date === item.date\r\n          )\r\n          this.calendar.selectedDates.splice(dateIndex, 1)\r\n        } else {\r\n          let date = Object.assign({}, this.defaultDateFormat)\r\n          date.date = item.date\r\n\r\n          if (!this.calendar.hasOwnProperty('selectedDates')) {\r\n            this.calendar.selectedDates = []\r\n          }\r\n\r\n          this.calendar.selectedDates.push(date)\r\n        }\r\n\r\n        this.$emit('input', this.calendar)\r\n      }\r\n\r\n      this.markChooseDays()\r\n\r\n      // Time Picker\r\n      if (this.fConfigs.withTimePicker) {\r\n        if (this.fConfigs.isDateRange || this.fConfigs.isDatePicker) {\r\n          this.openTimePicker()\r\n        }\r\n\r\n        if (\r\n          this.calendar.selectedDates.find(date => date.date === item.date) &&\r\n          this.fConfigs.isMultipleDatePicker\r\n        ) {\r\n          this.openTimePicker()\r\n        }\r\n      }\r\n\r\n      this.$emit('choseDay', item)\r\n    },\r\n    markChooseDays() {\r\n      let startDate = this.startDMY\r\n      let endDate = this.endDMY\r\n      this.listCalendars.forEach(calendar => {\r\n        calendar.weeks.forEach(week => {\r\n          week.days.forEach(day => {\r\n            day.isMarked = false\r\n            day.date = day.date.split(' ')[0]\r\n            // Date Picker\r\n            if (this.fConfigs.isDatePicker) {\r\n              if (this.calendar.selectedDate === day.date) day.isMarked = true\r\n            } else if (this.fConfigs.isMultipleDatePicker) {\r\n              if (\r\n                this.calendar.hasOwnProperty('selectedDates') &&\r\n                this.calendar.selectedDates.find(date => date.date === day.date)\r\n              )\r\n                day.isMarked = true\r\n            } else {\r\n              day.isMouseToLeft = false\r\n              day.isMouseToRight = false\r\n              // Date Range\r\n              if (startDate === day.date) {\r\n                day.isMouseToLeft = !!endDate\r\n                day.isMarked = true\r\n              }\r\n\r\n              if (endDate === day.date) {\r\n                day.isMouseToRight = !!endDate\r\n                day.isMarked = true\r\n              }\r\n              //Multiple Range\r\n              if (this.calendar.multipleDateRange) {\r\n                if (\r\n                  ~this.calendar.multipleDateRange\r\n                    .map(range => range.start.split(' ')[0])\r\n                    .indexOf(day.date)\r\n                ) {\r\n                  day.isMouseToLeft = !!endDate\r\n                  day.isMarked = true\r\n                }\r\n                if (\r\n                  ~this.calendar.multipleDateRange\r\n                    .map(range => range.end.split(' ')[0])\r\n                    .indexOf(day.date)\r\n                ) {\r\n                  day.isMouseToRight = !!endDate\r\n                  day.isMarked = true\r\n                }\r\n                this.calendar.multipleDateRange.forEach(range => {\r\n                  if (range.start && range.start === range.end) {\r\n                    day.isMouseToLeft = false\r\n                    day.isMouseToRight = false\r\n                  }\r\n                  if (range.start && range.end) {\r\n                    if (\r\n                      this.helpCalendar.getDateFromFormat(day.date).getTime() >\r\n                        this.helpCalendar.getDateFromFormat(range.start) &&\r\n                      this.helpCalendar.getDateFromFormat(day.date) <\r\n                        this.helpCalendar.getDateFromFormat(range.end)\r\n                    ) {\r\n                      day.isMarked = true\r\n                    }\r\n                  }\r\n                })\r\n              }\r\n\r\n              if (startDate && startDate === endDate) {\r\n                day.isMouseToLeft = false\r\n                day.isMouseToRight = false\r\n              }\r\n              if (startDate && endDate) {\r\n                if (\r\n                  this.helpCalendar.getDateFromFormat(day.date).getTime() >\r\n                    this.helpCalendar.getDateFromFormat(startDate) &&\r\n                  this.helpCalendar.getDateFromFormat(day.date) <\r\n                    this.helpCalendar.getDateFromFormat(endDate)\r\n                ) {\r\n                  day.isMarked = true\r\n                }\r\n              }\r\n            }\r\n            if (this.fConfigs.markedDates.includes(day.date))\r\n              day.isMarked = true\r\n          })\r\n        })\r\n      })\r\n    },\r\n    dayMouseOver(date) {\r\n      if (!this.fConfigs.isDateRange) {\r\n        return false\r\n      }\r\n\r\n      // Limits\r\n      if (this.fConfigs.limits) {\r\n        let limitMin = this.helpCalendar\r\n          .getDateFromFormat(this.fConfigs.limits.min)\r\n          .getTime()\r\n        let limitMax = this.helpCalendar\r\n          .getDateFromFormat(this.fConfigs.limits.max)\r\n          .getTime()\r\n        let limitDate = this.helpCalendar.getDateFromFormat(date).getTime()\r\n\r\n        if (limitDate < limitMin || limitDate > limitMax) {\r\n          return false\r\n        }\r\n      }\r\n\r\n      //Multiple Range\r\n\r\n      if (\r\n        (this.calendar.dateRange.start === '' ||\r\n          this.calendar.dateRange.end === '') &&\r\n        (this.calendar.dateRange.start !== '' ||\r\n          this.calendar.dateRange.end !== '')\r\n      ) {\r\n        for (let e = 0; e < this.listCalendars.length; e++) {\r\n          let calendar = this.listCalendars[e]\r\n\r\n          for (let f = 0; f < calendar.weeks.length; f++) {\r\n            let week = calendar.weeks[f]\r\n\r\n            for (let i = 0; i < week.days.length; i++) {\r\n              let item = week.days[i]\r\n\r\n              this.listCalendars[e].weeks[f].days[i].isHovered = false\r\n              if (\r\n                item.date !== this.startDMY &&\r\n                !this.fConfigs.markedDates.includes(item.date)\r\n              ) {\r\n                this.listCalendars[e].weeks[f].days[i].isMarked = false\r\n              }\r\n\r\n              if (this.calendar.dateRange.start) {\r\n                let itemDate = this.helpCalendar\r\n                  .getDateFromFormat(item.date)\r\n                  .getTime()\r\n\r\n                let thisDate = this.helpCalendar\r\n                  .getDateFromFormat(date)\r\n                  .getTime()\r\n                let startDate = this.helpCalendar.getDateFromFormat(\r\n                  this.calendar.dateRange.start\r\n                )\r\n\r\n                this.listCalendars[e].weeks[f].days[i].isMouseToLeft =\r\n                  (itemDate === startDate.getTime() &&\r\n                    thisDate > startDate.getTime()) ||\r\n                  (itemDate === thisDate && thisDate < startDate.getTime())\r\n                this.listCalendars[e].weeks[f].days[i].isMouseToRight =\r\n                  (itemDate === startDate.getTime() &&\r\n                    thisDate < startDate.getTime()) ||\r\n                  (itemDate === thisDate && thisDate > startDate.getTime())\r\n\r\n                let dateDay =\r\n                  this.helpCalendar.getDateFromFormat(item.date).getDay() - 1\r\n                if (dateDay === -1) {\r\n                  dateDay = 6\r\n                }\r\n\r\n                let dayOfWeekString = this.fConfigs.dayNames[dateDay]\r\n                if (\r\n                  !this.fConfigs.disabledDayNames.includes(dayOfWeekString) &&\r\n                  ((itemDate > startDate.getTime() && itemDate < thisDate) ||\r\n                    (itemDate < startDate.getTime() && itemDate > thisDate))\r\n                ) {\r\n                  this.listCalendars[e].weeks[f].days[i].isMarked = true\r\n                }\r\n\r\n                if (!this.calendar.dateRange.end && itemDate === thisDate) {\r\n                  this.listCalendars[e].weeks[f].days[i].isHovered = false\r\n                }\r\n\r\n                if (\r\n                  this.checkSelDates(\r\n                    'min',\r\n                    this.calendar.dateRange.start,\r\n                    item.date,\r\n                    date\r\n                  )\r\n                ) {\r\n                  this.listCalendars[e].weeks[f].days[i].isMarked = true\r\n\r\n                  let minDateToRight, minDateToLeft\r\n                  minDateToLeft = new Date(startDate.getTime())\r\n                  minDateToRight = new Date(startDate.getTime())\r\n                  minDateToLeft.setDate(\r\n                    minDateToLeft.getDate() - this.fConfigs.minSelDays + 1\r\n                  )\r\n                  minDateToRight.setDate(\r\n                    minDateToRight.getDate() + this.fConfigs.minSelDays - 1\r\n                  )\r\n\r\n                  if (\r\n                    thisDate >= minDateToLeft.getTime() &&\r\n                    this.helpCalendar.formatDate(minDateToLeft) === item.date\r\n                  ) {\r\n                    this.listCalendars[e].weeks[f].days[i].isMarked = false\r\n                    this.listCalendars[e].weeks[f].days[i].isMouseToLeft = true\r\n                    this.listCalendars[e].weeks[f].days[i].isHovered = true\r\n                  } else if (\r\n                    thisDate <= minDateToRight.getTime() &&\r\n                    this.helpCalendar.formatDate(minDateToRight) === item.date\r\n                  ) {\r\n                    this.listCalendars[e].weeks[f].days[i].isMarked = false\r\n                    this.listCalendars[e].weeks[f].days[i].isMouseToRight = true\r\n                    this.listCalendars[e].weeks[f].days[i].isHovered = true\r\n                  }\r\n                }\r\n\r\n                if (\r\n                  this.checkSelDates(\r\n                    'max',\r\n                    this.calendar.dateRange.start,\r\n                    item.date,\r\n                    date\r\n                  )\r\n                ) {\r\n                  this.listCalendars[e].weeks[f].days[i].isMarked = false\r\n                  this.listCalendars[e].weeks[f].days[i].isHovered = false\r\n                  this.listCalendars[e].weeks[f].days[i].isMouseToLeft = false\r\n                  this.listCalendars[e].weeks[f].days[i].isMouseToRight = false\r\n\r\n                  let maxDateToLeft, maxDateToRight\r\n                  maxDateToLeft = new Date(startDate.getTime())\r\n                  maxDateToRight = new Date(startDate.getTime())\r\n                  maxDateToLeft.setDate(\r\n                    maxDateToLeft.getDate() - this.fConfigs.maxSelDays + 1\r\n                  )\r\n                  maxDateToRight.setDate(\r\n                    maxDateToRight.getDate() + this.fConfigs.maxSelDays - 1\r\n                  )\r\n\r\n                  if (thisDate <= maxDateToLeft.getTime()) {\r\n                    if (\r\n                      this.helpCalendar.formatDate(maxDateToLeft) === item.date\r\n                    ) {\r\n                      this.listCalendars[e].weeks[f].days[i].isHovered = true\r\n                      this.listCalendars[e].weeks[f].days[\r\n                        i\r\n                      ].isMouseToLeft = true\r\n                    }\r\n                  }\r\n\r\n                  if (thisDate >= maxDateToRight.getTime()) {\r\n                    if (\r\n                      this.helpCalendar.formatDate(maxDateToRight) === item.date\r\n                    ) {\r\n                      this.listCalendars[e].weeks[f].days[i].isHovered = true\r\n                      this.listCalendars[e].weeks[f].days[\r\n                        i\r\n                      ].isMouseToRight = true\r\n                    }\r\n                  }\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n      if (this.calendar.multipleDateRange) {\r\n        let range = this.calendar.multipleDateRange[\r\n          this.calendar.multipleDateRange.length - 1\r\n        ]\r\n        if (!range) return\r\n        // this.calendar.multipleDateRange.forEach((range, index) => {\r\n        if (\r\n          (range.start === '' || range.end === '') &&\r\n          (range.start !== '' || range.end !== '')\r\n        ) {\r\n          for (let e = 0; e < this.listCalendars.length; e++) {\r\n            let calendar = this.listCalendars[e]\r\n\r\n            for (let f = 0; f < calendar.weeks.length; f++) {\r\n              let week = calendar.weeks[f]\r\n\r\n              for (let i = 0; i < week.days.length; i++) {\r\n                let item = week.days[i]\r\n\r\n                this.listCalendars[e].weeks[f].days[i].isHovered = false\r\n                if (\r\n                  item.date !== this.startDMY &&\r\n                  !this.fConfigs.markedDates.includes(item.date)\r\n                ) {\r\n                  this.listCalendars[e].weeks[f].days[i].isMarked = false\r\n                }\r\n\r\n                if (range.start) {\r\n                  let itemDate = this.helpCalendar\r\n                    .getDateFromFormat(item.date)\r\n                    .getTime()\r\n\r\n                  let thisDate = this.helpCalendar\r\n                    .getDateFromFormat(date)\r\n                    .getTime()\r\n                  let startDate = this.helpCalendar.getDateFromFormat(\r\n                    range.start\r\n                  )\r\n\r\n                  this.listCalendars[e].weeks[f].days[i].isMouseToLeft =\r\n                    (itemDate === startDate.getTime() &&\r\n                      thisDate > startDate.getTime()) ||\r\n                    (itemDate === thisDate && thisDate < startDate.getTime())\r\n                  this.listCalendars[e].weeks[f].days[i].isMouseToRight =\r\n                    (itemDate === startDate.getTime() &&\r\n                      thisDate < startDate.getTime()) ||\r\n                    (itemDate === thisDate && thisDate > startDate.getTime())\r\n\r\n                  let dateDay =\r\n                    this.helpCalendar.getDateFromFormat(item.date).getDay() - 1\r\n                  if (dateDay === -1) {\r\n                    dateDay = 6\r\n                  }\r\n\r\n                  let dayOfWeekString = this.fConfigs.dayNames[dateDay]\r\n                  if (\r\n                    !this.fConfigs.disabledDayNames.includes(dayOfWeekString) &&\r\n                    ((itemDate > startDate.getTime() && itemDate < thisDate) ||\r\n                      (itemDate < startDate.getTime() && itemDate > thisDate))\r\n                  ) {\r\n                    this.listCalendars[e].weeks[f].days[i].isMarked = true\r\n                  }\r\n\r\n                  if (!range.end && itemDate === thisDate) {\r\n                    this.listCalendars[e].weeks[f].days[i].isHovered = false\r\n                  }\r\n\r\n                  if (this.checkSelDates('min', range.start, item.date, date)) {\r\n                    this.listCalendars[e].weeks[f].days[i].isMarked = true\r\n\r\n                    let minDateToRight, minDateToLeft\r\n                    minDateToLeft = new Date(startDate.getTime())\r\n                    minDateToRight = new Date(startDate.getTime())\r\n                    minDateToLeft.setDate(\r\n                      minDateToLeft.getDate() - this.fConfigs.minSelDays + 1\r\n                    )\r\n                    minDateToRight.setDate(\r\n                      minDateToRight.getDate() + this.fConfigs.minSelDays - 1\r\n                    )\r\n\r\n                    if (\r\n                      thisDate >= minDateToLeft.getTime() &&\r\n                      this.helpCalendar.formatDate(minDateToLeft) === item.date\r\n                    ) {\r\n                      this.listCalendars[e].weeks[f].days[i].isMarked = false\r\n                      this.listCalendars[e].weeks[f].days[\r\n                        i\r\n                      ].isMouseToLeft = true\r\n                      this.listCalendars[e].weeks[f].days[i].isHovered = true\r\n                    } else if (\r\n                      thisDate <= minDateToRight.getTime() &&\r\n                      this.helpCalendar.formatDate(minDateToRight) === item.date\r\n                    ) {\r\n                      this.listCalendars[e].weeks[f].days[i].isMarked = false\r\n                      this.listCalendars[e].weeks[f].days[\r\n                        i\r\n                      ].isMouseToRight = true\r\n                      this.listCalendars[e].weeks[f].days[i].isHovered = true\r\n                    }\r\n                  }\r\n\r\n                  if (this.checkSelDates('max', range.start, item.date, date)) {\r\n                    this.listCalendars[e].weeks[f].days[i].isMarked = false\r\n                    this.listCalendars[e].weeks[f].days[i].isHovered = false\r\n                    this.listCalendars[e].weeks[f].days[i].isMouseToLeft = false\r\n                    this.listCalendars[e].weeks[f].days[\r\n                      i\r\n                    ].isMouseToRight = false\r\n\r\n                    let maxDateToLeft, maxDateToRight\r\n                    maxDateToLeft = new Date(startDate.getTime())\r\n                    maxDateToRight = new Date(startDate.getTime())\r\n                    maxDateToLeft.setDate(\r\n                      maxDateToLeft.getDate() - this.fConfigs.maxSelDays + 1\r\n                    )\r\n                    maxDateToRight.setDate(\r\n                      maxDateToRight.getDate() + this.fConfigs.maxSelDays - 1\r\n                    )\r\n\r\n                    if (thisDate <= maxDateToLeft.getTime()) {\r\n                      if (\r\n                        this.helpCalendar.formatDate(maxDateToLeft) ===\r\n                        item.date\r\n                      ) {\r\n                        this.listCalendars[e].weeks[f].days[i].isHovered = true\r\n                        this.listCalendars[e].weeks[f].days[\r\n                          i\r\n                        ].isMouseToLeft = true\r\n                      }\r\n                    }\r\n\r\n                    if (thisDate >= maxDateToRight.getTime()) {\r\n                      if (\r\n                        this.helpCalendar.formatDate(maxDateToRight) ===\r\n                        item.date\r\n                      ) {\r\n                        this.listCalendars[e].weeks[f].days[i].isHovered = true\r\n                        this.listCalendars[e].weeks[f].days[\r\n                          i\r\n                        ].isMouseToRight = true\r\n                      }\r\n                    }\r\n                  }\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n        // })\r\n      }\r\n    },\r\n    /**\r\n     * @return {boolean}\r\n     */\r\n    PreMonth(calendarKey = null) {\r\n      if (!this.allowPreDate) return false\r\n\r\n      this.transitionPrefix = 'right'\r\n\r\n      calendarKey = calendarKey !== null ? calendarKey : 0\r\n\r\n      let currentCalendar = this.listCalendars[calendarKey]\r\n      currentCalendar.date = new Date(\r\n        currentCalendar.date.getFullYear(),\r\n        currentCalendar.date.getMonth() - 1\r\n      )\r\n      currentCalendar.key -= hUniqueID()\r\n      this.updateCalendar()\r\n\r\n      if (!this.fConfigs.isSeparately) {\r\n        this.calendar.currentDate = currentCalendar.date\r\n        this.initCalendar()\r\n      }\r\n\r\n      this.$emit('changedMonth', currentCalendar.date)\r\n    },\r\n    /**\r\n     * @return {boolean}\r\n     */\r\n    NextMonth(calendarKey = null) {\r\n      if (!this.allowNextDate) return false\r\n\r\n      this.transitionPrefix = 'left'\r\n\r\n      calendarKey = calendarKey !== null ? calendarKey : 0\r\n\r\n      let currentCalendar = this.listCalendars[calendarKey]\r\n      currentCalendar.date = new Date(\r\n        currentCalendar.date.getFullYear(),\r\n        currentCalendar.date.getMonth() + 1\r\n      )\r\n      currentCalendar.key += hUniqueID()\r\n      this.updateCalendar()\r\n\r\n      if (!this.fConfigs.isSeparately) {\r\n        this.calendar.currentDate = currentCalendar.date\r\n        this.initCalendar()\r\n      }\r\n\r\n      this.$emit('changedMonth', currentCalendar.date)\r\n    },\r\n    /**\r\n     * @return {boolean}\r\n     */\r\n    PreYear(calendarKey = null) {\r\n      if (!this.allowPreDate) return false\r\n\r\n      let step = this.showYearPicker ? this.fConfigs.changeYearStep : 1\r\n\r\n      calendarKey = calendarKey !== null ? calendarKey : 0\r\n\r\n      let currentCalendar = this.listCalendars[calendarKey]\r\n      currentCalendar.date = new Date(\r\n        currentCalendar.date.getFullYear() - step,\r\n        currentCalendar.date.getMonth()\r\n      )\r\n      this.updateCalendar()\r\n\r\n      if (!this.fConfigs.isSeparately) {\r\n        this.calendar.currentDate = currentCalendar.date\r\n        this.initCalendar()\r\n      }\r\n\r\n      this.$emit('changedYear', currentCalendar.date)\r\n    },\r\n    /**\r\n     * @return {boolean}\r\n     */\r\n    NextYear(calendarKey = null) {\r\n      if (!this.allowNextDate) return false\r\n\r\n      let step = this.showYearPicker ? this.fConfigs.changeYearStep : 1\r\n\r\n      calendarKey = calendarKey !== null ? calendarKey : 0\r\n\r\n      let currentCalendar = this.listCalendars[calendarKey]\r\n      currentCalendar.date = new Date(\r\n        currentCalendar.date.getFullYear() + step,\r\n        currentCalendar.date.getMonth()\r\n      )\r\n      this.updateCalendar()\r\n\r\n      if (!this.fConfigs.isSeparately) {\r\n        this.calendar.currentDate = currentCalendar.date\r\n        this.initCalendar()\r\n      }\r\n\r\n      this.$emit('changedYear', currentCalendar.date)\r\n    },\r\n    ChooseDate(date) {\r\n      let newDate = this.helpCalendar.getDateFromFormat(date)\r\n\r\n      if (date === 'today') {\r\n        newDate = new Date()\r\n      }\r\n\r\n      this.listCalendars[0].date = this.calendar.currentDate = newDate\r\n\r\n      this.updateCalendar()\r\n      this.initCalendar()\r\n    },\r\n    openMonthPicker(key) {\r\n      if (this.fConfigs.changeMonthFunction) {\r\n        this.showMonthPicker = key === this.showMonthPicker ? false : key\r\n        this.showYearPicker = false\r\n      }\r\n    },\r\n    openYearPicker(key) {\r\n      if (this.fConfigs.changeYearFunction) {\r\n        this.showYearPicker = key === this.showYearPicker ? false : key\r\n        this.showMonthPicker = false\r\n      }\r\n    },\r\n    openTimePicker() {\r\n      this.showTimePicker = true\r\n    },\r\n    pickMonth(key, calendarKey) {\r\n      this.showMonthPicker = false\r\n      if (!this.isSeparately) {\r\n        this.listCalendars.forEach((currentCalendar, index) => {\r\n          let date = currentCalendar.date\r\n          currentCalendar.date = new Date(\r\n            date.getFullYear(),\r\n            key + 1 + index,\r\n            0\r\n          )\r\n          currentCalendar.key += hUniqueID()\r\n        })\r\n      } else {\r\n        let currentCalendar = this.listCalendars[calendarKey]\r\n        let date = currentCalendar.date\r\n        currentCalendar.date = new Date(date.getFullYear(), key + 1, 0)\r\n        currentCalendar.key += hUniqueID()\r\n      }\r\n      this.updateCalendar()\r\n    },\r\n    pickYear(year, calendarKey) {\r\n      this.showYearPicker = false\r\n      if (!this.isSeparately) {\r\n        this.listCalendars.forEach(currentCalendar => {\r\n          let date = currentCalendar.date\r\n          currentCalendar.date = new Date(year, date.getMonth() + 1, 0)\r\n          currentCalendar.key += hUniqueID()\r\n        })\r\n      } else {\r\n        let currentCalendar = this.listCalendars[calendarKey]\r\n        let date = currentCalendar.date\r\n        currentCalendar.date = new Date(year, date.getMonth() + 1, 0)\r\n        currentCalendar.key += hUniqueID()\r\n      }\r\n      this.updateCalendar()\r\n    },\r\n    getYearList(date, delta) {\r\n      let years = []\r\n      let year = date.getFullYear() - 4 + delta\r\n      for (let i = 0; i < 12; i++) {\r\n        let finalYear = year + i\r\n\r\n        years.push({\r\n          year: finalYear\r\n        })\r\n      }\r\n      return years\r\n    },\r\n    /**\r\n     * Add date to selectedDates list\r\n     * @param index\r\n     */\r\n    addToSelectedDates() {\r\n      if (this.helpCalendar.checkValidDate(this.calendar.selectedDatesItem)) {\r\n        let date = Object.assign({}, this.defaultDateFormat)\r\n        date.date = this.calendar.selectedDatesItem\r\n        this.calendar.selectedDates.push(date)\r\n        this.calendar.selectedDatesItem = ''\r\n        this.markChooseDays()\r\n      }\r\n    },\r\n    /**\r\n     * Remove date from selectedDates list\r\n     * @param index\r\n     */\r\n    removeFromSelectedDates(index) {\r\n      this.calendar.selectedDates.splice(index, 1)\r\n      this.markChooseDays()\r\n    },\r\n\r\n    checkDateRangeEnd(date) {\r\n      if (Array.isArray(this.fConfigs.markedDateRange)) {\r\n        return (\r\n          this.fConfigs.markedDateRange.findIndex(range => {\r\n            return range.end === date\r\n          }) !== -1\r\n        )\r\n      }\r\n\r\n      return date === this.fConfigs.markedDateRange.end\r\n    },\r\n    checkSelDates(type, startDate, itemDate, hoverDate) {\r\n      let startTime = this.helpCalendar.getDateFromFormat(startDate).getTime()\r\n      let itemTime = this.helpCalendar.getDateFromFormat(itemDate).getTime()\r\n      let hoverTime = this.helpCalendar.getDateFromFormat(hoverDate).getTime()\r\n\r\n      let days =\r\n        type === 'min' ? this.fConfigs.minSelDays : this.fConfigs.maxSelDays - 2\r\n      let minTime = days * 1000 * 60 * 60 * 24\r\n      let rightTime = startTime + minTime\r\n      let leftTime = startTime - minTime\r\n\r\n      let result\r\n      if (hoverTime > startTime) {\r\n        if (type === 'min')\r\n          result =\r\n            itemTime < rightTime &&\r\n            itemTime > startTime &&\r\n            this.fConfigs.minSelDays\r\n        else\r\n          result =\r\n            itemTime > rightTime &&\r\n            itemTime > startTime &&\r\n            this.fConfigs.maxSelDays\r\n      } else if (hoverTime < startTime) {\r\n        if (type === 'min')\r\n          result =\r\n            itemTime > leftTime &&\r\n            itemTime < startTime &&\r\n            this.fConfigs.minSelDays\r\n        else\r\n          result =\r\n            itemTime < leftTime &&\r\n            itemTime < startTime &&\r\n            this.fConfigs.maxSelDays\r\n      }\r\n\r\n      return result\r\n    },\r\n    checkLimits(value) {\r\n      if (this.fConfigs.limits) {\r\n        let min = new Date(\r\n          this.helpCalendar.getDateFromFormat(this.fConfigs.limits.min)\r\n        )\r\n        min.setDate(1)\r\n        min.setHours(0, 0, 0, 0)\r\n        let max = new Date(\r\n          this.helpCalendar.getDateFromFormat(this.fConfigs.limits.max)\r\n        )\r\n        max.setDate(1)\r\n        max.setHours(0, 0, 0, 0)\r\n\r\n        this.allowPreDate = true\r\n        this.allowNextDate = true\r\n\r\n        let current = new Date(value)\r\n        current.setDate(1)\r\n        current.setHours(0, 0, 0, 0)\r\n\r\n        if (current <= min) {\r\n          this.allowPreDate = false\r\n        }\r\n\r\n        if (current >= max) {\r\n          this.allowNextDate = false\r\n        }\r\n      }\r\n    },\r\n    getTransition_() {\r\n      if (!this.fConfigs.transition) return ''\r\n\r\n      let name = ''\r\n      if (this.transitionPrefix === 'left') {\r\n        name = 'vfc-calendar-slide-left'\r\n      } else if (this.transitionPrefix === 'right') {\r\n        name = 'vfc-calendar-slide-right'\r\n      }\r\n      return name\r\n    },\r\n    checkHiddenElement(elementName) {\r\n      return !this.fConfigs.hiddenElements.includes(elementName)\r\n    },\r\n    onFocusIn() {\r\n      if (this.fConfigs.isModal) {\r\n        this.showCalendar = true\r\n      }\r\n    },\r\n    onFocusOut(e) {\r\n      if (\r\n        this.fConfigs.isModal &&\r\n        !hElContains(this.popoverElement, e.relatedTarget)\r\n      ) {\r\n        return (this.showCalendar = this.showMonthPicker = this.showYearPicker = false)\r\n      }\r\n    },\r\n\r\n    hideMonthYearPicker(e) {\r\n      this.$nextTick(() => {\r\n        if (this.showMonthPicker || this.showYearPicker) {\r\n          let key = this.showMonthPicker\r\n            ? this.showMonthPicker - 1\r\n            : this.showYearPicker - 1\r\n\r\n          const MYactive = this.$refs.calendars.querySelectorAll(\r\n            `.vfc-content-MY-picker`\r\n          )[key]\r\n          if (MYactive.contains(e.target)) {\r\n            return\r\n          }\r\n          return (this.showMonthPicker = this.showYearPicker = false)\r\n        }\r\n      })\r\n    },\r\n\r\n    checkDateRangeStart(date) {\r\n      if (Array.isArray(this.fConfigs.markedDateRange)) {\r\n        return (\r\n          this.fConfigs.markedDateRange.findIndex(range => {\r\n            return range.start === date\r\n          }) !== -1\r\n        )\r\n      }\r\n\r\n      return date === this.fConfigs.markedDateRange.start\r\n    },\r\n    cleanRange() {\r\n      if (!this.isMultipleDateRange) {\r\n        this.calendar.dateRange.end = ''\r\n        this.calendar.dateRange.start = ''\r\n        return\r\n      }\r\n      this.calendar.multipleDateRange = []\r\n      // this.calendar.multipleDateRange.push({\r\n      //   start: '',\r\n      //   end: ''\r\n      // })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n@import '../assets/scss/calendar.scss';\r\n.rangeCleaner {\r\n  padding: 5px 0 10px;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  span {\r\n    color: white;\r\n    border-radius: 5px;\r\n    border: none;\r\n    padding: 5px;\r\n    &.active {\r\n      &:hover {\r\n        background-color: #4f8a9e;\r\n        cursor: pointer;\r\n      }\r\n      background-color: #66b3cc;\r\n    }\r\n    &.disabled {\r\n      background-color: rgb(148, 148, 148);\r\n    }\r\n  }\r\n}\r\n</style>\r\n"]}]}