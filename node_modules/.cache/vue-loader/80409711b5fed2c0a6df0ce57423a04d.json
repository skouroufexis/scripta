{"remainingRequest":"/Users/stavros/Documents/web/diary/scripta/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/stavros/Documents/web/diary/scripta/src/components/Dossier.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/stavros/Documents/web/diary/scripta/src/components/Dossier.vue","mtime":1614334417000},{"path":"/Users/stavros/Documents/web/diary/scripta/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/stavros/Documents/web/diary/scripta/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/stavros/Documents/web/diary/scripta/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/stavros/Documents/web/diary/scripta/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/stavros/Documents/web/diary/scripta/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBOb3RlcyBmcm9tICcuL05vdGVzJzsKaW1wb3J0IEVkaXREb3NzaWVyTmFtZSBmcm9tICcuL0VkaXREb3NzaWVyTmFtZSc7CmV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6J0Rvc3NpZXInLAoKICAgIGNvbXBvbmVudHM6IHsKICAgIE5vdGVzLEVkaXREb3NzaWVyTmFtZQogICAgfSwKCiAgICBkYXRhOmZ1bmN0aW9uKCl7CiAgICAgICAgcmV0dXJuewogICAgICAgICAgIGRvc3NpZXJzOltdLAogICAgICAgICAgIGhhc0Rvc3NpZXI6dHJ1ZSwKICAgICAgICAgICBvcGVuTm90ZXM6ZmFsc2UsCiAgICAgICAgICAgZWRpdE5hbWU6ZmFsc2UsCiAgICAgICAgICAgc2VsZWN0ZWREb3NzaWVyOltdCiAgICAgICAgICAgCiAgICAgICAgfQogICAgfSwKCiAgICAgd2F0Y2g6ewogICAgICAgICBkb3NzaWVyczpmdW5jdGlvbihuZXdWYWwpewogICAgICAgICAgICAgICB0aGlzLmRvc3NpZXJzPW5ld1ZhbDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAKICAgICAgICAgfSwgCiAgICAgICAgLy8gIGRvc3NpZXI6ZnVuY3Rpb24obmV3VmFsKXsKICAgICAgICAvLyAgICAgICAgdGhpcy5kb3NzaWVyPW5ld1ZhbDsgICAKICAgICAgICAgICAgICAgCiAgICAgICAgLy8gIH0sCiAgICAgICAgLy8gIHRhZ3M6ZnVuY3Rpb24obmV3VmFsKXsKICAgICAgICAvLyAgICAgICAgICB0aGlzLm5ld190YWdzPW5ld1ZhbDsgICAgICAgICAgICAgICAgIAogICAgICAgIC8vICB9LAogICAgICAgIAogICAgfSwKCiAgICBtb3VudGVkOmZ1bmN0aW9uKCl7CgogICAgICAgIHRoaXMuZ2V0RG9zc2llcnMoKTsKICAgICAgICAKICAgIH0sCgogICAgbWV0aG9kczp7CgogICAgICAgIGdldERvc3NpZXJzOmZ1bmN0aW9uKCl7CiAgICAgICAgICAgIHRoaXMuZG9zc2llcnM9W107CiAgICAgICAgICAgIGxldCBzZWxmPXRoaXM7CiAgICAgICAgICAgIGxldCByZXF1ZXN0PSBuZXcgWE1MSHR0cFJlcXVlc3QoKTsgICAgICAgICAgICAKICAgICAgICAgICAgcmVxdWVzdC5vcGVuKCdHRVQnLCcvYXBpL2dldC1kb3NzaWVycy1pbmZvJyk7CiAgICAgICAgICAgIGxldCBzZXNzaW9uX2lkPWxvY2FsU3RvcmFnZS5nZXRJdGVtKCdzZXNzaW9uX2lkJyk7CiAgICAgICAgICAgIGxldCB1c2VyX2lkPWxvY2FsU3RvcmFnZS5nZXRJdGVtKCd1c2VyX2lkJyk7CiAgICAgICAgICAgIHJlcXVlc3Quc2V0UmVxdWVzdEhlYWRlcignc2Vzc2lvbl9pZCcsIHNlc3Npb25faWQpOyAgICAgICAgICAgICAgIAogICAgICAgICAgICByZXF1ZXN0LnNldFJlcXVlc3RIZWFkZXIoJ3VzZXJfaWQnLCB1c2VyX2lkKTsgICAgICAgICAgICAgICAKICAgICAgICAgICAgLy9zZW5kIHJlcXVlc3QKICAgICAgICAgICAgcmVxdWVzdC5zZW5kKCk7ICAKICAgICAgICAgICAgcmVxdWVzdC5vbmxvYWQ9ZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgIGlmKHRoaXMuc3RhdHVzPT0yMDApewogICAgICAgICAgICAgICAgICAgIGlmKHRoaXMucmVzcG9uc2VUZXh0IT0nJyl7CiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmhhc0Rvc3NpZXI9dHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHJlc3BvbnNlID0gSlNPTi5wYXJzZSh0aGlzLnJlc3BvbnNlVGV4dCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLmZvckVhY2gociA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmRvc3NpZXJzLnB1c2gocik7ICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB9IAogICAgICAgICAgICAgICAgZWxzZXsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLnJlc3BvbnNlVGV4dCk7CiAgICAgICAgICAgICAgICB9ICAKICAgICAgICAgICAgfSAgCiAgICAgICAgfSwKICAgICAgIAogICAgICAgc2hvd05vdGVzOmZ1bmN0aW9uKGRvc3NpZXJfZmssZG9zc2llcl9uYW1lKXsKICAgICAgICAgICAKICAgICAgICAgICB0aGlzLnNlbGVjdGVkRG9zc2llcj0oe2Rvc3NpZXJfZms6ZG9zc2llcl9mayxkb3NzaWVyX25hbWU6ZG9zc2llcl9uYW1lfSk7CiAgICAgICAgICAgCiAgICAgICAgICAgdGhpcy5vcGVuTm90ZXM9dHJ1ZTsKICAgICAgIH0sCgogICAgICAgZWRpdE5hbWVPbjpmdW5jdGlvbihkb3NzaWVyX2lkLGRvc3NpZXJfbmFtZSl7CiAgICAgICAgICAgdGhpcy5zZWxlY3RlZERvc3NpZXI9KHtkb3NzaWVyX2ZrOmRvc3NpZXJfaWQsZG9zc2llcl9uYW1lOmRvc3NpZXJfbmFtZX0pCiAgICAgICAgICAgdGhpcy5lZGl0TmFtZT10cnVlOwogICAgICAgICAgIGNvbnNvbGUubG9nKGRvc3NpZXJfaWQgKyBkb3NzaWVyX25hbWUpOwogICAgICAgfSwKCiAgICAgICBiYWNrX2Rvc3NpZXJzOmZ1bmN0aW9uKCl7CiAgICAgICAgICAgCiAgICAgICAgICAgdGhpcy5vcGVuTm90ZXM9ZmFsc2U7CiAgICAgICAgICAgdGhpcy5kb3NzaWVycz1bXTsKICAgICAgICAgICAgdGhpcy5nZXREb3NzaWVycygpOwogICAgICAgICAgICAKICAgICAgIH0sCiAgICAgICBiYWNrX2Rvc3NpZXJzMjpmdW5jdGlvbigpeyAgICAgICAgICAgCiAgICAgICAgICAgdGhpcy5lZGl0TmFtZT1mYWxzZTsKICAgICAgICAgICB0aGlzLmRvc3NpZXJzPVtdOwogICAgICAgICAgIHRoaXMuZ2V0RG9zc2llcnMoKTsgICAgICAgICAgICAKICAgICAgIH0sCgoKICAgICAgIGRlbGV0ZURvc3NpZXI6ZnVuY3Rpb24oZG9zc2llcl9pZCxkb3NzaWVyX25hbWUpewogICAgICAgICAgIGxldCBzZWxmPXRoaXM7CiAgICAgICAgICAgbGV0IGRlbD1jb25maXJtKGBBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gZGVsZXRlICR7ZG9zc2llcl9uYW1lfSBhbmQgYWxsIHRoZSBub3RlcyBpbmNsdWRlZCBpbiBpdD9gKTsKICAgICAgICAgICAKICAgICAgICAgICBpZihkZWw9PXRydWUpewoKICAgICAgICAgICAgICAvL3NlbmQgZGVsZXRlIHJlcXVlc3QKICAgICAgICAgICAgICBsZXQgc2Vzc2lvbl9pZD1sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnc2Vzc2lvbl9pZCcpOyAgICAgICAgICAgICAgIAogICAgICAgICAgICAgIGxldCByZXF1ZXN0PW5ldyBYTUxIdHRwUmVxdWVzdCgpOyAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICByZXF1ZXN0Lm9wZW4oJ0RFTEVURScsJ2h0dHA6Ly9sb2NhbGhvc3Q6ODA4MC9hcGkvZG9zc2llcicpOwogICAgICAgICAgICAgIHJlcXVlc3Quc2V0UmVxdWVzdEhlYWRlcignc2Vzc2lvbl9pZCcsIHNlc3Npb25faWQpOwogICAgICAgICAgICAgIGxldCBkYXRhPUpTT04uc3RyaW5naWZ5KHtkb3NzaWVyX2ZrOmRvc3NpZXJfaWR9KTsKICAgICAgICAgICAgICByZXF1ZXN0LnNlbmQoZGF0YSk7ICAgICAgICAgICAgICAgICAgCgogICAgICAgICAgICAgIHJlcXVlc3Qub25sb2FkID0gZnVuY3Rpb24gKCl7ICAgICAgICAKICAgICAgICAgICAgICAgIGlmKHRoaXMuc3RhdHVzPT0yMDApeyAvL3JlcXVlc3QgaXMgdmFsaWQKICAgICAgICAgICAgICAgICAgICBhbGVydCh0aGlzLnJlc3BvbnNlVGV4dCk7CiAgICAgICAgICAgICAgICAgICAgc2VsZi5nZXREb3NzaWVycygpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZXsgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBhbGVydCh0aGlzLnJlc3BvbnNlVGV4dCk7CiAgICAgICAgICAgICAgICB9ICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgIH07CiAgICAgICAgICAgfQogICAgICAgICAgIAoKICAgICAgIH0sCiAgICAgIAoKICAgIH0sCn0K"},{"version":3,"sources":["Dossier.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoDA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;;AAGA;AACA","file":"Dossier.vue","sourceRoot":"src/components","sourcesContent":["<template>\n\n    <main id=\"Dossier\" class=\"container\">\n        <transition name=\"fade\">\n            <div v-if=\"!openNotes && !editName\">\n                <div class=\"row justify-centre systemMessage\" v-if=\"!hasDossier\">You have no recent dossiers</div>\n                <div v-if=\"hasDossier\" >\n                    \n                    <div class=\"row results_row\" v-for=\"dossier in dossiers\" :key=\"dossier\">\n    \n                        <div class=\"col-1\">\n                            <i class=\"fas fa-folder full right results_label\"> </i>                        \n                        </div>\n    \n                        <div class=\"col-3 results_label\">\n                            {{dossier.dossier_name}}                       \n                        </div>\n    \n                        <div class=\"col-2\">\n                            <i class=\"fas fa-feather-alt results_label full left\"> {{dossier.count}} </i>                          \n                        </div>\n    \n                        <button class=\"col\" v-on:click='showNotes(dossier.dossier_id,dossier.dossier_name)'>open</button>\n                        <button class=\"col\" v-on:click='editNameOn(dossier.dossier_id,dossier.dossier_name)' ><i class=\"far fa-edit\"></i></button>\n                        <button class=\"col\" v-on:click='deleteDossier(dossier.dossier_id,dossier.dossier_name)'><i class=\"far fa-trash-alt\"></i> </button>\n                        \n                          \n                    </div>\n                </div>\n            </div>\n        </transition>\n            \n        <transition name=\"fade\">\n            <Notes  v-if=\"openNotes\" v-on:back_dossiers='back_dossiers' v-bind:dossier='selectedDossier' \n                   \n             />\n        </transition>\n\n        <transition name=\"down\">\n            <EditDossierName\n             v-if='editName'\n             v-on:backDossier='back_dossiers2'\n             v-bind:dossier='selectedDossier'\n            />\n        </transition>\n\n\n    </main>    \n\n</template>\n\n<script>\nimport Notes from './Notes';\nimport EditDossierName from './EditDossierName';\nexport default {\n    name:'Dossier',\n\n    components: {\n    Notes,EditDossierName\n    },\n\n    data:function(){\n        return{\n           dossiers:[],\n           hasDossier:true,\n           openNotes:false,\n           editName:false,\n           selectedDossier:[]\n           \n        }\n    },\n\n     watch:{\n         dossiers:function(newVal){\n               this.dossiers=newVal;                                \n               \n         }, \n        //  dossier:function(newVal){\n        //        this.dossier=newVal;   \n               \n        //  },\n        //  tags:function(newVal){\n        //          this.new_tags=newVal;                 \n        //  },\n        \n    },\n\n    mounted:function(){\n\n        this.getDossiers();\n        \n    },\n\n    methods:{\n\n        getDossiers:function(){\n            this.dossiers=[];\n            let self=this;\n            let request= new XMLHttpRequest();            \n            request.open('GET','/api/get-dossiers-info');\n            let session_id=localStorage.getItem('session_id');\n            let user_id=localStorage.getItem('user_id');\n            request.setRequestHeader('session_id', session_id);               \n            request.setRequestHeader('user_id', user_id);               \n            //send request\n            request.send();  \n            request.onload=function(){\n                if(this.status==200){\n                    if(this.responseText!=''){\n                        \n                        self.hasDossier=true;\n                        let response = JSON.parse(this.responseText);\n                        response.forEach(r => {\n                            self.dossiers.push(r);                           \n                        });\n                    }\n\n                } \n                else{\n                    console.log(this.responseText);\n                }  \n            }  \n        },\n       \n       showNotes:function(dossier_fk,dossier_name){\n           \n           this.selectedDossier=({dossier_fk:dossier_fk,dossier_name:dossier_name});\n           \n           this.openNotes=true;\n       },\n\n       editNameOn:function(dossier_id,dossier_name){\n           this.selectedDossier=({dossier_fk:dossier_id,dossier_name:dossier_name})\n           this.editName=true;\n           console.log(dossier_id + dossier_name);\n       },\n\n       back_dossiers:function(){\n           \n           this.openNotes=false;\n           this.dossiers=[];\n            this.getDossiers();\n            \n       },\n       back_dossiers2:function(){           \n           this.editName=false;\n           this.dossiers=[];\n           this.getDossiers();            \n       },\n\n\n       deleteDossier:function(dossier_id,dossier_name){\n           let self=this;\n           let del=confirm(`Are you sure you want to delete ${dossier_name} and all the notes included in it?`);\n           \n           if(del==true){\n\n              //send delete request\n              let session_id=localStorage.getItem('session_id');               \n              let request=new XMLHttpRequest();                \n              request.open('DELETE','http://localhost:8080/api/dossier');\n              request.setRequestHeader('session_id', session_id);\n              let data=JSON.stringify({dossier_fk:dossier_id});\n              request.send(data);                  \n\n              request.onload = function (){        \n                if(this.status==200){ //request is valid\n                    alert(this.responseText);\n                    self.getDossiers();\n                }\n                else{                        \n                    alert(this.responseText);\n                }                    \n             };\n           }\n           \n\n       },\n      \n\n    },\n}\n</script>\n\n\n<style>\n   .dossier_row{\n       border: solid darkcyan thin;    \n    }\n</style>"]}]}