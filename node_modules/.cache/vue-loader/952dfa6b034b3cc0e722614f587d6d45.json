{"remainingRequest":"/Users/stavros/Documents/web/diary/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/stavros/Documents/web/diary/src/components/Dossier.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/stavros/Documents/web/diary/src/components/Dossier.vue","mtime":1613256823991},{"path":"/Users/stavros/Documents/web/diary/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/stavros/Documents/web/diary/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/stavros/Documents/web/diary/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/stavros/Documents/web/diary/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBOb3RlcyBmcm9tICcuL05vdGVzJzsKZXhwb3J0IGRlZmF1bHQgewogICAgbmFtZTonRG9zc2llcicsCgogICAgY29tcG9uZW50czogewogICAgTm90ZXMKICAgIH0sCgogICAgZGF0YTpmdW5jdGlvbigpewogICAgICAgIHJldHVybnsKICAgICAgICAgICBkb3NzaWVyczpbXSwKICAgICAgICAgICBoYXNEb3NzaWVyOnRydWUsCiAgICAgICAgICAgb3Blbk5vdGVzOmZhbHNlLAogICAgICAgICAgIHNlbGVjdGVkRG9zc2llcjpbXQogICAgICAgICAgIAogICAgICAgIH0KICAgIH0sCgogICAgbW91bnRlZDpmdW5jdGlvbigpewoKICAgICAgICBsZXQgc2VsZj10aGlzOwogICAgICAgIGxldCByZXF1ZXN0PSBuZXcgWE1MSHR0cFJlcXVlc3QoKTsgICAgICAgICAgICAKICAgICAgICByZXF1ZXN0Lm9wZW4oJ0dFVCcsJy9hcGkvZ2V0LWRvc3NpZXJzLWluZm8nKTsKICAgICAgICBsZXQgc2Vzc2lvbl9pZD1sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnc2Vzc2lvbl9pZCcpOwogICAgICAgIGxldCB1c2VyX2lkPWxvY2FsU3RvcmFnZS5nZXRJdGVtKCd1c2VyX2lkJyk7CiAgICAgICAgcmVxdWVzdC5zZXRSZXF1ZXN0SGVhZGVyKCdzZXNzaW9uX2lkJywgc2Vzc2lvbl9pZCk7ICAgICAgICAgICAgICAgCiAgICAgICAgcmVxdWVzdC5zZXRSZXF1ZXN0SGVhZGVyKCd1c2VyX2lkJywgdXNlcl9pZCk7ICAgICAgICAgICAgICAgCiAgICAgICAgLy9zZW5kIHJlcXVlc3QKICAgICAgICByZXF1ZXN0LnNlbmQoKTsgIAoKCiAgICAgICAgcmVxdWVzdC5vbmxvYWQ9ZnVuY3Rpb24oKXsKICAgICAgICAgICAgaWYodGhpcy5zdGF0dXM9PTIwMCl7CiAgICAgICAgICAgICAgICBpZih0aGlzLnJlc3BvbnNlVGV4dCE9JycpewogICAgICAgICAgICAgICAgICAgIHNlbGYuaGFzRG9zc2llcj10cnVlOwoKICAgICAgICAgICAgICAgICAgICBsZXQgcmVzcG9uc2UgPSBKU09OLnBhcnNlKHRoaXMucmVzcG9uc2VUZXh0KTsKCiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuZm9yRWFjaChyID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5kb3NzaWVycy5wdXNoKHIpOyAgIAogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIAogICAgICAgICAgICB9IAogICAgICAgICAgICBlbHNlewogICAgICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy5yZXNwb25zZVRleHQpOwogICAgICAgICAgICB9ICAKICAgICAgICB9ICAKCgogICAgICAgIAoKICAgIH0sCgogICAgbWV0aG9kczp7CiAgICAgICAKICAgICAgIHNob3dOb3RlczpmdW5jdGlvbihkb3NzaWVyX2ZrLGRvc3NpZXJfbmFtZSl7CiAgICAgICAgICAgCiAgICAgICAgICAgdGhpcy5zZWxlY3RlZERvc3NpZXI9KHtkb3NzaWVyX2ZrOmRvc3NpZXJfZmssZG9zc2llcl9uYW1lOmRvc3NpZXJfbmFtZX0pOwogICAgICAgICAgIAogICAgICAgICAgIHRoaXMub3Blbk5vdGVzPXRydWU7CiAgICAgICB9LAoKICAgICAgIGJhY2tfZG9zc2llcnM6ZnVuY3Rpb24oKXsKICAgICAgICAgICB0aGlzLm9wZW5Ob3Rlcz1mYWxzZTsKICAgICAgIH0KCiAgICB9LAp9Cg=="},{"version":3,"sources":["Dossier.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsCA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;;;;;AAKA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA","file":"Dossier.vue","sourceRoot":"src/components","sourcesContent":["<template>\n\n    <main id=\"Dossier\" class=\"container\">\n        <transition name=\"fade\">\n            <div v-if=\"!openNotes\">\n                <div class=\"row justify-centre systemMessage\" v-if=\"!hasDossier\">You have no recent dossiers</div>\n                <div v-if=\"hasDossier\" >\n                    \n                    <div class=\"row results_row\" v-for=\"dossier in dossiers\" :key=\"dossier\">\n    \n                        <div class=\"col col-1\">\n                            <i class=\"fas fa-folder full right results_label\"> </i>                        \n                        </div>\n    \n                        <div class=\"col results_label\">\n                            {{dossier.dossier_name}}                       \n                        </div>\n    \n                        <div class=\"col col-1\">\n                            <i class=\"fas fa-feather-alt results_label full left\"> {{dossier.count}} </i>                          \n                        </div>\n    \n                        <button class=\"col\" v-on:click='showNotes(dossier.dossier_id,dossier.dossier_name)'>open</button>\n    \n                    </div>\n                </div>\n            </div>\n        </transition>\n            \n    <transition name=\"fade\">\n        <Notes v-if=\"openNotes\" v-on:back_dossiers='back_dossiers' v-bind:dossier='selectedDossier' />\n    </transition>\n\n    </main>    \n\n</template>\n\n<script>\nimport Notes from './Notes';\nexport default {\n    name:'Dossier',\n\n    components: {\n    Notes\n    },\n\n    data:function(){\n        return{\n           dossiers:[],\n           hasDossier:true,\n           openNotes:false,\n           selectedDossier:[]\n           \n        }\n    },\n\n    mounted:function(){\n\n        let self=this;\n        let request= new XMLHttpRequest();            \n        request.open('GET','/api/get-dossiers-info');\n        let session_id=localStorage.getItem('session_id');\n        let user_id=localStorage.getItem('user_id');\n        request.setRequestHeader('session_id', session_id);               \n        request.setRequestHeader('user_id', user_id);               \n        //send request\n        request.send();  \n\n\n        request.onload=function(){\n            if(this.status==200){\n                if(this.responseText!=''){\n                    self.hasDossier=true;\n\n                    let response = JSON.parse(this.responseText);\n\n                    response.forEach(r => {\n                        self.dossiers.push(r);   \n                        \n                    });\n\n                }\n                \n                \n            } \n            else{\n                console.log(this.responseText);\n            }  \n        }  \n\n\n        \n\n    },\n\n    methods:{\n       \n       showNotes:function(dossier_fk,dossier_name){\n           \n           this.selectedDossier=({dossier_fk:dossier_fk,dossier_name:dossier_name});\n           \n           this.openNotes=true;\n       },\n\n       back_dossiers:function(){\n           this.openNotes=false;\n       }\n\n    },\n}\n</script>\n\n\n<style>\n   .dossier_row{\n       border: solid darkcyan thin;    \n    }\n</style>"]}]}