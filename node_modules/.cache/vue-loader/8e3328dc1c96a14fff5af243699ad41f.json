{"remainingRequest":"/Users/stavros/Documents/web/diary/scripta/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/stavros/Documents/web/diary/scripta/src/components/Signup.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/stavros/Documents/web/diary/scripta/src/components/Signup.vue","mtime":1615236752568},{"path":"/Users/stavros/Documents/web/diary/scripta/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/stavros/Documents/web/diary/scripta/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/stavros/Documents/web/diary/scripta/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/stavros/Documents/web/diary/scripta/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgoKZXhwb3J0IGRlZmF1bHQgewogICAgbmFtZTonU2lnbnVwJywKCiAgICBkYXRhOmZ1bmN0aW9uKCl7CiAgICAgICAgcmV0dXJuewogICAgICAgICAgICB1c2VybmFtZTonJywKICAgICAgICAgICAgZW1haWw6JycsCiAgICAgICAgICAgIHBhc3N3b3JkMTonJywKICAgICAgICAgICAgcGFzc3dvcmQyOicnLAogICAgICAgICAgICBwYXNzd29yZDonJwogICAgICAgIH0KICAgIH0sCgogICAgbW91bnRlZDpmdW5jdGlvbigpewoKICAgICAgICAvL3JlbW92ZSBmb2N1cyB1cG9uIGtleXVwCiAgICAgICAgbGV0IGlucHV0cz1kb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaW5wdXQnKTsKICAgICAgICBpbnB1dHMuZm9yRWFjaChpPT57CiAgICAgICAgICAgIGkuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLGZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICBpLmNsYXNzTGlzdC5yZW1vdmUoJ2ZvY3VzJyk7CiAgICAgICAgICAgICAgICBpZihpPT09aW5wdXRzWzJdKXsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHBhc3N3b3JkMT1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGFzc3dvcmQxJykudmFsdWU7ICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBwYXNzd29yZDI9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Bhc3N3b3JkMicpOwoKICAgICAgICAgICAgICAgICAgICBpZihwYXNzd29yZDEubGVuZ3RoPj04KXsKICAgICAgICAgICAgICAgICAgICAgICAgcGFzc3dvcmQyLmRpc2FibGVkPWZhbHNlOyAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZWxzZXsKICAgICAgICAgICAgICAgICAgICAgICAgcGFzc3dvcmQyLmRpc2FibGVkPXRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIHBhc3N3b3JkMi52YWx1ZT0nJzsKICAgICAgICAgICAgICAgICAgICAgICAgcGFzc3dvcmQyLmNsYXNzTGlzdC5yZW1vdmUoJ2ZvY3VzJyk7ICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KQogICAgICAgIH0pCiAgICB9LAoKICAgIG1ldGhvZHM6ewogICAgICAgIHJlZ2lzdGVyOmZ1bmN0aW9uKCl7CiAgICAgICAgICAgIGxldCB1c2VybmFtZT10aGlzLnVzZXJuYW1lOwogICAgICAgICAgICBsZXQgZW1haWw9dGhpcy5lbWFpbDsKICAgICAgICAgICAgbGV0IHBhc3N3b3JkMT10aGlzLnBhc3N3b3JkMTsKICAgICAgICAgICAgbGV0IHBhc3N3b3JkMj10aGlzLnBhc3N3b3JkMjsgICAgICAgICAgICAKICAgICAgICAgICAgLy92YWxpZGF0ZSB1c2VyIGlucHV0CiAgICAgICAgICAgIHRyeXsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgLy9lbXB0eSBpbnB1dAogICAgICAgICAgICAgICAgaWYodXNlcm5hbWUudHJpbSgpPT0nJyl7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRGb2N1cygxKTsKICAgICAgICAgICAgICAgICAgICB0aHJvdyAnUGxlYXNlIGVudGVyIHlvdXIgdXNlcm5hbWUnOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZihlbWFpbC50cmltKCk9PScnKXsKICAgICAgICAgICAgICAgICAgICB0aGlzLnNldEZvY3VzKDIpOwogICAgICAgICAgICAgICAgICAgIHRocm93ICdQbGVhc2UgZW50ZXIgYSB2YWxpZCBlbWFpbCBhZGRyZXNzJzsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2V7CiAgICAgICAgICAgICAgICAgICAgLy92YWxpZGF0ZSBlbWFpbCBmb3JtYXQKICAgICAgICAgICAgICAgICAgICBsZXQgZW1haWxWYWxpZGF0b3I9cmVxdWlyZSgnZW1haWwtdmFsaWRhdG9yJyk7CiAgICAgICAgICAgICAgICAgICAgbGV0IGlzVmFsaWQ9ZW1haWxWYWxpZGF0b3IudmFsaWRhdGUoZW1haWwpOwogICAgICAgICAgICAgICAgICAgIGlmKGlzVmFsaWQ9PWZhbHNlKXsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRGb2N1cygyKTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgJ1BsZWFzZSBlbnRlciBhIHZhbGlkIGVtYWlsIGFkZHJlc3MnOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0gICAKICAgICAgICAgICAgICAgIC8vdmFsaWRhdGUgcGFzc3dvcmQKICAgICAgICAgICAgICAgIGlmKHBhc3N3b3JkMS50cmltKCk9PScnKXsKICAgICAgICAgICAgICAgICAgICB0aGlzLnNldEZvY3VzKDMpOyAgICAKICAgICAgICAgICAgICAgICAgICB0aHJvdyAnUGxlYXNlIGVudGVyIGEgdmFsaWQgcGFzc3dvcmQnOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSBpZihwYXNzd29yZDEubGVuZ3RoPDgpewogICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0Rm9jdXMoMyk7CiAgICAgICAgICAgICAgICAgICAgdGhyb3cgJ1Bhc3N3b3JkIG11c3QgYmUgYmV0d2VlbiA4IGFuZCAyMCBjaGFyYWN0ZXJzIGxvbmcnOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZXsKICAgICAgICAgICAgICAgICAgICBpZihwYXNzd29yZDEuaW5kZXhPZignICcpPj0wKXsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRGb2N1cygzKTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgJ1Bhc3N3b3JkIGNhbm5vdCBjb250YWluIGVtcHR5IHNwYWNlcyc7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSAgICAgICAgICAgICAgICAKCiAgICAgICAgICAgICAgICBpZihwYXNzd29yZDEhPXBhc3N3b3JkMil7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0Rm9jdXMoNCk7CiAgICAgICAgICAgICAgICAgICAgdGhyb3cgJ1Bhc3N3b3JkcyBkbyBub3QgbWF0Y2guIFBsZWFzZSByZS1lbnRlciB5b3VyIHBhc3N3b3JkJzsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIHRoaXMucGFzc3dvcmQ9dGhpcy5wYXNzd29yZDE7CiAgICAgICAgICAgICAgICAKCiAgICAgICAgICAgICAgICAvL1BPU1QgcmVxdWVzdCB3aXRoIHVzZXIgY3JlZGVudGlhbHMgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgbGV0IHJlcXVlc3Q9IG5ldyBYTUxIdHRwUmVxdWVzdCgpOyAgICAKICAgICAgICAgICAgICAgIHJlcXVlc3Qub3BlbignUE9TVCcsJ2h0dHBzOi8vc2NyaXB0YS1hcHAuaGVyb2t1YXBwLmNvbS9hcGkvYWRkTmV3VXNlcicpOwoKICAgICAgICAgICAgICAgIGxldCBkYXRhPUpTT04uc3RyaW5naWZ5KHt1c2VyX25hbWU6dGhpcy51c2VybmFtZSx1c2VyX2VtYWlsOnRoaXMuZW1haWwsdXNlcl9wYXNzd29yZDp0aGlzLnBhc3N3b3JkfSk7CiAgICAgICAgICAgICAgICByZXF1ZXN0LnNlbmQoZGF0YSk7ICAKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgbGV0IHNlbGY9dGhpczsKICAgICAgICAgICAgICAgIHJlcXVlc3Qub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCl7ICAgICAgICAKICAgICAgICAgICAgICAgICAgICBpZih0aGlzLnJlYWR5U3RhdGU9PTQgJiYgdGhpcy5zdGF0dXM9PTIwMCl7CiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgYWxlcnQodGhpcy5yZXNwb25zZVRleHQpOwoKICAgICAgICAgICAgICAgICAgICBpZih0aGlzLnJlc3BvbnNlVGV4dD09J0FjY291bnQgc3VjY2Vzc2Z1bGx5IGNyZWF0ZWQnKXsKICAgICAgICAgICAgICAgICAgICAgICAgLy9yZWRpcmVjdCB0byBsb2dpbiBwYWdlCiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuZ290b0xvZ2luKCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGVsc2UgaWYodGhpcy5yZXNwb25zZVRleHQ9PSAnRW1haWwgYWxyZWFkeSBpbiB1c2UnKXsKICAgICAgICAgICAgICAgICAgICAgICAgLy9oaWdobGlnaHQgZW1haWwgZmllbGQKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5zZXRGb2N1cygyKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgCgogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICB9CiAgICAgICAgICAgIGNhdGNoIChlcnJvcil7CiAgICAgICAgICAgICAgICBhbGVydChlcnJvcik7CiAgICAgICAgICAgIH0KCiAgICAgICAgfSwKCiAgICAgICAgdXBkYXRlSW5wdXQ6ZnVuY3Rpb24obil7CiAgICAgICAgICAgCiAgICAgICAgICAgIGlmKG49PTEpewogICAgICAgICAgICAgICB0aGlzLnVzZXJuYW1lPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1c2VybmFtZScpLnZhbHVlOyAgICAgICAgICAgICAgICAKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIGlmIChuPT0yKSB7CiAgICAgICAgICAgICAgIHRoaXMuZW1haWw9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VtYWlsJykudmFsdWU7IAogICAgICAgICAgICB9CgogICAgICAgICAgICBlbHNlIGlmIChuPT0zKSB7CgogICAgICAgICAgICAgICB0aGlzLnBhc3N3b3JkMT1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGFzc3dvcmQxJykudmFsdWU7ICAgICAgICAgCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGVsc2UgaWYgKG49PTQpIHsKICAgICAgICAgICAgICAgdGhpcy5wYXNzd29yZDI9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Bhc3N3b3JkMicpLnZhbHVlOyAKICAgICAgICAgICAgfQogICAgICAgIH0sCgogICAgICAgIC8vZnVuY3Rpb24gdG8gc2V0IGZvY3VzIHRvIGlucHV0IGZpZWxkcyB0aGF0IHdlcmVuJ3QgY29tcGxldGVkIHByb3Blcmx5CiAgICAgICAgc2V0Rm9jdXM6ZnVuY3Rpb24obil7CiAgICAgICAgICAgIAogICAgICAgICAgICBsZXQgdXNlckVudHJpZXM9ZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgndXNlckVudHJ5Jyk7CgogICAgICAgICAgICB1c2VyRW50cmllcy5mb3JFYWNoKHUgPT4gewogICAgICAgICAgICAgICAgdS5jbGFzc0xpc3QucmVtb3ZlKCdmb2N1cycpOwoKICAgICAgICAgICAgfSk7ICAgICAgICAgICAgCiAgICAgICAgICAgIHVzZXJFbnRyaWVzW24tMV0uY2xhc3NMaXN0LmFkZCgnZm9jdXMnKTsKICAgICAgICB9LAoKICAgICAgICBnb3RvTG9naW46ZnVuY3Rpb24oKXsKICAgICAgICAgICAgdGhpcy4kZW1pdCgnZ290b0xvZ2luJywwKTsKICAgICAgICB9LAogICAgfSwKfQo="},{"version":3,"sources":["Signup.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8CA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"Signup.vue","sourceRoot":"src/components","sourcesContent":["<template>\n\n    <main id=\"Signup\" class=\"container\">\n        <div class=\"container\">\n            <div class=\"row header\">\n                <h3>User Registration</h3>\n            </div>\n\n            <form class=\"row\" action=\"#\">\n                <label class=\"col-12\" for=\"username\" v-on:keyup='updateInput(1)'>Username<br>\n                    <input type=\"text\" class=\"userEntry\"  id=\"username\">\n                </label>\n\n                <label class=\"col-12\" for=\"email\" v-on:keyup='updateInput(2)'>Email<br>\n                    <input type=\"text\" class=\"userEntry\"  id=\"email\">\n                </label>\n\n                <label class=\"col-12\" for=\"password1\" v-on:keyup='updateInput(3)'>Password<br>\n                    <input type=\"password\" class=\"userEntry\"  id=\"password1\" maxlength=\"20\">\n                </label>\n\n                <label class=\"col-12\" for=\"password2\" v-on:keyup='updateInput(4)'>Repeat password<br>\n                    <input type=\"password\" class=\"userEntry\"  id=\"password2\" maxlength=\"20\" disabled>                    \n                </label>\n\n                <button class=\"col-6 button_primary\" type=\"button\" id=\"signup_button_register\" v-on:click='register'>Register</button>\n\n            </form>\n\n            <div class=\"row\" id=\"container_button_back\">\n                \n                <button  v-on:click='gotoLogin' id=\"button_back\">Back</button>  \n                \n            </div>\n\n            \n        </div>\n\n\n    </main>    \n</template>\n\n\n<script>\n\n\nexport default {\n    name:'Signup',\n\n    data:function(){\n        return{\n            username:'',\n            email:'',\n            password1:'',\n            password2:'',\n            password:''\n        }\n    },\n\n    mounted:function(){\n\n        //remove focus upon keyup\n        let inputs=document.getElementsByTagName('input');\n        inputs.forEach(i=>{\n            i.addEventListener('keyup',function(){\n                i.classList.remove('focus');\n                if(i===inputs[2]){\n                        let password1=document.getElementById('password1').value;            \n                        let password2=document.getElementById('password2');\n\n                    if(password1.length>=8){\n                        password2.disabled=false;                        \n                        \n                    }\n                    else{\n                        password2.disabled=true;\n                        password2.value='';\n                        password2.classList.remove('focus');                        \n                    }\n                }\n            })\n        })\n    },\n\n    methods:{\n        register:function(){\n            let username=this.username;\n            let email=this.email;\n            let password1=this.password1;\n            let password2=this.password2;            \n            //validate user input\n            try{\n                \n                //empty input\n                if(username.trim()==''){\n                    this.setFocus(1);\n                    throw 'Please enter your username';\n                \n                }\n                if(email.trim()==''){\n                    this.setFocus(2);\n                    throw 'Please enter a valid email address';\n                }\n                else{\n                    //validate email format\n                    let emailValidator=require('email-validator');\n                    let isValid=emailValidator.validate(email);\n                    if(isValid==false){\n                        this.setFocus(2);\n                        throw 'Please enter a valid email address';\n                    }\n                }   \n                //validate password\n                if(password1.trim()==''){\n                    this.setFocus(3);    \n                    throw 'Please enter a valid password';\n                }\n                else if(password1.length<8){\n                    this.setFocus(3);\n                    throw 'Password must be between 8 and 20 characters long';\n                }\n                else{\n                    if(password1.indexOf(' ')>=0){\n                        this.setFocus(3);\n                        throw 'Password cannot contain empty spaces';\n                    }\n                }                \n\n                if(password1!=password2){\n                        this.setFocus(4);\n                    throw 'Passwords do not match. Please re-enter your password';\n                }\n                                \n                this.password=this.password1;\n                \n\n                //POST request with user credentials                    \n                let request= new XMLHttpRequest();    \n                request.open('POST','https://scripta-app.herokuapp.com/api/addNewUser');\n\n                let data=JSON.stringify({user_name:this.username,user_email:this.email,user_password:this.password});\n                request.send(data);  \n                \n                let self=this;\n                request.onreadystatechange = function (){        \n                    if(this.readyState==4 && this.status==200){\n                    \n                    \n                    alert(this.responseText);\n\n                    if(this.responseText=='Account successfully created'){\n                        //redirect to login page\n                        self.gotoLogin();\n                    }\n                    else if(this.responseText== 'Email already in use'){\n                        //highlight email field\n                        self.setFocus(2);\n                    }\n                    \n\n                    }\n                };\n\n            }\n            catch (error){\n                alert(error);\n            }\n\n        },\n\n        updateInput:function(n){\n           \n            if(n==1){\n               this.username=document.getElementById('username').value;                \n            }\n            else if (n==2) {\n               this.email=document.getElementById('email').value; \n            }\n\n            else if (n==3) {\n\n               this.password1=document.getElementById('password1').value;         \n            }\n\n            else if (n==4) {\n               this.password2=document.getElementById('password2').value; \n            }\n        },\n\n        //function to set focus to input fields that weren't completed properly\n        setFocus:function(n){\n            \n            let userEntries=document.getElementsByClassName('userEntry');\n\n            userEntries.forEach(u => {\n                u.classList.remove('focus');\n\n            });            \n            userEntries[n-1].classList.add('focus');\n        },\n\n        gotoLogin:function(){\n            this.$emit('gotoLogin',0);\n        },\n    },\n}\n</script>\n\n\n<style>\n\n\n    .userEntry {\n        text-align: center;\n    }\n\n    #container_button_back {        \n        margin-top: 2%;\n        justify-content: center;\n    }\n\n    #signup_button_register{\n        background-color: darkcyan;\n        color: white;\n    }\n\n    #button_back{\n        background-color: rgba(0,0,0,0);    \n    }\n    \n\n</style>\n\n"]}]}