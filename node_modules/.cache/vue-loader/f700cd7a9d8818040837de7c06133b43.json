{"remainingRequest":"/Users/stavros/Documents/web/diary/scripta/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/stavros/Documents/web/diary/scripta/src/components/Notes.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/stavros/Documents/web/diary/scripta/src/components/Notes.vue","mtime":1614335843000},{"path":"/Users/stavros/Documents/web/diary/scripta/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/stavros/Documents/web/diary/scripta/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/stavros/Documents/web/diary/scripta/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/stavros/Documents/web/diary/scripta/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/stavros/Documents/web/diary/scripta/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgoKaW1wb3J0IE5vdGUgZnJvbSAnLi9Ob3RlJzsKCgpleHBvcnQgZGVmYXVsdCB7CiAgICBuYW1lOidOb3RlcycsCgogICAgY29tcG9uZW50czp7CiAgICAgICAgTm90ZQogICAgfSwKCiAgICBkYXRhOmZ1bmN0aW9uKCl7CiAgICAgICAgcmV0dXJuewogICAgICAgICAgIG5vdGVzOltdLAogICAgICAgICAgIG9wZW5Ob3RlOmZhbHNlLAogICAgICAgICAgIHNlbGVjdGVkTm90ZTpbXQogICAgICAgIH0KICAgIH0sCgogICAgcHJvcHM6Wydkb3NzaWVyJ10sCgogICAgbW91bnRlZDpmdW5jdGlvbigpewogICAgICAgIHRoaXMsdGhpcy5nZXROb3RlcygpOwogICAgfSwKCiAgICBtZXRob2RzOnsKCiAgICAgICAgZ2V0Tm90ZXM6ZnVuY3Rpb24oKXsKCiAgICAgICAgICAgIC8vcmV0cmlldmUgbm90ZXMgZm9yIHRoaXMgZG9zc2llcgogICAgICAgICAgICBsZXQgc2VsZj10aGlzOwogICAgICAgICAgICBsZXQgcmVxdWVzdD0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7ICAgICAgICAgICAgCiAgICAgICAgICAgIHJlcXVlc3Qub3BlbignR0VUJywnaHR0cDovL2xvY2FsaG9zdDo4MDgwL2FwaS91c2VyLW5vdGVzJyk7ICAgICAgICAKCiAgICAgICAgICAgIGxldCBzZXNzaW9uX2lkPWxvY2FsU3RvcmFnZS5nZXRJdGVtKCdzZXNzaW9uX2lkJyk7CiAgICAgICAgICAgIGxldCB1c2VyX2lkPWxvY2FsU3RvcmFnZS5nZXRJdGVtKCd1c2VyX2lkJyk7CiAgICAgICAgICAgIGxldCBkb3NzaWVyX2lkPXRoaXMuZG9zc2llci5kb3NzaWVyX2ZrOwogICAgICAgIAoKICAgICAgICAgICAgcmVxdWVzdC5zZXRSZXF1ZXN0SGVhZGVyKCdzZXNzaW9uX2lkJywgc2Vzc2lvbl9pZCk7ICAgICAgICAgICAgICAgCiAgICAgICAgICAgIHJlcXVlc3Quc2V0UmVxdWVzdEhlYWRlcigndXNlcl9pZCcsIHVzZXJfaWQpOyAgICAgICAgICAgICAgIAogICAgICAgICAgICByZXF1ZXN0LnNldFJlcXVlc3RIZWFkZXIoJ2Rvc3NpZXJfaWQnLCBkb3NzaWVyX2lkKTsgICAgICAgICAgICAgICAKCiAgICAgICAgICAgIC8vc2VuZCByZXF1ZXN0CiAgICAgICAgICAgIHJlcXVlc3Quc2VuZCgpOyAgCgogICAgICAgICAgICByZXF1ZXN0Lm9ubG9hZD1mdW5jdGlvbigpewogICAgICAgICAgICAgICAgaWYodGhpcy5zdGF0dXM9PTIwMCl7CgogICAgICAgICAgICAgICAgICAgIGxldCByZXNwb25zZT1KU09OLnBhcnNlKHRoaXMucmVzcG9uc2VUZXh0KTsKICAgICAgICAgICAgICAgICAgICBzZWxmLm5vdGVzPXJlc3BvbnNlOwogICAgICAgICAgICAKICAgICAgICAgICAgICAgIH0gCiAgICAgICAgICAgICAgICBlbHNlewogICAgICAgICAgICAgICAgYWxlcnQodGhpcy5yZXNwb25zZVRleHQpOwogICAgICAgICAgICAgICAgfSAgCiAgICAgICAgICAgIH0gIAoKICAgICAgICB9LAogICAgICAgIAogICAgICAgIHNob3dOb3RlOmZ1bmN0aW9uKG5vdGVfaWQsdGl0bGUsYm9keSxkYXRlLHRpbWUsZG9zc2llcl9mayx1c2VyX2ZrKXsKICAgICAKICAgICAgICBjb25zb2xlLmxvZyhub3RlX2lkLHRpdGxlLGJvZHksZGF0ZSx0aW1lLGRvc3NpZXJfZmssdXNlcl9maykKICAgICAgICAgCiAgICAgICAgCiAgICAgICAgdGhpcy5zZWxlY3RlZE5vdGU9W3tub3RlX2lkOm5vdGVfaWQsdGl0bGU6dGl0bGUsYm9keTpib2R5LGRhdGU6ZGF0ZSwKICAgICAgICAgICAgICAgICAgICB0aW1lOnRpbWUsZG9zc2llcl9mazpkb3NzaWVyX2ZrLHVzZXJfZms6dXNlcl9ma31dOwoKICAgICAgICAgICAgCiAgICAgICAgdGhpcy5vcGVuTm90ZT10cnVlOwogICAgICAgICAgICAKICAgICAgICB9LAogICAgICAgIGRlbGV0ZU5vdGU6ZnVuY3Rpb24obm90ZV9pZCl7CiAgICAgICAgICAgIGxldCBzZWxmPXRoaXM7CiAgICAgICAgICAgIC8vY29uZmlybQogICAgICAgICAgICBsZXQgZGVsPWNvbmZpcm0oJ0FyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBkZWxldGUgdGhpcyBub3RlPycpOwogICAgICAgICAgICBpZihkZWw9PXRydWUpeyAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIC8vc2VuZCByZXF1ZXN0CiAgICAgICAgICAgICAgICBsZXQgc2Vzc2lvbl9pZD1sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnc2Vzc2lvbl9pZCcpOyAgICAgICAgICAgIAogICAgICAgICAgICAgICAgbGV0IHJlcXVlc3Q9bmV3IFhNTEh0dHBSZXF1ZXN0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICByZXF1ZXN0Lm9wZW4oJ0RFTEVURScsJ2h0dHA6Ly9sb2NhbGhvc3Q6ODA4MC9hcGkvbm90ZScpOwoKICAgICAgICAgICAgICAgIHJlcXVlc3Quc2V0UmVxdWVzdEhlYWRlcignc2Vzc2lvbl9pZCcsIHNlc3Npb25faWQpOwoKICAgICAgICAgICAgICAgIGxldCBkYXRhPUpTT04uc3RyaW5naWZ5KHtub3RlX2lkOm5vdGVfaWR9KTsKICAgICAgICAgICAgICAgIHJlcXVlc3Quc2VuZChkYXRhKTsgICAgICAgICAgICAgICAgICAKCiAgICAgICAgICAgICAgICByZXF1ZXN0Lm9ubG9hZCA9IGZ1bmN0aW9uICgpeyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGlmKHRoaXMuc3RhdHVzPT0yMDApeyAvL3JlcXVlc3QgaXMgdmFsaWQgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICBhbGVydCh0aGlzLnJlc3BvbnNlVGV4dCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuZ2V0Tm90ZXMoKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZWxzZXsKICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQodGhpcy5yZXNwb25zZVRleHQpOwogICAgICAgICAgICAgICAgICAgIH0gICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfQogICAgICAgICAgICAKCiAgICAgICAgfSwKCiAgICAgICAgYmFja19ub3RlczpmdW5jdGlvbigpewogICAgICAgICAgICAKICAgICAgICAgICAgdGhpcy5vcGVuTm90ZT1mYWxzZTsKICAgICAgICAgICAgdGhpcy5nZXROb3RlcygpOwogICAgICAgICAgICAKICAgICAgICB9LAogICAgICAgCiAgICAgICAgCgogICAgICAgLy8KCiAgICB9LAp9Cg=="},{"version":3,"sources":["Notes.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqDA;;;AAGA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;;AAGA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;;AAEA;AACA;;AAEA;;;;AAIA;;AAEA;AACA","file":"Notes.vue","sourceRoot":"src/components","sourcesContent":["<template>\n\n    <div id=\"Notes\" class=\"container\">\n        <transition name=\"fade\">\n\n            \n\n            <div v-if=\"!openNote\" class=\"container\">\n\n                <div class=\"row\">\n                    <button v-on:click='$emit(\"back_dossiers\")'>\n                        <i class=\"fas fa-caret-left back\"> </i> \n                    </button></div>\n                \n                <div class=\"row\"><b> <i class=\"fas fa-folder\"> {{this.dossier.dossier_name}} </i></b></div>\n    \n                <div style=\"height:auto; max-height: 300px; overflow-y: scroll;\">\n                    <div class=\"row\" v-for=\"note in notes\" :key=\"note.note_id\">\n                        <div class=\"col record\">\n                            <i class=\"fas fa-feather-alt\"> {{note.title}} </i>   \n                        </div>\n        \n                        <button class=\"col record\" v-on:click='showNote(note.note_id,note.title,note.body,\n                                                               note.date,note.time,note.dossier_fk,note.user_fk)'>\n                            open\n                        </button>\n\n                        <button class=\"col record\" v-on:click='deleteNote(note.note_id)'>\n                            <i class=\"far fa-trash-alt\"></i>    \n                        </button>\n        \n                    </div>\n                </div>\n    \n                \n    \n            </div>\n        </transition>\n\n        <transition name=\"fade\">\n            <Note v-if=\"openNote\" v-bind:noteData='selectedNote'\n            v-on:back_notes='back_notes'\n            \n            />\n        </transition>\n\n    </div>    \n</template>\n\n\n<script>\n\n\nimport Note from './Note';\n\n\nexport default {\n    name:'Notes',\n\n    components:{\n        Note\n    },\n\n    data:function(){\n        return{\n           notes:[],\n           openNote:false,\n           selectedNote:[]\n        }\n    },\n\n    props:['dossier'],\n\n    mounted:function(){\n        this,this.getNotes();\n    },\n\n    methods:{\n\n        getNotes:function(){\n\n            //retrieve notes for this dossier\n            let self=this;\n            let request= new XMLHttpRequest();            \n            request.open('GET','http://localhost:8080/api/user-notes');        \n\n            let session_id=localStorage.getItem('session_id');\n            let user_id=localStorage.getItem('user_id');\n            let dossier_id=this.dossier.dossier_fk;\n        \n\n            request.setRequestHeader('session_id', session_id);               \n            request.setRequestHeader('user_id', user_id);               \n            request.setRequestHeader('dossier_id', dossier_id);               \n\n            //send request\n            request.send();  \n\n            request.onload=function(){\n                if(this.status==200){\n\n                    let response=JSON.parse(this.responseText);\n                    self.notes=response;\n            \n                } \n                else{\n                alert(this.responseText);\n                }  \n            }  \n\n        },\n        \n        showNote:function(note_id,title,body,date,time,dossier_fk,user_fk){\n     \n        console.log(note_id,title,body,date,time,dossier_fk,user_fk)\n         \n        \n        this.selectedNote=[{note_id:note_id,title:title,body:body,date:date,\n                    time:time,dossier_fk:dossier_fk,user_fk:user_fk}];\n\n            \n        this.openNote=true;\n            \n        },\n        deleteNote:function(note_id){\n            let self=this;\n            //confirm\n            let del=confirm('Are you sure you want to delete this note?');\n            if(del==true){                \n                //send request\n                let session_id=localStorage.getItem('session_id');            \n                let request=new XMLHttpRequest();\n                                \n                request.open('DELETE','http://localhost:8080/api/note');\n\n                request.setRequestHeader('session_id', session_id);\n\n                let data=JSON.stringify({note_id:note_id});\n                request.send(data);                  \n\n                request.onload = function (){                                                            \n                    if(this.status==200){ //request is valid                    \n                        alert(this.responseText);\n                        self.getNotes();\n                    }\n                    else{\n                        alert(this.responseText);\n                    }                    \n                };\n            }\n            \n\n        },\n\n        back_notes:function(){\n            \n            this.openNote=false;\n            this.getNotes();\n            \n        },\n       \n        \n\n       //\n\n    },\n}\n</script>\n\n\n<style>\n    .record {margin-top: 1%;}\n   .record i {\n    font-size: 1em;\n}\n\n</style>\n\n"]}]}