{"remainingRequest":"/Users/stavros/Documents/web/diary/scripta/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/stavros/Documents/web/diary/scripta/src/components/Index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/stavros/Documents/web/diary/scripta/src/components/Index.vue","mtime":1615236685248},{"path":"/Users/stavros/Documents/web/diary/scripta/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/stavros/Documents/web/diary/scripta/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/stavros/Documents/web/diary/scripta/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/stavros/Documents/web/diary/scripta/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgppbXBvcnQgTm90ZSBmcm9tICcuL05vdGUnOwpleHBvcnQgZGVmYXVsdCB7CiAgICBuYW1lOidJbmRleCcsCgogICAgY29tcG9uZW50czogewogICAgTm90ZQogIH0sCgogICAgZGF0YTpmdW5jdGlvbigpewogICAgICAgIHJldHVybnsKICAgICAgICAgICByZWNlbnROb3RlczpbXSwKICAgICAgICAgICBzZWxlY3RlZE5vdGU6W10sCiAgICAgICAgICAgb3Blbk5vdGU6ZmFsc2UKICAgICAgICB9CiAgICB9LAoKICAgIC8vIHByb3BzOltdLAoKICAgIHdhdGNoOnsKICAgICAgICAgcmVjZW50Tm90ZXM6ZnVuY3Rpb24obmV3VmFsKXsKICAgICAgICAgICAgICAgdGhpcy5yZWNlbnROb3Rlcz1uZXdWYWw7ICAKICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgIAogICAgICAgICB9LCAKICAgICAgICAvLyAgZG9zc2llcjpmdW5jdGlvbihuZXdWYWwpewogICAgICAgIC8vICAgICAgICB0aGlzLmRvc3NpZXI9bmV3VmFsOyAgIAogICAgICAgICAgICAgICAKICAgICAgICAvLyAgfSwKICAgICAgICAvLyAgdGFnczpmdW5jdGlvbihuZXdWYWwpewogICAgICAgIC8vICAgICAgICAgIHRoaXMubmV3X3RhZ3M9bmV3VmFsOyAgICAgICAgICAgICAgICAgCiAgICAgICAgLy8gIH0sCiAgICAgICAgCiAgICB9LAoKICAgIG1vdW50ZWQ6ZnVuY3Rpb24oKXsKICAgIC8vZ2V0ICAzIG1vc3QgcmVjZW50IG5vdGVzCiAgICB0aGlzLmdldFJlY2VudE5vdGVzKCk7CiAgICB9LAoKICAgIG1ldGhvZHM6eyAgICAgICAgCiAgICAgICAgZ2V0UmVjZW50Tm90ZXM6ZnVuY3Rpb24oKXsKICAgICAgICAgICAgdGhpcy5yZWNlbnROb3Rlcz1bXTsKICAgICAgICAgICAgbGV0IHNlbGY9IHRoaXM7CiAgICAgICAgICAgICAKCiAgICAgICAgICAgIGxldCByZXF1ZXN0PSBuZXcgWE1MSHR0cFJlcXVlc3QoKTsgICAgICAgICAgICAKICAgICAgICAgICAgcmVxdWVzdC5vcGVuKCdHRVQnLCdodHRwczovL3NjcmlwdGEtYXBwLmhlcm9rdWFwcC5jb20vYXBpL3JlY2VudC1ub3RlcycpOyAgICAgICAgCgogICAgICAgICAgICBsZXQgc2Vzc2lvbl9pZD1sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnc2Vzc2lvbl9pZCcpOwogICAgICAgICAgICBsZXQgdXNlcl9pZD1sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndXNlcl9pZCcpOwoKICAgICAgICAgICAgcmVxdWVzdC5zZXRSZXF1ZXN0SGVhZGVyKCdzZXNzaW9uX2lkJywgc2Vzc2lvbl9pZCk7ICAgICAgICAgICAgICAgCiAgICAgICAgICAgIHJlcXVlc3Quc2V0UmVxdWVzdEhlYWRlcigndXNlcl9pZCcsIHVzZXJfaWQpOyAgICAgICAgICAgICAgIAoKICAgICAgICAgICAgLy9zZW5kIHJlcXVlc3QKICAgICAgICAgICAgcmVxdWVzdC5zZW5kKCk7ICAKCiAgICAgICAgICAgIHJlcXVlc3Qub25sb2FkPWZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICBpZih0aGlzLnN0YXR1cz09MjAwKXsKICAgICAgICAgICAgICAgICAgICBsZXQgcmVzcG9uc2U9SlNPTi5wYXJzZSh0aGlzLnJlc3BvbnNlVGV4dCk7CiAgICAgICAgICAgICAgICAgICAgc2VsZi5yZWNlbnROb3Rlcz1yZXNwb25zZTsKICAgICAgICAgICAgICAgIH0gCiAgICAgICAgICAgICAgICBlbHNlewogICAgICAgICAgICAgICAgICAgICBhbGVydCh0aGlzLnJlc3BvbnNlVGV4dCk7CiAgICAgICAgICAgICAgICB9ICAKICAgICAgICAgICAgfSAgCgoKICAgICAgICB9LAoKICAgICAgICBxdWVyeU5vdGU6ZnVuY3Rpb24oKXsKICAgICAgICAgICAgdGhpcy5yZWNlbnROb3Rlcz1bXTsKICAgICAgICAgICAgbGV0IHNlbGY9IHRoaXM7CiAgICAgICAgICAgIGxldCBxdWVyeV9pbnB1dD1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VhcmNoYmFyJykudmFsdWUudHJpbSgpOwogICAgICAgICAgICAKICAgICAgICAgICAgaWYocXVlcnlfaW5wdXQhPScnKXsKCiAgICAgICAgICAgICAgICBsZXQgcmVxdWVzdD0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7ICAgICAgICAgICAgCiAgICAgICAgICAgICAgICByZXF1ZXN0Lm9wZW4oJ0dFVCcsJ2h0dHBzOi8vc2NyaXB0YS1hcHAuaGVyb2t1YXBwLmNvbS9hcGkvcXVlcnktbm90ZScpOyAgICAgICAgCgogICAgICAgICAgICAgICAgbGV0IHNlc3Npb25faWQ9bG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Nlc3Npb25faWQnKTsKICAgICAgICAgICAgICAgIGxldCB1c2VyX2lkPWxvY2FsU3RvcmFnZS5nZXRJdGVtKCd1c2VyX2lkJyk7CiAgICAgICAgICAgICAgICAKCgogICAgICAgICAgICAgICAgcmVxdWVzdC5zZXRSZXF1ZXN0SGVhZGVyKCdzZXNzaW9uX2lkJywgc2Vzc2lvbl9pZCk7ICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICByZXF1ZXN0LnNldFJlcXVlc3RIZWFkZXIoJ3VzZXJfaWQnLCB1c2VyX2lkKTsgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIHJlcXVlc3Quc2V0UmVxdWVzdEhlYWRlcigncXVlcnlfaW5wdXQnLCBxdWVyeV9pbnB1dCk7ICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAvL3NlbmQgcmVxdWVzdAogICAgICAgICAgICAgICAgcmVxdWVzdC5zZW5kKCk7ICAKCiAgICAgICAgICAgICAgICByZXF1ZXN0Lm9ubG9hZD1mdW5jdGlvbigpewogICAgICAgICAgICAgICAgICAgIGlmKHRoaXMuc3RhdHVzPT0yMDApewogICAgICAgICAgICAgICAgICAgICAgICBsZXQgcmVzcG9uc2U9SlNPTi5wYXJzZSh0aGlzLnJlc3BvbnNlVGV4dCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYucmVjZW50Tm90ZXM9cmVzcG9uc2U7CiAgICAgICAgICAgICAgICAgICAgfSAKICAgICAgICAgICAgICAgICAgICBlbHNlewogICAgICAgICAgICAgICAgICAgICAgICBhbGVydCh0aGlzLnJlc3BvbnNlVGV4dCk7CiAgICAgICAgICAgICAgICAgICAgfSAgCiAgICAgICAgICAgICAgICB9ICAKCiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZXsKICAgICAgICAgICAgICAgIHRoaXMuZ2V0UmVjZW50Tm90ZXMoKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgCiAgICAgICAgfSwKICAgICAgICBvTm90ZTpmdW5jdGlvbihub3RlKXsKCiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWROb3RlWzBdPSh7bm90ZV9pZDpub3RlLm5vdGVfaWQsdGl0bGU6bm90ZS50aXRsZSxib2R5Om5vdGUuYm9keSxkYXRlOm5vdGUuZGF0ZSx0aW1lOm5vdGUudGltZSxkb3NzaWVyX2ZrOm5vdGUuZG9zc2llcl9mayx1c2VyX2ZrOm5vdGUudXNlcl9ma30pOwogICAgICAgICAgICB0aGlzLm9wZW5Ob3RlPXRydWU7CiAgICAgICAgfSwKICAgICAgICBkZWxldGVOb3RlOmZ1bmN0aW9uKG5vdGUpewogICAgICAgICAgICBsZXQgc2VsZj10aGlzOwogICAgICAgICAgICBsZXQgZGVsID0gY29uZmlybSgnQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGRlbGV0ZSB0aGlzIG5vdGU/Jyk7CiAgICAgICAgICAgIGlmKGRlbD09dHJ1ZSl7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgbGV0IHJlcXVlc3Q9IG5ldyBYTUxIdHRwUmVxdWVzdCgpOyAgICAgICAgICAgIAogICAgICAgICAgICByZXF1ZXN0Lm9wZW4oJ0RFTEVURScsJ2h0dHBzOi8vc2NyaXB0YS1hcHAuaGVyb2t1YXBwLmNvbS9hcGkvbm90ZScpOyAgICAgICAgCgogICAgICAgICAgICBsZXQgc2Vzc2lvbl9pZD1sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnc2Vzc2lvbl9pZCcpOyAgICAgICAgICAgIAogICAgICAgICAgICBsZXQgZGF0YT1KU09OLnN0cmluZ2lmeSh7bm90ZV9pZDpub3RlLm5vdGVfaWR9KTsgICAgICAgICAgICAKICAgICAgICAgICAgcmVxdWVzdC5zZXRSZXF1ZXN0SGVhZGVyKCdzZXNzaW9uX2lkJywgc2Vzc2lvbl9pZCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAvL3NlbmQgcmVxdWVzdAogICAgICAgICAgICByZXF1ZXN0LnNlbmQoZGF0YSk7ICAKCiAgICAgICAgICAgIHJlcXVlc3Qub25sb2FkPWZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICBpZih0aGlzLnN0YXR1cz09MjAwKXsKICAgICAgICAgICAgICAgICAgICBhbGVydCh0aGlzLnJlc3BvbnNlVGV4dCk7CiAgICAgICAgICAgICAgICAgICAgc2VsZi5nZXRSZWNlbnROb3RlcygpOwogICAgICAgICAgICAgICAgfSAKICAgICAgICAgICAgICAgIGVsc2V7CiAgICAgICAgICAgICAgICAgICAgYWxlcnQodGhpcy5yZXNwb25zZVRleHQpOyAgICAgICAgCiAgICAgICAgICAgICAgICB9ICAKICAgICAgICAgICAgfSAgICAgICAgCgoKCiAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgfSwKICAgICAgICBiYWNrX25vdGVzOmZ1bmN0aW9uKCl7CiAgICAgICAgICAgIHRoaXMub3Blbk5vdGU9ZmFsc2U7CiAgICAgICAgICAgIHRoaXMuZ2V0UmVjZW50Tm90ZXMoKTsKICAgICAgICB9CgogICAgfSwKfQo="},{"version":3,"sources":["Index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+CA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"Index.vue","sourceRoot":"src/components","sourcesContent":["<template>\n\n    \n        <main id=\"Index\" class=\"container\">\n            <transition name=\"fade\">\n                <div v-if=\"!openNote\">\n                    <div class=\"container\">\n            \n                        <div class=\"row\" id=\"searchbarContainer\">\n                            <input class=\"col-12\" type=\"text\" id=\"searchbar\" placeholder=\"title\" v-on:keyup='queryNote'>\n                        </div>\n                        \n                        <div v-if=\"this.recentNotes==''\" class=\"row\" id=\"lastNoteContainer\">\n                            <div class=\"col-12 systemMessage  top2\" id=\"lastNote\">\n                               No recent notes found\n                            </div>\n                        </div>      \n        \n                        <div v-if=\"this.recentNotes!=''\">\n                            <div class=\"col-12 top1  systemMessage\">Your recent notes</div>\n                            <div v-for=\"recentNote in this.recentNotes\" :key=\"recentNote.note_id\" class=\"row record full\">\n                                <button class=\"col\"><i class=\"fas fa-feather-alt results_label full left\"> <span class=\"left2\">{{recentNote.title}} </span></i></button>\n                                <button class=\"col-2\" v-on:click=\"oNote(recentNote)\">open</button>\n                                <button class=\"col-2\" v-on:click='deleteNote(recentNote)'><i class=\"far fa-trash-alt\"></i> </button>\n                               \n                            </div>\n                        </div>          \n                    </div>\n                </div>\n            </transition>\n\n            <transition name=\"fade\">\n                <Note v-if=\"openNote\"\n                      v-bind:noteData='selectedNote'\n                      v-on:back_notes='back_notes'   \n                \n                 />\n            </transition>\n\n        </main>\n    \n\n</template>\n\n\n<script>\n\nimport Note from './Note';\nexport default {\n    name:'Index',\n\n    components: {\n    Note\n  },\n\n    data:function(){\n        return{\n           recentNotes:[],\n           selectedNote:[],\n           openNote:false\n        }\n    },\n\n    // props:[],\n\n    watch:{\n         recentNotes:function(newVal){\n               this.recentNotes=newVal;  \n               \n               \n         }, \n        //  dossier:function(newVal){\n        //        this.dossier=newVal;   \n               \n        //  },\n        //  tags:function(newVal){\n        //          this.new_tags=newVal;                 \n        //  },\n        \n    },\n\n    mounted:function(){\n    //get  3 most recent notes\n    this.getRecentNotes();\n    },\n\n    methods:{        \n        getRecentNotes:function(){\n            this.recentNotes=[];\n            let self= this;\n             \n\n            let request= new XMLHttpRequest();            \n            request.open('GET','https://scripta-app.herokuapp.com/api/recent-notes');        \n\n            let session_id=localStorage.getItem('session_id');\n            let user_id=localStorage.getItem('user_id');\n\n            request.setRequestHeader('session_id', session_id);               \n            request.setRequestHeader('user_id', user_id);               \n\n            //send request\n            request.send();  \n\n            request.onload=function(){\n                if(this.status==200){\n                    let response=JSON.parse(this.responseText);\n                    self.recentNotes=response;\n                } \n                else{\n                     alert(this.responseText);\n                }  \n            }  \n\n\n        },\n\n        queryNote:function(){\n            this.recentNotes=[];\n            let self= this;\n            let query_input=document.getElementById('searchbar').value.trim();\n            \n            if(query_input!=''){\n\n                let request= new XMLHttpRequest();            \n                request.open('GET','https://scripta-app.herokuapp.com/api/query-note');        \n\n                let session_id=localStorage.getItem('session_id');\n                let user_id=localStorage.getItem('user_id');\n                \n\n\n                request.setRequestHeader('session_id', session_id);               \n                request.setRequestHeader('user_id', user_id);               \n                request.setRequestHeader('query_input', query_input);               \n                //send request\n                request.send();  \n\n                request.onload=function(){\n                    if(this.status==200){\n                        let response=JSON.parse(this.responseText);\n                        self.recentNotes=response;\n                    } \n                    else{\n                        alert(this.responseText);\n                    }  \n                }  \n\n            }\n            else{\n                this.getRecentNotes();\n            }\n\n            \n        },\n        oNote:function(note){\n\n            this.selectedNote[0]=({note_id:note.note_id,title:note.title,body:note.body,date:note.date,time:note.time,dossier_fk:note.dossier_fk,user_fk:note.user_fk});\n            this.openNote=true;\n        },\n        deleteNote:function(note){\n            let self=this;\n            let del = confirm('Are you sure you want to delete this note?');\n            if(del==true){\n                \n            let request= new XMLHttpRequest();            \n            request.open('DELETE','https://scripta-app.herokuapp.com/api/note');        \n\n            let session_id=localStorage.getItem('session_id');            \n            let data=JSON.stringify({note_id:note.note_id});            \n            request.setRequestHeader('session_id', session_id);                                           \n            //send request\n            request.send(data);  \n\n            request.onload=function(){\n                if(this.status==200){\n                    alert(this.responseText);\n                    self.getRecentNotes();\n                } \n                else{\n                    alert(this.responseText);        \n                }  \n            }        \n\n\n\n            }\n            \n        },\n        back_notes:function(){\n            this.openNote=false;\n            this.getRecentNotes();\n        }\n\n    },\n}\n</script>\n\n\n<style>\n\n\n\n#searchbarContainer {\n                     margin-top: 2%;   \n                     justify-content: center;\n                     text-align: left;\n                    }\n\n#searchbar {\n            \n            border-radius: 20px;\n            border:solid lightgrey thin;\n            }\n\n\n\n\n\n\n</style>"]}]}